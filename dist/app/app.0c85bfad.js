!function(){"use strict";angular.module("dataDashboard",["ngMessages","ui.router","ui.bootstrap","ui.bootstrap.showErrors","angular-loading-bar","highcharts-ng","ngAnimate","ngLodash","dataDashboard.common","dataDashboard.cumulativeUserData","dataDashboard.subscribeUserData","dataDashboard.cancelUserData","dataDashboard.monthlyRecurringRevenue","dataDashboard.mobileStoreStats","dataDashboard.activeUsers","dataDashboard.cohortAnalysis","dataDashboard.userPageFlow","dataDashboard.customQuery","dataDashboard.main","dataDashboard.signin","dataDashboard.cardRate","dataDashboard.downloadedCard","dataDashboard.upgradeDowngrade","dataDashboard.publisherRate","dataDashboard.preferredSubjects","dataDashboard.customQuery","dataDashboard.aarrr"])}(),function(){$(function(){$("#side-menu").metisMenu()}),$(function(){$(window).bind("load resize",function(){topOffset=50,width=this.window.innerWidth>0?this.window.innerWidth:this.screen.width,width<768?($("div.navbar-collapse").addClass("collapse"),topOffset=100):$("div.navbar-collapse").removeClass("collapse"),height=(this.window.innerHeight>0?this.window.innerHeight:this.screen.height)-1,height-=topOffset,height<1&&(height=1),height>topOffset&&$("#page-wrapper").css("min-height",height+"px")});var a=window.location,b=$("ul.nav a").filter(function(){return this.href===a||0===a.href.indexOf(this.href)}).addClass("active").parent().parent().addClass("in").parent();b.is("li")&&b.addClass("active")})}(),function(){"use strict";function a(a,b){function c(){}function d(){e.endDate.getTime()-e.startDate.getTime()<=6048e5?a.getSignUpUser(e.dataSignUpContainer,e.startDate,e.endDate).then(function(b){200===b.status&&a.getDownloadUser(e.dataDownloadContainer,e.dataSignUpContainer,e.signUpToDownload,e.startDate,e.endDate).then(function(b){200===b.status&&a.getResultUser(e.dataResultContainer,e.signUpToDownload,e.downloadToResult,e.startDate,e.endDate).then(function(b){200===b.status&&a.getActiveUser(e.dataActiveContainer,e.downloadToResult,e.resultToActive,e.startDate,e.endDate).then(function(b){200===b.status&&a.getPaymentUser(e.dataPaymentContainer,e.resultToActive,e.activeToPayment,e.startDate,e.endDate)})})})}):alert("1주일 이내로 범위를 지정해주세요.")}var e=this;e.dataSignUpContainer=[],e.dataDownloadContainer=[],e.dataResultContainer=[],e.dataActiveContainer=[],e.dataPaymentContainer=[],e.signUpToDownload=[],e.downloadToResult=[],e.resultToActive=[],e.activeToPayment=[],e.endDate=new Date,e.startDate=new Date((new Date).setDate((new Date).getDate()-7)),c(),e.getData=d}a.$inject=["AARRR","APP_CONFIG"],angular.module("dataDashboard.aarrr.controller.AARRRController",[]).controller("AARRRController",a)}(),function(){"use strict";angular.module("dataDashboard.aarrr",["dataDashboard.aarrr.controller.AARRRController","dataDashboard.aarrr.service.AARRR","dataDashboard.aarrr.AARRRRouter"])}(),function(){"use strict";function a(a){a.state("dashboard.aarrr",{templateUrl:"app/aarrr/aarrr.html",url:"/aarrr",controller:"AARRRController",controllerAs:"aarrrVm"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.aarrr.AARRRRouter",[]).config(a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(c,d,f){var g=b.defer(),h="/lc_db_prd/_table/users?fields=id%2C%20name%2C%20created_at&filter=(created_at>="+o(d)+") AND (created_at<="+o(f,"dsp")+")&include_count=true&continue=true";return a({url:e.BACKEND_ADDRESS+h,method:"GET",headers:{"X-DreamFactory-Application-Name":e.DSP_API_NAME,"X-DreamFactory-Api-Key":e.DSP_API_KEY}}).then(function(a){c.splice(0),a.data.resource.forEach(function(a){c.push(a.id)}),g.resolve({status:a.status})},g.reject),g.promise}function h(c,d,f,g,h){var i=b.defer(),j="SELECT distinct user_id"+l(g,h)+' WHERE _type="download" and @timestamp Between "'+o(g,"esStart")+'" AND "'+o(h,"esEnd")+'" limit 10000';return a({url:e.ELASTIC_SEARCH_SQL+"?sql="+j,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){c.splice(0),!a.data.timed_out&&a.data.hits&&a.data.hits.hits.forEach(function(a){c.push(a._source.user_id)}),p(d,c,f),i.resolve({status:a.status})},i.reject),i.promise}function i(c,d,f,g,h){var i=b.defer(),j="SELECT distinct user_id"+l(g,h)+' WHERE _type="result" and @timestamp Between "'+o(g,"esStart")+'" AND "'+o(h,"esEnd")+'" limit 10000';return a({url:e.ELASTIC_SEARCH_SQL+"?sql="+j,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){c.splice(0),!a.data.timed_out&&a.data.hits&&a.data.hits.hits.forEach(function(a){c.push(a._source.user_id)}),p(d,c,f),i.resolve({status:a.status})},i.reject),i.promise}function j(c,d,f,g,h){var i=b.defer(),j="SELECT count(user_id) as count"+l(g,h)+' WHERE _type="page" and cur_page="today" and @timestamp Between "'+o(g,"esStart")+'" AND "'+o(h,"esEnd")+'" group by user_id limit 10000';return a({url:e.ELASTIC_SEARCH_SQL+"?sql="+j,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){c.splice(0),!a.data.timed_out&&a.data.aggregations&&a.data.aggregations.user_id.buckets.forEach(function(a){c.push(a.key)}),p(d,c,f),i.resolve({status:a.status})},i.reject),i.promise}function k(c,d,f,g,h){var i=b.defer(),j="SELECT count(user_id) as count"+l(g,h)+' WHERE _type="payment" and event="_null" and @timestamp Between "'+o(g,"esStart")+'" AND "'+o(h,"esEnd")+'" group by user_id limit 10000';return a({url:e.ELASTIC_SEARCH_SQL+"?sql="+j,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){c.splice(0),!a.data.timed_out&&a.data.aggregations&&a.data.aggregations.user_id.buckets.forEach(function(a){c.push(a.key)}),p(d,c,f),i.resolve({status:a.status})},i.reject),i.promise}function l(a,b){var c=new Date(a.getTime()),d=n(b),e=m(n(a)),f=" FROM "+e;c.setDate(c.getDate()+1);for(var g,h=c.getDate(),i=n(c),j=n(a).toString().substring(6,7),k=e;d>i;)g=m(i),k!==g&&(f+=","+m(i),j=i.toString().substring(6,7)),c.setDate(h+1),h=c.getDate(),i=n(c),k=g;return g=m(i),k!==g&&(f+=","+m(d)),f}function m(a,b){var c=a.toString();return b?c.substring(0,4)+b+c.substring(4,6)+b+c.substring(6,8):"log-"+c.substring(0,4)+"."+c.substring(4,6)}function n(a){return 1e4*a.getFullYear()+100*(a.getMonth()+1)+a.getDate()}function o(a,b){var c=new Date(a),d=""+(c.getMonth()+1),e="",f=c.getFullYear(),g="";return e="dsp"===b?""+(c.getDate()+1):""+c.getDate(),"esStart"===b?g="T00:00:00":"esEnd"===b&&(g="T23:59:59"),d.length<2&&(d="0"+d),e.length<2&&(e="0"+e),[f,d,e].join("-")+g}function p(a,b,c){c.splice(0),a.forEach(function(a){f.includes(b,a)===!0&&c.push(a)})}return{getSignUpUser:g,getDownloadUser:h,getResultUser:i,getActiveUser:j,getPaymentUser:k}}a.$inject=["$http","$q","$rootScope","$filter","APP_CONFIG","lodash"],angular.module("dataDashboard.aarrr.service.AARRR",[]).factory("AARRR",a)}(),function(){"use strict";function a(a,e,f,g,h){function i(){r(s.dateRange.startDate),j()}function j(){k(),s.selectedActivenessCnt&&s.selectedActivenessCnt>0&&s.selectedActivenessCnt<=100&&(a.getDailyActiveUsersData(s.dailyActiveUsersDataForLineChart,s.dateRange.startDate,s.dateRange.endDate,s.selectedDeviceFilter,s.selectedRoleFilter,s.selectedActivenessCnt,m),a.getWeeklyActiveUsersData(s.weeklyActiveUsersDataForLineChart,s.dateRange.startDate,s.dateRange.endDate,s.dateRange.dateArray,s.selectedDeviceFilter,s.selectedRoleFilter,s.selectedActivenessCnt,m),a.getMonthlyActiveUsersData(s.monthlyActiveUsersDataForLineChart,s.dateRange.startDate,s.dateRange.endDate,s.dateRange.dateArray,s.selectedDeviceFilter,s.selectedRoleFilter,s.selectedActivenessCnt,m))}function k(){var a=new Date(s.dateRange.startDate.getTime());for(s.dateRange.dateArray.splice(0);a<s.dateRange.endDate;)s.dateRange.dateArray.push(a),a=new Date(a.getTime()),a.setDate(a.getDate()+1);s.dateRange.dateArray.push(s.dateRange.endDate)}function l(b){var c,d=["date","count"],e=a.getCsvFileName(b,s.dateRange.startDate,s.dateRange.endDate);d.push("Role: "+h("titleCase")(s.selectedRoleFilter)),d.push("Device: "+h("device")(s.selectedDeviceFilter)),d.push("ActivenessCnt: "+s.selectedActivenessCnt),"Daily Active Users"===b?(c=s.dailyActiveUsersDataForLineChart.data.slice(0),f.downloadCSV2(c,!1,e,d)):"Weekly Active Users"===b?(c=s.weeklyActiveUsersDataForLineChart.data.slice(0),f.downloadCSV2(c,!1,e,d)):"Monthly Active Users"===b&&(c=s.monthlyActiveUsersDataForLineChart.data.slice(0),f.downloadCSV2(c,!1,e,d))}function m(){s.selectedView===s.availableViews[0]?s.reversedData=s.dailyActiveUsersDataForLineChart:s.selectedView===s.availableViews[1]?s.reversedData=s.weeklyActiveUsersDataForLineChart:s.reversedData=s.monthlyActiveUsersDataForLineChart,s.reversedData=s.reversedData.data.slice().reverse(),s.totalItem=s.reversedData.length-1,o(1)}function n(a){s.selectedView=a,m()}function o(a){s.currentPage=a,s.reversedDataContainer=[];for(var b=(s.currentPage-1)*c,d=b;b+c>d;d++){if(d===s.totalItem){s.reversedDataContainer.push([s.reversedData[d][0],s.reversedData[d][1],"-"]);break}s.reversedDataContainer.push([s.reversedData[d][0],s.reversedData[d][1],s.reversedData[d][1]-s.reversedData[d+1][1],(s.reversedData[d][1]-s.reversedData[d+1][1])/(s.reversedData[d+1][1]||1)])}}function p(a){return a=q(a),6===a?{color:"blue"}:0===a?{color:"red"}:{color:"black"}}function q(a){var b=new Date(a);return b.getDay()}function r(a){s.dauStartDate=new Date(new Date(a).setDate(a.getDate()-7))}var s=this;s.currentPage=1,s.totalItem=0,s.dateRange={startDate:d,endDate:b,dateArray:[]},s.availableRoles=["child","parent"],s.availableDevices=["android","ios"],s.availablePieChartFilters=["roles","devices"],s.selectedRoleFilter="all",s.selectedDeviceFilter="all",s.selectedActivenessCnt=1,s.selectedView="Daily Active Users",s.availableViews=["Daily Active Users","Weekly Active Users","Monthly Active Users"],s.reversedData=[],s.reversedDataContainer=[],s.getAverage=e.getAverage,s.getMinimum=e.getMinimum,s.getMaximum=e.getMaximum,s.dailyActiveUsersDataForLineChart={name:"Daily Active Users",data:[[(new Date).getTime(),0]],id:"daily-active-users"},s.weeklyActiveUsersDataForLineChart={name:"Weekly Active Users",data:[[(new Date).getTime(),0]],id:"weekly-active-users"},s.monthlyActiveUsersDataForLineChart={name:"Monthly Active Users",data:[[(new Date).getTime(),0]],id:"monthly-active-users"},s.lineChartData=[s.dailyActiveUsersDataForLineChart,s.weeklyActiveUsersDataForLineChart,s.monthlyActiveUsersDataForLineChart],s.lineChartConfig=new e.LineChartConfig(s.lineChartData,null,!0),s.lineChartFilter=j,s.pageChanged=o,s.selectDropdownView=n,s.getDateColor=p,s.downloadCSV=l,i()}var b=new Date,c=20;b.setHours(9),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0);var d=new Date(b.getTime());new Date("2015-11-07"),new Date("2015-11-30");d.setDate(d.getDate()-29),a.$inject=["ActiveUsers","LinechartUtils","CSVparserUtils","APP_CONFIG","$filter"],angular.module("dataDashboard.activeUsers.controller.ActiveUsersController",[]).controller("ActiveUsersController",a)}(),function(){"use strict";angular.module("dataDashboard.activeUsers",["dataDashboard.activeUsers.controller.ActiveUsersController","dataDashboard.activeUsers.service.ActiveUsers","dataDashboard.activeUsers.ActiveUsersRouter"])}(),function(){"use strict";function a(a){a.state("dashboard.activeUsers",{templateUrl:"app/active-users/active-users.html",url:"/active-users",controller:"ActiveUsersController",controllerAs:"activeUsersVm"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.activeUsers.ActiveUsersRouter",[]).config(a)}(),function(){"use strict";function a(a,b,c){function d(d,e,f,g,i,j,k){var l=b.defer(),m=h("1d",e,f,g,i);return a({url:c.ELASTIC_SEARCH_SQL+"?sql="+m,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){var b,c=864e5;!a.data.timed_out&&a.data.aggregations&&(d.data.splice(0),a.data.aggregations.timestamp.buckets.forEach(function(a){if(r(e)<=a.key){for(;b&&a.key-b>c;)d.data.push([b+c,0]),b+=c;var f=[a.key,0];a.user_id.buckets.forEach(function(a){a.doc_count>=j&&(f[1]+=1)}),d.data.push(f),b=a.key}})),k&&k(),l.resolve()},l.reject),l.promise}function e(d,e,f,g,i,j,k,l){var m=[];return d.data.splice(0),g.forEach(function(e){var f=b.defer(),g=new Date(e.getTime()),n={};g.setDate(g.getDate()-6);var o=h("1d",g,e,i,j),p=[e.getTime(),0];a({url:c.ELASTIC_SEARCH_SQL+"?sql="+o,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){!a.data.timed_out&&a.data.aggregations&&(a.data.aggregations.timestamp.buckets.forEach(function(a){a.user_id.buckets.forEach(function(a){n[a.key]||(n[a.key]=0),n[a.key]+=a.doc_count})}),Object.keys(n).forEach(function(a){n[a]>=k&&(p[1]+=1)})),l&&l(),f.resolve()},f.reject),d.data.push(p),m.push(f.promise)}),b.all(m)}function f(d,e,f,g,i,j,k,l){var m=[];return d.data.splice(0),g.forEach(function(e){var f=b.defer(),g=new Date(e.getTime()),n={};g.setDate(g.getDate()-29),14647068e5>g&&(g=new Date(2016,5,1));var o=h("1d",g,e,i,j),p=[e.getTime(),0];a({url:c.ELASTIC_SEARCH_SQL+"?sql="+o,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){!a.data.timed_out&&a.data.aggregations&&(a.data.aggregations.timestamp.buckets.forEach(function(a){a.user_id.buckets.forEach(function(a){n[a.key]||(n[a.key]=0),n[a.key]+=a.doc_count})}),Object.keys(n).forEach(function(a){n[a]>=k&&(p[1]+=1)})),l&&l(),f.resolve()},f.reject),d.data.push(p),m.push(f.promise)}),b.all(m)}function g(a){return(1e4*a.getFullYear()+100*(a.getMonth()+1)+a.getDate()).toString()}function h(a,b,c,d,e){var f="SELECT count(*)";return f+=i(b,c),f+=n(b,c,d,e),f+=j(a)}function i(a,b){var c=new Date(a.getTime()),d=l(b),e=k(l(a)),f=" FROM "+e;c.setDate(c.getDate()+1);for(var g,h=c.getDate(),i=l(c),j=l(a).toString().substring(6,7),m=e;d>i;)g=k(i),m!==g&&(f+=","+k(i),j=i.toString().substring(6,7)),c.setDate(h+1),h=c.getDate(),i=l(c),m=g;return g=k(i),m!==g&&(f+=","+k(d)),f}function j(a){return' GROUP BY date_histogram("alias"="timestamp", field="@timestamp","interval"="'+a+'"), user_id'}function k(a,b){var c=a.toString();return b?c.substring(0,4)+b+c.substring(4,6)+b+c.substring(6,8):"log-"+c.substring(0,4)+"."+c.substring(4,6)}function l(a){return 1e4*a.getFullYear()+100*(a.getMonth()+1)+a.getDate()}function m(a,b){var c=new Date(b.getTime());c.setDate(c.getDate()+1);var d=k(l(a),"-"),e=k(l(c),"-");return' @timestamp BETWEEN "'+d+'" AND "'+e+'"'}function n(a,b,c,d){var e=" WHERE";return e+=m(a,b),e+=p(c),e+=o(d)}function o(a){return"child"===a?' AND role="child"':"parent"===a?' AND role="parent"':""}function p(a){return"android"===a?' AND app_version="a"':"ios"===a?' AND app_version="i"':""}function q(a,b,c){return a.replace(/ /g,"_").toLowerCase()+"_"+g(b)+"-"+g(c)+".csv"}function r(a){return new Date(a).getTime()}return{getDailyActiveUsersData:d,getWeeklyActiveUsersData:e,getMonthlyActiveUsersData:f,getCsvFileName:q}}a.$inject=["$http","$q","APP_CONFIG"],angular.module("dataDashboard.activeUsers.service.ActiveUsers",[]).factory("ActiveUsers",a)}(),function(){"use strict";function a(a,d,e,f,g,h){function i(){k()}function j(a){return(w.currentPage-1)*w.pageSize+a}function k(){var b=0;w.lineChartDataLoop.forEach(function(c){a.getCancelData(c,w.selectedRange,w.selectedRoleFilter,w.selectedDeviceFilter,w.dateRange.startDate,w.dateRange.endDate).then(function(a){"success"===a.name&&(b+=1,6===b&&l(w.selectedRange))})})}function l(a){var b,c=new Date(w.basicToStopUserDataForLineChart.data[0][0]),d=!1;for(w.reversedData=[],"daily"===a?b=1:"weekly"===a?b=7:"monthly"===a?c=new Date(w.dateRange.startDate.getFullYear(),w.dateRange.startDate.getMonth()+1,0,23,59,59):(b=365,c=new Date(w.dateRange.startDate.getFullYear(),11,31));c<=w.dateRange.endDate;)w.reversedData.push([c.setHours(12,0,0,0),0,0,0,0,0,0]),"monthly"===a?c=new Date(c.getFullYear(),c.getMonth()+2,0,23,59,59):(c=new Date(c.getTime()),c.setDate(c.getDate()+b)),c>w.dateRange.endDate&&(d=!0);(d!==!0||w.reversedData[w.reversedData.length-1][0]===w.dateRange.endDate.setHours(12,0,0,0)&&0!==w.reversedData.length)&&"yearly"!==a||w.reversedData.push([w.dateRange.endDate.setHours(12,0,0,0),0,0,0,0,0,0]),m()}function m(){for(var a=0;a<w.reversedData.length;a++)for(var b=0;b<w.basicToStopUserDataForLineChart.data.length;b++)w.reversedData[a][0]===w.basicToStopUserDataForLineChart.data[b][0]&&(w.reversedData[a][1]=w.basicToStopUserDataForLineChart.data[b][1]);for(var a=0;a<w.reversedData.length;a++)for(var b=0;b<w.standardToStopUserDataForLineChart.data.length;b++)w.reversedData[a][0]===w.standardToStopUserDataForLineChart.data[b][0]&&(w.reversedData[a][2]=w.standardToStopUserDataForLineChart.data[b][1]);for(var a=0;a<w.reversedData.length;a++)for(var b=0;b<w.premiumToStopUserDataForLineChart.data.length;b++)w.reversedData[a][0]===w.premiumToStopUserDataForLineChart.data[b][0]&&(w.reversedData[a][3]=w.premiumToStopUserDataForLineChart.data[b][1]);for(var a=0;a<w.reversedData.length;a++)for(var b=0;b<w.basicToRefundUserDataForLineChart.data.length;b++)w.reversedData[a][0]===w.basicToRefundUserDataForLineChart.data[b][0]&&(w.reversedData[a][4]=w.basicToRefundUserDataForLineChart.data[b][1]);for(var a=0;a<w.reversedData.length;a++)for(var b=0;b<w.premiumToRefundUserDataForLineChart.data.length;b++)w.reversedData[a][0]===w.premiumToRefundUserDataForLineChart.data[b][0]&&(w.reversedData[a][5]=w.premiumToRefundUserDataForLineChart.data[b][1]);for(var a=0;a<w.reversedData.length;a++)for(var b=0;b<w.standardToRefundUserDataForLineChart.data.length;b++)w.reversedData[a][0]===w.standardToRefundUserDataForLineChart.data[b][0]&&(w.reversedData[a][6]=w.standardToRefundUserDataForLineChart.data[b][1]);w.reversedData.reverse(),w.totalItem=w.reversedData.length-1,n(1)}function n(a){w.currentPage=a,w.reversedDataContainer=[];for(var b=20*(w.currentPage-1),c=b;b+20>c&&0!==w.reversedData.length;c++){if(c===w.totalItem){w.reversedDataContainer.push([w.reversedData[c][0],w.reversedData[c][1],"-","-",w.reversedData[c][2],"-","-",w.reversedData[c][3],"-","-",w.reversedData[c][4],"-","-",w.reversedData[c][5],"-","-",w.reversedData[c][6],"-","-"]);break}w.reversedDataContainer.push([w.reversedData[c][0],w.reversedData[c][1],w.reversedData[c][1]-w.reversedData[c+1][1],(w.reversedData[c][1]-w.reversedData[c+1][1])/(w.reversedData[c+1][1]||1),w.reversedData[c][2],w.reversedData[c][2]-w.reversedData[c+1][2],(w.reversedData[c][2]-w.reversedData[c+1][2])/(w.reversedData[c+1][2]||1),w.reversedData[c][3],w.reversedData[c][3]-w.reversedData[c+1][3],(w.reversedData[c][3]-w.reversedData[c+1][3])/(w.reversedData[c+1][3]||1),w.reversedData[c][4],w.reversedData[c][4]-w.reversedData[c+1][4],(w.reversedData[c][4]-w.reversedData[c+1][4])/(w.reversedData[c+1][4]||1),w.reversedData[c][5],w.reversedData[c][5]-w.reversedData[c+1][5],(w.reversedData[c][5]-w.reversedData[c+1][5])/(w.reversedData[c+1][5]||1),w.reversedData[c][6],w.reversedData[c][6]-w.reversedData[c+1][6],(w.reversedData[c][6]-w.reversedData[c+1][6])/(w.reversedData[c+1][6]||1)])}}function o(a){w.selectedRange=a,k()}function p(){a.getNewPaidProportionData(w.pieChartData,w.selectedPieChartFilter,w.dateRangePieChart.startDate,w.dateRangePieChart.endDate,w.currentPieChartUsers,w.availableTypes[0])}function q(a){w.selectedPieChartFilter=a,p()}function r(){var a=0;return w.pieChartSumData.forEach(function(b){a+=b.y}),a}function s(a){return a/r()}function t(a,b){var c,d=[];"LineChart"===b?(c=["date","basic to unsubscribe","standard to unsubscribe","premium to unsubscribe","basic to refund","standard to refund","premium to refund"],a.forEach(function(a,b){var c=[];c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],d.push(c)}),h.downloadCSV2(d,!1,"cancel_userdata_"+w.selectedRange+".csv",c)):(c=[w.selectedPieChartFilter,"count","proportion"],a.forEach(function(a){var b=[];b[0]=a.name,b[1]=a.y,b[2]=(100*s(a.y)).toFixed(1).toString()+"%",d.push(b)}),h.downloadCSV2(d,!1,"cumulative_userdata_"+w.selectedPieChartFilter+"_count_proportion.csv",c))}function u(a){return a=v(a),6===a?{color:"blue"}:0===a?{color:"red"}:{color:"black"}}function v(a){var b=new Date(a);return b.getDay()}var w=this;w.currentPage=1,w.pageSize=20,w.totalItem=0,w.dateRange={startDate:c,endDate:b},w.dateRangePieChart={startDate:c,endDate:b},w.availableRanges=["daily","weekly","monthly","yearly"],w.availableRoles=["student","teacher","parent"],w.availableDevices=["android","ios"],w.availablePieChartFilters=["type"],w.selectedLineChartFilter="all",w.selectedPieChartFilter="type",w.selectedRange="daily",w.selectedRoleFilter="all",w.selectedDeviceFilter="all",w.selectedPaidFilter="all",w.basicToStopUserDataForLineChart={name:"Basic to Unsubscribe",data:[[(new Date).getTime(),0]],id:"basic-unsubscribe",color:f.COLORS[0]},w.standardToStopUserDataForLineChart={name:"Standard to Unsubscribe",data:[[(new Date).getTime(),0]],id:"standard-unsubscribe",color:f.COLORS[1]},w.premiumToStopUserDataForLineChart={name:"Premium to Unsubscribe",data:[[(new Date).getTime(),0]],id:"premium-unsubscribe",color:f.COLORS[2]},w.basicToRefundUserDataForLineChart={name:"Basic to Refund",data:[[(new Date).getTime(),0]],id:"basic-refund",color:f.COLORS[30]},w.premiumToRefundUserDataForLineChart={name:"Standard to Refund",data:[[(new Date).getTime(),0]],id:"standard-refund",color:f.COLORS[1]},w.standardToRefundUserDataForLineChart={name:"Premium to Refund",data:[[(new Date).getTime(),0]],id:"premium-refund",color:f.COLORS[2]},w.lineChartDataLoop=[w.basicToStopUserDataForLineChart,w.standardToStopUserDataForLineChart,w.premiumToStopUserDataForLineChart,w.basicToRefundUserDataForLineChart,w.standardToRefundUserDataForLineChart,w.premiumToRefundUserDataForLineChart],w.reversedData=[],w.reversedDataContainer=[],w.lineChartCancelData=[w.basicToStopUserDataForLineChart,w.standardToStopUserDataForLineChart,w.premiumToStopUserDataForLineChart],w.lineChartDowngradeData=[w.basicToRefundUserDataForLineChart,w.standardToRefundUserDataForLineChart,w.premiumToRefundUserDataForLineChart],w.lineChartCancelDataConfig=new d.LineChartConfig(w.lineChartCancelData,null,!0),w.lineChartDowngradeDataConfig=new d.LineChartConfig(w.lineChartDowngradeData,null,!0),w.lineChartFilter=k,w.getPieChart=p,w.selectDropdownRange=o,w.getDateColor=u,w.getTableIndex=j,w.pageChanged=n,w.pieChartData=[{name:"User Signups",y:1}],w.pieChartConfig=new e.PieChartConfig(w.pieChartData),w.pieChartFilter=q,w.getPieChartProportion=s,w.fetchAndDownloadCSV=t,i()}var b=new Date,c=new Date(new Date(b).setMonth(b.getMonth()-1));a.$inject=["CancelUserData","LinechartUtils","PiechartUtils","APP_CONFIG","$filter","CSVparserUtils"],angular.module("dataDashboard.cancelUserData.controller.CancelUserDataController",[]).controller("CancelUserDataController",a)}(),function(){"use strict";angular.module("dataDashboard.cancelUserData",["dataDashboard.cancelUserData.controller.CancelUserDataController","dataDashboard.cancelUserData.service.CancelUserData","dataDashboard.cancelUserData.CancelUserDataRouter"])}(),function(){"use strict";function a(a){a.state("dashboard.cancelUserData",{templateUrl:"app/cancel-userdata/cancel-userdata.html",url:"/cancel-userdata",controller:"CancelUserDataController",controllerAs:"cancelUserDataVm"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.cancelUserData.CancelUserDataRouter",[]).config(a)}(),function(){"use strict";function a(a,e,f,g){function h(b,c,d,f,h,i){var j=e.defer(),m=l(b.id,d,f,c,h,i);return a({url:g.ELASTIC_SEARCH_SQL+"?sql="+m,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){b.data.splice(0),a.data.aggregations.timestamp.buckets.forEach(function(a){var d;d=k(a.key,c),b.data.push([d,a.doc_count])}),j.resolve({name:"success"})},j.reject),j.promise}function i(b,c,d,h,i,k,l,m){var n=e.defer(),p="SELECT count(*) FROM accum-stats-201*"+o(l)+" AND"+r(h,i)+"GROUP BY "+c;return a({url:g.NEW_ELASTIC_SEARCH_SQL+"?sql="+p,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){b.splice(0),k.value=0,a.data.aggregations[c].buckets.forEach(function(a,e){j(h)<=1446336e6?(b.push({name:"country"===c?f("country")(a.key):a.key,y:(d[a.key]||0)+a.doc_count,color:g.COLORS[e%11]}),k.value+=(d[a.key]||0)+a.doc_count):(b.push({name:"country"===c?f("country")(a.key):a.key,y:a.doc_count,color:g.COLORS[e%11]}),k.value+=a.doc_count)}),m&&m.hideLoading(),n.resolve({name:"success"})},n.reject),n.promise}function j(a){return new Date(a).getTime()}function k(a,e){var f;return f="daily"===e?a:"weekly"===e?a+6*b:"monthly"===e?new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1,0,0,0,0):a*(364*b),new Date(f).getTime()>new Date(d).getTime()&&(f=d.setHours(0,0,0,0)),new Date(f).getTime()+c}function l(a,b,c,d,e,f){var g="SELECT count(*) FROM log-*";return g+=m(a,b,c,e,f),g+=s(d),g+=t(),encodeURIComponent(g)}function m(a,b,c,d,e){var f="";return f+=n(a),f+=p(b),f+=q(c),f+=r(d,e)}function n(a){var b;return"basic-unsubscribe"===a?b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND now_payment_plan="basic" AND event="stop"':"standard-unsubscribe"===a?b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND now_payment_plan="standard" AND event="stop"':"premium-unsubscribe"===a?b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND now_payment_plan="premium" AND event="stop"':"basic-refund"===a?b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND now_payment_plan="basic" AND event="refund"':"standard-refund"===a?b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND now_payment_plan="standard" AND event="refund"':"premium-refund"===a&&(b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND now_payment_plan="premium" AND event="refund"'),b}function o(a){var b="";return b="User Signups"===a?' WHERE _type="user"':' WHERE _type="user-del"'}function p(a){var b;return b="teacher"===a?' AND role="teacher"':"student"===a?' AND role="student"':"parent"===a?' AND role="parent"':""}function q(a){var b;return b="android"===a?' AND app_version="a"':"ios"===a?' AND app_version="i"':""}function r(a,c){var d=j(a),e=j(c)+b;return' AND @timestamp BETWEEN "'+d+'" AND "'+e+'"'}function s(a){var b;return b="daily"===a?' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1d", "format"="yyyy-MM-dd", "time_zone"="+09:00")':"weekly"===a?' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1w", "format"="yyyy-MM-dd", "time_zone"="+09:00")':"monthly"===a?' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1M", "format"="yyyy-MM-dd", "time_zone"="+09:00")':' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1y", "format"="yyyy-MM-dd", "time_zone"="+09:00")'}function t(){return" ORDER BY @timestamp ASC"}return{getCancelData:h,getCancelProportionData:i}}var b=864e5,c=432e5,d=new Date;a.$inject=["$http","$q","$filter","APP_CONFIG"],angular.module("dataDashboard.cancelUserData.service.CancelUserData",[]).factory("CancelUserData",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){h()}function h(){m.selectedMinRateCnt>=0&&m.selectedMinRateCnt<=1e3&&m.selectedMaxRateCnt>=0&&m.selectedMaxRateCnt<=1e3&&m.selectedMinAvgRate>=0&&m.selectedMinAvgRate<=5&&m.selectedMaxAvgRate>=0&&m.selectedMaxAvgRate<=5&&a.getCardRate(m.cardRates,m.selectedMinAvgRate,m.selectedMaxAvgRate,m.selectedMinRateCnt,m.selectedMaxRateCnt,m.selectedTypeFilter,m.selectedPublisherId,m.selectedSeriesId).then(function(a){"success"===a.name&&l(1)})}function i(a){b.open(a)}function j(a){var b,c=[];b=[m.selectedPieChartFilter,"count","proportion"],a.forEach(function(a){var b=[];b[0]=a.name,b[1]=a.y,b[2]=(100*getPieChartProportion(a.y)).toFixed(1).toString()+"%",c.push(b)}),e.downloadCSV2(c,!1,"school_stats_"+m.selectedPieChartFilter+"_count_proportion.csv",b,!0)}function k(a){m.selectedSortType=a,"DESC"===m.selectedOrderBy?m.selectedOrderBy="ASC":m.selectedOrderBy="DESC",l(m.currentPage)}function l(a){var b=m.cardRates,c=0;c="ASC"===m.selectedOrderBy?-1:1,"avg_rate"===m.selectedSortType?b.sort(function(a,b){return 1===c?b.avg_rate-a.avg_rate:a.avg_rate-b.avg_rate}):"rate_cnt"===m.selectedSortType?b.sort(function(a,b){return 1===c?b.rate_cnt-a.rate_cnt:a.rate_cnt-b.rate_cnt}):"series_id"===m.selectedSortType?b.sort(function(a,b){return 1===c?b.series_id-a.series_id:a.series_id-b.series_id}):"publisher_id"===m.selectedSortType?b.sort(function(a,b){return 1===c?b.publisher_id-a.publisher_id:a.publisher_id-b.publisher_id}):"card_id"===m.selectedSortType?b.sort(function(a,b){return 1===c?b.id-a.id:a.id-b.id}):"grade_id"===m.selectedSortType?b.sort(function(a,b){return 1===c?b.grade_id-a.grade_id:a.grade_id-b.grade_id}):"title"===m.selectedSortType?b.sort(function(a,b){return 1===c?b.title-a.title:a.title-b.title}):"recc_end"===m.selectedSortType&&b.sort(function(a,b){return 1===c?b.recc_end-a.recc_end:a.recc_end-b.recc_end}),m.currentPage=a,m.totalItem=m.cardRates.length-1,m.dataContainer=[];for(var d=(m.currentPage-1)*m.pageSize,e=d;e<d+m.pageSize&&e!==m.totalItem;e++)null===b[e].recc_end?b[e].recc_end=0:b[e].recc_end=new Date(b[e].recc_end),m.dataContainer.push([b[e].id,b[e].title,b[e].avg_rate,b[e].rate_cnt,b[e].series_id,b[e].publisher_id,b[e].grade_id,b[e].curr_type,b[e].recc_end])}var m=this;m.currentPage=1,m.pageSize=20,m.totalItem=0,m.selectedTypeFilter="all",m.selectedMinRateCnt=0,m.selectedMaxRateCnt=1e3,m.selectedMinAvgRate=0,m.selectedMaxAvgRate=5,m.selectedOrderBy="DESC",m.selectedSortType="avg_rate",m.selectedPublisherId=0,m.selectedSeriesId=0,m.availableTypes=["official","extra"],m.cardRates=[],m.dataContainer=[],m.getCardRate=h,m.pageChanged=l,m.fetchAndDownloadCSV=j,m.sortType=k,m.rateModal=i,m.pieChartConfig=new c.PieChartConfig(m.pieChartData),g()}a.$inject=["CardRate","RateModal","PiechartUtils","APP_CONFIG","CSVparserUtils","$filter"],angular.module("dataDashboard.cardRate.controller.CardRateController",[]).controller("CardRateController",a)}(),function(){"use strict";angular.module("dataDashboard.cardRate",["dataDashboard.cardRate.controller.CardRateController","dataDashboard.cardRate.controller.RateModalController","dataDashboard.cardRate.service.CardRate","dataDashboard.cardRate.service.RateModal","dataDashboard.cardRate.factory.RateModalFactory","dataDashboard.cardRate.CardRateRouter"])}(),function(){"use strict";function a(a){a.state("dashboard.cardRate",{templateUrl:"app/card-rate/card-rate.html",url:"/card-rate",controller:"CardRateController",controllerAs:"cardRateVm"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.cardRate.CardRateRouter",[]).config(a)}(),function(){"use strict";function a(a,b,c,d,e){function f(c,d,f,h,i,j,k,l){var m=b.defer(),n=g(d,f,h,i,j,k,l);return a({url:e.ELASTIC_SEARCH_SQL+"?sql="+n,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){c.splice(0),a.data.hits.hits.forEach(function(a){c.push({id:a._source.id,title:a._source.title,avg_rate:a._source.avg_rate,rate_cnt:a._source.rate_cnt,subject_id:a._source.subject_id,grade_id:a._source.grade_id,curr_type:a._source.curr_type,publisher_id:a._source.publisher_id,series_id:a._source.series_id,recc_end:a._source.recc_end})}),m.resolve({name:"success"})},m.reject),m.promise}function g(a,b,c,d,e,f,g){var i="SELECT * FROM lcrate";return i+=h(a,b,c,d,e,f,g),i+=n()}function h(a,b,c,d,e,f,g){var h="";return h+=i(a,b),h+=j(c,d),h+=k(e),h+=l(f),h+=m(g)}function i(a,b){return" WHERE (avg_rate>="+a+" and avg_rate<="+b+")"}function j(a,b){return" AND (rate_cnt>="+a+" and rate_cnt<="+b+")"}function k(a){return"official"===a?' AND curr_type="official"':"extra"===a?' AND curr_type="extra"':""}function l(a){return 0===a?"":" AND publisher_id="+a}function m(a){return 0===a?"":" AND series_id="+a}function n(){return" ORDER BY avg_rate DESC LIMIT 10000"}return{getCardRate:f}}a.$inject=["$http","$q","$rootScope","$filter","APP_CONFIG"],angular.module("dataDashboard.cardRate.service.CardRate",[]).factory("CardRate",a)}(),function(){"use strict";function a(a,b){function c(){h.baseData=a,d()}function d(){b.getRateData(h.dataContainer,h.baseData).then(function(a){h.totalItem=h.dataContainer.length,h.dataContainer.reverse(),e(1)})}function e(a){h.currentPage=a,h.pageDataContainter=[];for(var b=(h.currentPage-1)*h.pageSize,c=b;c<b+h.pageSize&&0!==h.dataContainer.length&&c!==h.totalItem;c++)h.pageDataContainter.push([h.dataContainer[c][0],h.dataContainer[c][1],h.dataContainer[c][2]]);
}function f(a){return a=g(a),6===a?{color:"blue"}:0===a?{color:"red"}:{color:"black"}}function g(a){var b=new Date(a);return b.getDay()}var h=this;h.currentPage=1,h.pageSize=20,h.totalItem=0,h.dataContainer=[],h.pageDataContainter=[],h.pageChanged=e,h.getDateColor=f,c()}a.$inject=["baseData","RateModalFactory"],angular.module("dataDashboard.cardRate.controller.RateModalController",[]).controller("RateModalController",a)}(),function(){"use strict";function a(a,b,c){function d(d,f){var g=b.defer(),h=e(f);return a({url:c.ELASTIC_SEARCH_SQL+"?sql="+h,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){!a.data.timed_out&&a.data.hits&&(d.splice(0),a.data.aggregations.timestamp.buckets.forEach(function(a){var b=0,c=0;a.rate.buckets.forEach(function(a){b+=a.key*a.doc_count,c+=a.doc_count}),d.push([a.key,b,c])})),g.resolve()},g.reject),g.promise}function e(a){var b='SELECT * from log-* where _type ="result" AND rate <> "-1" and card_id='+a+' GROUP BY date_histogram("alias"="timestamp", field="@timestamp","interval"="1d"), rate';return b}return{getRateData:d}}a.$inject=["$http","$q","APP_CONFIG"],angular.module("dataDashboard.cardRate.factory.RateModalFactory",[]).factory("RateModalFactory",a)}(),function(){"use strict";function a(a){this.open=function(b){return a.open({templateUrl:"app/card-rate/rate-modal/rate-modal.html",controller:"RateModalController",controllerAs:"rateModalVm",size:"lg",resolve:{baseData:function(){return b}}})}}a.$inject=["$uibModal"],angular.module("dataDashboard.cardRate.service.RateModal",[]).service("RateModal",a)}(),function(){"use strict";function a(a,d){function e(a){var b=new Date(a.getTime());return b.setDate(b.getDate()-1),b}function f(a){for(var b=new Date,c=[b],d=0;a>d;d++)c.unshift(e(c[0]));return c.map(function(a){return a.toDateString()})}function g(a){for(var b=[],c=1;a>=c;c++)b.push("Day "+c);return b}var h=this;h.dateRange={startDate:c,endDate:b},h.heatmapChartConfig={options:{chart:{type:"heatmap"},colorAxis:{min:0,minColor:"#90CAF9",maxColor:"#0D47A1"},tooltip:{formatter:function(){return"Users those who signed up<br>on <b>"+this.series.yAxis.categories[this.point.y]+"</b> are<br>remained by <b>"+this.point.value+"%</b> after <b>"+this.series.xAxis.categories[this.point.x]+"</b>"}}},title:{text:null},xAxis:{categories:g(7)},yAxis:{categories:f(7),title:null},series:[{name:"Sales per employee",borderWidth:1,dataLabels:{enabled:!0,format:"{point.value}%",style:{textShadow:"none"}},data:[[0,0,2.91],[0,1,2.89],[0,2,2.83],[0,3,1.86],[0,4,3.14],[0,5,4.21],[0,6,3.21],[1,0,1.32],[1,1,.81],[1,2,1.06],[1,3,2.62],[1,4,1.15],[1,5,2.15],[2,0,.79],[2,1,.2],[2,2,2.12],[2,3,2.09],[2,4,1.09],[3,0,.53],[3,1,1.41],[3,2,1.06],[3,3,1.46],[4,0,1.32],[4,1,.2],[4,2,.5],[5,0,1.33],[5,1,.93],[6,0,.53]]}]},h.availableRanges=["daily","weekly","monthly","yearly"],h.availableStandard=["conversion rate","churn rate"],h.selectedRange="daily",h.selectedStandard="conversion rate"}var b=new Date,c=new Date(new Date(b).setMonth(b.getMonth()-1));a.$inject=["CohortAnalysis","DUMMY4"],angular.module("dataDashboard.cohortAnalysis.controller.CohortAnalysisController",[]).controller("CohortAnalysisController",a)}(),function(){"use strict";var a=function(){var a=new Date,b=new Date(a.getTime());b.setDate(b.getDate()-30);var c=[{timestamp:b.getTime(),data:7202},{timestamp:b.getTime()+864e5,data:6583},{timestamp:b.getTime()+1728e5,data:7102},{timestamp:b.getTime()+2592e5,data:7749},{timestamp:b.getTime()+3456e5,data:5932},{timestamp:b.getTime()+432e6,data:6129},{timestamp:b.getTime()+5184e5,data:7281},{timestamp:b.getTime()+6048e5,data:7491},{timestamp:b.getTime()+6912e5,data:6919},{timestamp:b.getTime()+7776e5,data:6704},{timestamp:b.getTime()+864e6,data:7277},{timestamp:b.getTime()+9504e5,data:7003},{timestamp:b.getTime()+10368e5,data:5824},{timestamp:b.getTime()+11232e5,data:6492},{timestamp:b.getTime()+12096e5,data:6110},{timestamp:b.getTime()+1296e6,data:6129},{timestamp:b.getTime()+13824e5,data:6185},{timestamp:b.getTime()+14688e5,data:6803},{timestamp:b.getTime()+15552e5,data:5624},{timestamp:b.getTime()+16416e5,data:6487},{timestamp:b.getTime()+1728e6,data:6991},{timestamp:b.getTime()+18144e5,data:7313},{timestamp:b.getTime()+19008e5,data:7508},{timestamp:b.getTime()+19872e5,data:6638},{timestamp:b.getTime()+20736e5,data:6041},{timestamp:b.getTime()+216e7,data:6772},{timestamp:b.getTime()+22464e5,data:6427},{timestamp:b.getTime()+23328e5,data:6775},{timestamp:b.getTime()+24192e5,data:6032},{timestamp:b.getTime()+25056e5,data:6373},{timestamp:a.getTime(),data:6051}],d=[{timestamp:b.getTime(),data:50414},{timestamp:b.getTime()+864e5,data:46081},{timestamp:b.getTime()+1728e5,data:49714},{timestamp:b.getTime()+2592e5,data:54243},{timestamp:b.getTime()+3456e5,data:41524},{timestamp:b.getTime()+432e6,data:42903},{timestamp:b.getTime()+5184e5,data:50967},{timestamp:b.getTime()+6048e5,data:52437},{timestamp:b.getTime()+6912e5,data:48433},{timestamp:b.getTime()+7776e5,data:46928},{timestamp:b.getTime()+864e6,data:50939},{timestamp:b.getTime()+9504e5,data:49021},{timestamp:b.getTime()+10368e5,data:40768},{timestamp:b.getTime()+11232e5,data:45444},{timestamp:b.getTime()+12096e5,data:42770},{timestamp:b.getTime()+1296e6,data:42903},{timestamp:b.getTime()+13824e5,data:43295},{timestamp:b.getTime()+14688e5,data:47621},{timestamp:b.getTime()+15552e5,data:39368},{timestamp:b.getTime()+16416e5,data:45409},{timestamp:b.getTime()+1728e6,data:48937},{timestamp:b.getTime()+18144e5,data:51191},{timestamp:b.getTime()+19008e5,data:52556},{timestamp:b.getTime()+19872e5,data:46466},{timestamp:b.getTime()+20736e5,data:42287},{timestamp:b.getTime()+216e7,data:47404},{timestamp:b.getTime()+22464e5,data:44989},{timestamp:b.getTime()+23328e5,data:47425},{timestamp:b.getTime()+24192e5,data:42224},{timestamp:b.getTime()+25056e5,data:44611},{timestamp:a.getTime(),data:42357}],e=[{timestamp:b.getTime(),data:100828},{timestamp:b.getTime()+864e5,data:92162},{timestamp:b.getTime()+1728e5,data:99428},{timestamp:b.getTime()+2592e5,data:108486},{timestamp:b.getTime()+3456e5,data:83048},{timestamp:b.getTime()+432e6,data:85806},{timestamp:b.getTime()+5184e5,data:101934},{timestamp:b.getTime()+6048e5,data:104874},{timestamp:b.getTime()+6912e5,data:96866},{timestamp:b.getTime()+7776e5,data:93856},{timestamp:b.getTime()+864e6,data:101878},{timestamp:b.getTime()+9504e5,data:98042},{timestamp:b.getTime()+10368e5,data:81536},{timestamp:b.getTime()+11232e5,data:90888},{timestamp:b.getTime()+12096e5,data:85540},{timestamp:b.getTime()+1296e6,data:85806},{timestamp:b.getTime()+13824e5,data:86590},{timestamp:b.getTime()+14688e5,data:95242},{timestamp:b.getTime()+15552e5,data:78736},{timestamp:b.getTime()+16416e5,data:90818},{timestamp:b.getTime()+1728e6,data:97874},{timestamp:b.getTime()+18144e5,data:102382},{timestamp:b.getTime()+19008e5,data:105112},{timestamp:b.getTime()+19872e5,data:92932},{timestamp:b.getTime()+20736e5,data:84574},{timestamp:b.getTime()+216e7,data:94808},{timestamp:b.getTime()+22464e5,data:89978},{timestamp:b.getTime()+23328e5,data:94850},{timestamp:b.getTime()+24192e5,data:84448},{timestamp:b.getTime()+25056e5,data:89222},{timestamp:a.getTime(),data:84714}],f=[{timestamp:b.getTime(),data:201656},{timestamp:b.getTime()+864e5,data:184324},{timestamp:b.getTime()+1728e5,data:198856},{timestamp:b.getTime()+2592e5,data:216972},{timestamp:b.getTime()+3456e5,data:166096},{timestamp:b.getTime()+432e6,data:171612},{timestamp:b.getTime()+5184e5,data:203868},{timestamp:b.getTime()+6048e5,data:209748},{timestamp:b.getTime()+6912e5,data:193732},{timestamp:b.getTime()+7776e5,data:187712},{timestamp:b.getTime()+864e6,data:203756},{timestamp:b.getTime()+9504e5,data:196084},{timestamp:b.getTime()+10368e5,data:163072},{timestamp:b.getTime()+11232e5,data:181776},{timestamp:b.getTime()+12096e5,data:171080},{timestamp:b.getTime()+1296e6,data:171612},{timestamp:b.getTime()+13824e5,data:173180},{timestamp:b.getTime()+14688e5,data:190484},{timestamp:b.getTime()+15552e5,data:157472},{timestamp:b.getTime()+16416e5,data:181636},{timestamp:b.getTime()+1728e6,data:195748},{timestamp:b.getTime()+18144e5,data:204764},{timestamp:b.getTime()+19008e5,data:210224},{timestamp:b.getTime()+19872e5,data:185864},{timestamp:b.getTime()+20736e5,data:169148},{timestamp:b.getTime()+216e7,data:189616},{timestamp:b.getTime()+22464e5,data:179956},{timestamp:b.getTime()+23328e5,data:189700},{timestamp:b.getTime()+24192e5,data:168896},{timestamp:b.getTime()+25056e5,data:178444},{timestamp:a.getTime(),data:169428}];this.activeUsersFor1day=c,this.activeUsersFor7days=d,this.activeUsersFor14days=e,this.activeUsersFor30days=f};angular.module("dataDashboard.cohortAnalysis.constant.DUMMY4",[]).constant("DUMMY4",new a)}(),function(){"use strict";angular.module("dataDashboard.cohortAnalysis",["dataDashboard.cohortAnalysis.controller.CohortAnalysisController","dataDashboard.cohortAnalysis.service.CohortAnalysis","dataDashboard.cohortAnalysis.CohortAnalysisRouter","dataDashboard.cohortAnalysis.constant.DUMMY4"])}(),function(){"use strict";function a(a){a.state("dashboard.cohortAnalysis",{templateUrl:"app/cohort-analysis/cohort-analysis.html",url:"/cohort-analysis",controller:"CohortAnalysisController",controllerAs:"cohortAnalysisVm"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.cohortAnalysis.CohortAnalysisRouter",[]).config(a)}(),function(){"use strict";function a(){return{}}angular.module("dataDashboard.cohortAnalysis.service.CohortAnalysis",[]).factory("CohortAnalysis",a)}(),function(){"use strict";angular.module("dataDashboard.common",["dataDashboard.common.config.MainConfig","dataDashboard.common.config.HTTPInterceptorsConfig","dataDashboard.common.directive.headerDirective","dataDashboard.common.directive.headerNotificationDirective","dataDashboard.common.directive.sidebarDirective","dataDashboard.common.directive.sidebarSearchDirective","dataDashboard.common.directive.dirPagination","dataDashboard.common.constant.APP_CONFIG","dataDashboard.common.CommonRouter","dataDashboard.common.interceptor.AuthInterceptor","dataDashboard.common.run.FetchUserFromLocalStorageRun","dataDashboard.common.run.RouterPermissionRun","dataDashboard.common.filter.percentage","dataDashboard.common.filter.titleCase","dataDashboard.common.filter.country","dataDashboard.common.filter.language","dataDashboard.common.filter.device","dataDashboard.common.filter.month","dataDashboard.common.filter.publisher","dataDashboard.common.filter.series","dataDashboard.common.filter.grade","dataDashboard.common.filter.price","dataDashboard.common.filter.subject","dataDashboard.common.filter.pageName","dataDashboard.common.utils.LinechartUtils","dataDashboard.common.utils.BarchartUtils","dataDashboard.common.utils.PiechartUtils","dataDashboard.common.utils.CSVparserUtils","dataDashboard.common.utils.CommonUtils"])}(),function(){"use strict";function a(a){a.state("dashboard.blank",{templateUrl:"app/main/blank.html",url:"/blank"}).state("dashboard.table",{templateUrl:"app/table/table.html",url:"/table"}).state("dashboard.panels-wells",{templateUrl:"app/common/ui-elements/panels-wells.html",url:"/panels-wells"}).state("dashboard.buttons",{templateUrl:"app/common/ui-elements/buttons.html",url:"/buttons"}).state("dashboard.notifications",{templateUrl:"app/common/ui-elements/notifications.html",url:"/notifications"}).state("dashboard.typography",{templateUrl:"app/common/ui-elements/typography.html",url:"/typography"}).state("dashboard.icons",{templateUrl:"app/common/ui-elements/icons.html",url:"/icons"}).state("dashboard.grid",{templateUrl:"app/common/ui-elements/grid.html",url:"/grid"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.common.CommonRouter",[]).config(a)}(),function(){"use strict";function a(a){a.interceptors.push("AuthInterceptor")}a.$inject=["$httpProvider"],angular.module("dataDashboard.common.config.HTTPInterceptorsConfig",[]).config(a)}(),function(){"use strict";function a(a){a.otherwise("/dashboard/home")}a.$inject=["$urlRouterProvider"],angular.module("dataDashboard.common.config.MainConfig",[]).config(a)}(),function(){"use strict";angular.module("dataDashboard.common.constant.APP_CONFIG",[]).constant("APP_CONFIG",{LOCAL:"http://localhost:8080/api/v2",HOSTED:"http://dsp.classting.net/rest",BACKEND_ADDRESS:"http://52.193.242.222/api/v2",DSP_API_NAME:"lc-dashboard",DSP_API_KEY:"0124db4baff2a6855e0404a48d6cc1546f523ea71395d04030122035b0f80262",S3_DATA_BUCKET:"https://s3-ap-northeast-1.amazonaws.com/classting-dashboard",ELASTIC_SEARCH_SQL:"/_sql",COLORS:["#F44336","#2196F3","#FFC107","#9C27B0","#009688","#FF5722","#00BCD4","#CDDC39","#673AB7","#4CAF50","#E91E63","#3F51B5","#FF9800","#795548","#8BC34A","#000000"]})}(),function(){function a(a,b,c){function d(d,k){var l=k.dirPaginate,m=l.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),n=/\|\s*itemsPerPage\s*:\s*(.*\(\s*\w*\)|([^\)]*?(?=\s+as\s+))|[^\)]*)/;if(null===m[2].match(n))throw"pagination directive: the 'itemsPerPage' filter must be set.";var o=m[2].replace(n,""),p=b(o);g(d);var q=k.paginationId||j;return c.registerInstance(q),function(d,g,k){var m=b(k.paginationId)(d)||k.paginationId||j;c.deregisterInstance(q),c.registerInstance(m);var n=e(l,m);f(g,k,n),h(g);var o=a(g),r=i(d,k,m);c.setCurrentPageParser(m,r,d),"undefined"!=typeof k.totalItems?(c.setAsyncModeTrue(m),d.$watch(function(){return b(k.totalItems)(d)},function(a){a>=0&&c.setCollectionLength(m,a)})):(c.setAsyncModeFalse(m),d.$watchCollection(function(){return p(d)},function(a){if(a){var b=a instanceof Array?a.length:Object.keys(a).length;c.setCollectionLength(m,b)}})),o(d),d.$on("$destroy",function(){c.deregisterInstance(m)})}}function e(a,b){var c,d=!!a.match(/(\|\s*itemsPerPage\s*:[^|]*:[^|]*)/);return c=b===j||d?a:a.replace(/(\|\s*itemsPerPage\s*:\s*[^|\s]*)/,"$1 : '"+b+"'")}function f(a,b,c){a[0].hasAttribute("dir-paginate-start")||a[0].hasAttribute("data-dir-paginate-start")?(b.$set("ngRepeatStart",c),a.eq(a.length-1).attr("ng-repeat-end",!0)):b.$set("ngRepeat",c)}function g(a){angular.forEach(a,function(a){1===a.nodeType&&angular.element(a).attr("dir-paginate-no-compile",!0)})}function h(a){angular.forEach(a,function(a){1===a.nodeType&&angular.element(a).removeAttr("dir-paginate-no-compile")}),a.eq(0).removeAttr("dir-paginate-start").removeAttr("dir-paginate").removeAttr("data-dir-paginate-start").removeAttr("data-dir-paginate"),a.eq(a.length-1).removeAttr("dir-paginate-end").removeAttr("data-dir-paginate-end")}function i(a,c,d){var e;if(c.currentPage)e=b(c.currentPage);else{var f=(d+"__currentPage").replace(/\W/g,"_");a[f]=1,e=b(f)}return e}return{terminal:!0,multiElement:!0,priority:100,compile:d}}function b(){return{priority:5e3,terminal:!0}}function c(a){a.put("angularUtils.directives.dirPagination.template",'<ul class="pagination" ng-if="1 < pages.length || !autoHide"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by tracker(pageNumber, $index)" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == \'...\' || ( ! autoHide && pages.length === 1 ) }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul>')}function d(a,b){function c(b,c,e){function g(c){if(a.isRegistered(m)&&k(c)){var e=b.pagination.current;b.pages=d(c,a.getCollectionLength(m),a.getItemsPerPage(m),o),b.pagination.current=c,i(),b.onPageChange&&b.onPageChange({newPageNumber:c,oldPageNumber:e})}}function h(){if(a.isRegistered(m)){var c=parseInt(a.getCurrentPage(m),10)||1;b.pages=d(c,a.getCollectionLength(m),a.getItemsPerPage(m),o),b.pagination.current=c,b.pagination.last=b.pages[b.pages.length-1],b.pagination.last<b.pagination.current?b.setCurrent(b.pagination.last):i()}}function i(){if(a.isRegistered(m)){var c=a.getCurrentPage(m),d=a.getItemsPerPage(m),e=a.getCollectionLength(m);b.range.lower=(c-1)*d+1,b.range.upper=Math.min(c*d,e),b.range.total=e}}function k(a){return f.test(a)&&a>0&&a<=b.pagination.last}var l=e.paginationId||j,m=b.paginationId||e.paginationId||j;if(!a.isRegistered(m)&&!a.isRegistered(l)){var n=m!==j?" (id: "+m+") ":" ";window.console&&console.warn("Pagination directive: the pagination controls"+n+"cannot be used without the corresponding pagination directive, which was not found at link time.")}b.maxSize||(b.maxSize=9),b.autoHide=void 0===b.autoHide?!0:b.autoHide,b.directionLinks=angular.isDefined(e.directionLinks)?b.$parent.$eval(e.directionLinks):!0,b.boundaryLinks=angular.isDefined(e.boundaryLinks)?b.$parent.$eval(e.boundaryLinks):!1;var o=Math.max(b.maxSize,5);b.pages=[],b.pagination={last:1,current:1},b.range={lower:1,upper:1,total:1},b.$watch("maxSize",function(a){a&&(o=Math.max(b.maxSize,5),h())}),b.$watch(function(){return a.isRegistered(m)?(a.getCollectionLength(m)+1)*a.getItemsPerPage(m):void 0},function(a){a>0&&h()}),b.$watch(function(){return a.isRegistered(m)?a.getItemsPerPage(m):void 0},function(a,c){a!==c&&"undefined"!=typeof c&&g(b.pagination.current)}),b.$watch(function(){return a.isRegistered(m)?a.getCurrentPage(m):void 0},function(a,b){a!==b&&g(a)}),b.setCurrent=function(b){a.isRegistered(m)&&k(b)&&(b=parseInt(b,10),a.setCurrentPage(m,b))},b.tracker=function(a,b){return a+"_"+b}}function d(a,b,c,d){var f,g=[],h=Math.ceil(b/c),i=Math.ceil(d/2);f=i>=a?"start":a>h-i?"end":"middle";for(var j=h>d,k=1;h>=k&&d>=k;){var l=e(k,a,d,h),m=2===k&&("middle"===f||"end"===f),n=k===d-1&&("middle"===f||"start"===f);j&&(m||n)?g.push("..."):g.push(l),k++}return g}function e(a,b,c,d){var e=Math.ceil(c/2);return a===c?d:1===a?a:d>c?b>d-e?d-c+a:b>e?b-e+a:a:a}var f=/^\d+$/,g={restrict:"AE",scope:{maxSize:"=?",onPageChange:"&?",paginationId:"=?",autoHide:"=?"},link:c},h=b.getString();return void 0!==h?g.template=h:g.templateUrl=function(a,c){return c.templateUrl||b.getPath()},g}function e(a){return function(b,c,d){if("undefined"==typeof d&&(d=j),!a.isRegistered(d))throw"pagination directive: the itemsPerPage id argument (id: "+d+") does not match a registered pagination-id.";var e,g;if(angular.isObject(b)){if(c=parseInt(c,10)||9999999999,g=a.isAsyncMode(d)?0:(a.getCurrentPage(d)-1)*c,e=g+c,a.setItemsPerPage(d,c),b instanceof Array)return b.slice(g,e);var h={};return angular.forEach(f(b).slice(g,e),function(a){h[a]=b[a]}),h}return b}}function f(a){if(Object.keys)return Object.keys(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b}function g(){var a,b={};this.registerInstance=function(c){"undefined"==typeof b[c]&&(b[c]={asyncMode:!1},a=c)},this.deregisterInstance=function(a){delete b[a]},this.isRegistered=function(a){return"undefined"!=typeof b[a]},this.getLastInstanceId=function(){return a},this.setCurrentPageParser=function(a,c,d){b[a].currentPageParser=c,b[a].context=d},this.setCurrentPage=function(a,c){b[a].currentPageParser.assign(b[a].context,c)},this.getCurrentPage=function(a){var c=b[a].currentPageParser;return c?c(b[a].context):1},this.setItemsPerPage=function(a,c){b[a].itemsPerPage=c},this.getItemsPerPage=function(a){return b[a].itemsPerPage},this.setCollectionLength=function(a,c){b[a].collectionLength=c},this.getCollectionLength=function(a){return b[a].collectionLength},this.setAsyncModeTrue=function(a){b[a].asyncMode=!0},this.setAsyncModeFalse=function(a){b[a].asyncMode=!1},this.isAsyncMode=function(a){return b[a].asyncMode}}function h(){var a,b="angularUtils.directives.dirPagination.template";this.setPath=function(a){b=a},this.setString=function(b){a=b},this.$get=function(){return{getPath:function(){return b},getString:function(){return a}}}}var i="dataDashboard.common.directive.dirPagination",j="__default";angular.module(i,[]).directive("dirPaginate",["$compile","$parse","paginationService",a]).directive("dirPaginateNoCompile",b).directive("dirPaginationControls",["paginationService","paginationTemplate",d]).filter("itemsPerPage",["paginationService",e]).service("paginationService",g).provider("paginationTemplate",h).run(["$templateCache",c])}(),function(){"use strict";function a(a,b){}function b(){return{templateUrl:"app/common/directives/header/header-notification/header-notification.html",restrict:"E",replace:!0,controller:a,controllerAs:"headerNotificationVm"}}a.$inject=["SigninService","$rootScope"],angular.module("dataDashboard.common.directive.headerNotificationDirective",[]).directive("headerNotification",b)}(),function(){"use strict";function a(){return{templateUrl:"app/common/directives/header/header.html",restrict:"E",replace:!0}}angular.module("dataDashboard.common.directive.headerDirective",[]).directive("header",a)}(),function(){"use strict";function a(){var a=this;a.selectedMenu="home"}function b(){return{templateUrl:"app/common/directives/sidebar/sidebar-search/sidebar-search.html",restrict:"E",replace:!0,scope:{},controller:a,controllerAs:"sidebarSearchVm"}}angular.module("dataDashboard.common.directive.sidebarSearchDirective",[]).directive("sidebarSearch",b)}(),function(){"use strict";function a(){function a(a){a===c.collapseVar?c.collapseVar=0:c.collapseVar=a}function b(a){a===c.multiCollapseVar?c.multiCollapseVar=0:c.multiCollapseVar=a}var c=this;c.selectedMenu="dashboard",c.collapseVar=0,c.multiCollapseVar=0,c.check=a,c.multiCheck=b}function b(){return{templateUrl:"app/common/directives/sidebar/sidebar.html",restrict:"E",replace:!0,scope:{},controller:a,controllerAs:"sidebarVm",bindToController:!0}}angular.module("dataDashboard.common.directive.sidebarDirective",[]).directive("sidebar",b)}(),function(){"use strict";function a(){return function(a){return null===a?"None":"all"===a?"All":b[a.toUpperCase()]?b[a.toUpperCase()]:a.toUpperCase()}}var b={AF:"Afghanistan",AX:"Åland Islands",AL:"Albania",DZ:"Algeria",AS:"American Samoa",AD:"Andorra",AO:"Angola",AI:"Anguilla",AQ:"Antarctica",AG:"Antigua and Barbuda",AR:"Argentina",AM:"Armenia",AW:"Aruba",AU:"Australia",AT:"Austria",AZ:"Azerbaijan",BS:"Bahamas",BH:"Bahrain",BD:"Bangladesh",BB:"Barbados",BY:"Belarus",BE:"Belgium",BZ:"Belize",BJ:"Benin",BM:"Bermuda",BT:"Bhutan",BO:"Plurinational State of Bolivia",BQ:"Sint Eustatius and Saba Bonaire",BA:"Bosnia and Herzegovina",BW:"Botswana",BV:"Bouvet Island",BR:"Brazil",IO:"British Indian Ocean Territory",BN:"Brunei Darussalam",BG:"Bulgaria",BF:"Burkina Faso",BI:"Burundi",KH:"Cambodia",CM:"Cameroon",CA:"Canada",CV:"Cape Verde",KY:"Cayman Islands",CF:"Central African Republic",TD:"Chad",CL:"Chile",CN:"China",CX:"Christmas Island",CC:"Cocos (keeling) Islands",CO:"Colombia",KM:"Comoros",CG:"Congo",CD:"The Democratic Republic of The Congo",CK:"Cook Islands",CR:"Costa Rica",CI:"Côte D'Ivoire",HR:"Croatia",CU:"Cuba",CW:"Curaçao",CY:"Cyprus",CZ:"Czech Republic",DK:"Denmark",DJ:"Djibouti",DM:"Dominica",DO:"Dominican Republic",EC:"Ecuador",EG:"Egypt",SV:"El Salvador",GQ:"Equatorial Guinea",ER:"Eritrea",EE:"Estonia",ET:"Ethiopia",FK:"Falkland Islands (malvinas)",FO:"Faroe Islands",FJ:"Fiji",FI:"Finland",FR:"France",GF:"French Guiana",PF:"French Polynesia",TF:"French Southern Territories",GA:"Gabon",GM:"Gambia",GE:"Georgia",DE:"Germany",GH:"Ghana",GI:"Gibraltar",GR:"Greece",GL:"Greenland",GD:"Grenada",GP:"Guadeloupe",GU:"Guam",GT:"Guatemala",GG:"Guernsey",GN:"Guinea",GW:"Guinea-bissau",GY:"Guyana",HT:"Haiti",HM:"Heard Island and Mcdonald Islands",VA:"Holy See (vatican City State)",HN:"Honduras",HK:"Hong Kong",HU:"Hungary",IS:"Iceland",IN:"India",ID:"Indonesia",IR:"Islamic Republic of Iran",IQ:"Iraq",IE:"Ireland",IM:"Isle of Man",IL:"Israel",IT:"Italy",JM:"Jamaica",JP:"Japan",JE:"Jersey",JO:"Jordan",KZ:"Kazakhstan",KE:"Kenya",KI:"Kiribati",KP:"Notrh Korea",KR:"South Korea",KW:"Kuwait",KG:"Kyrgyzstan",LA:"Lao People's Democratic Republic",LV:"Latvia",LB:"Lebanon",LS:"Lesotho",LR:"Liberia",LY:"Libya",LI:"Liechtenstein",LT:"Lithuania",LU:"Luxembourg",MO:"Macao",MK:"The Former Yugoslav Republic of Macedonia",MG:"Madagascar",MW:"Malawi",MY:"Malaysia",MV:"Maldives",ML:"Mali",MT:"Malta",MH:"Marshall Islands",MQ:"Martinique",MR:"Mauritania",MU:"Mauritius",YT:"Mayotte",MX:"Mexico",FM:"Federated States of Micronesia",MD:"Republic of Moldova",MC:"Monaco",MN:"Mongolia",ME:"Montenegro",MS:"Montserrat",MA:"Morocco",MZ:"Mozambique",MM:"Myanmar",NA:"Namibia",NR:"Nauru",NP:"Nepal",NL:"Netherlands",NC:"New Caledonia",NZ:"New Zealand",NI:"Nicaragua",NE:"Niger",NG:"Nigeria",NU:"Niue",NF:"Norfolk Island",MP:"Northern Mariana Islands",NO:"Norway",OM:"Oman",PK:"Pakistan",PW:"Palau",PS:"State of Palestine",PA:"Panama",PG:"Papua New Guinea",PY:"Paraguay",PE:"Peru",PH:"Philippines",PN:"Pitcairn",PL:"Poland",PT:"Portugal",PR:"Puerto Rico",QA:"Qatar",RE:"Réunion",RO:"Romania",RU:"Russian Federation",RW:"Rwanda",BL:"Saint Barthélemy",SH:"Ascension and Tristan Da Cunha Saint Helena",KN:"Saint Kitts and Nevis",LC:"Saint Lucia",MF:"Saint Martin (French Part)",PM:"Saint Pierre and Miquelon",VC:"Saint Vincent and The Grenadines",WS:"Samoa",SM:"San Marino",ST:"Sao Tome and Principe",SA:"Saudi Arabia",SN:"Senegal",RS:"Serbia",SC:"Seychelles",SL:"Sierra Leone",SG:"Singapore",SX:"Sint Maarten (Dutch Part)",SK:"Slovakia",SI:"Slovenia",SB:"Solomon Islands",SO:"Somalia",ZA:"South Africa",GS:"South Georgia and The South Sandwich Islands",SS:"South Sudan",ES:"Spain",LK:"Sri Lanka",SD:"Sudan",SR:"Suriname",SJ:"Svalbard and Jan Mayen",SZ:"Swaziland",SE:"Sweden",CH:"Switzerland",SY:"Syrian Arab Republic",TW:"Taiwan",TJ:"Tajikistan",TZ:"United Republic of Tanzania",TH:"Thailand",TL:"Timor-leste",TG:"Togo",TK:"Tokelau",TO:"Tonga",TT:"Trinidad and Tobago",TN:"Tunisia",TR:"Turkey",TM:"Turkmenistan",TC:"Turks and Caicos Islands",TV:"Tuvalu",UG:"Uganda",UA:"Ukraine",AE:"United Arab Emirates",GB:"United Kingdom",US:"United States",UM:"United States Minor Outlying Islands",UY:"Uruguay",UZ:"Uzbekistan",VU:"Vanuatu",VE:"Bolivarian Republic of Venezuela",VN:"Vietnam",VG:"Virgin Islands, British",VI:"Virgin Islands, U.S.",WF:"Wallis and Futuna",EH:"Western Sahara",YE:"Yemen",ZM:"Zambia",ZW:"Zimbabwe"};angular.module("dataDashboard.common.filter.country",[]).filter("country",a)}(),function(){"use strict";function a(){return function(a){return"all"===a?"All":b[a.toLowerCase()]?b[a.toLowerCase()]:a}}var b={android:"Android",ios:"iOS",web:"Web"};angular.module("dataDashboard.common.filter.device",[]).filter("device",a)}(),function(){"use strict";function a(){return function(a){var c;return null===a?"Extra":(b.resource.forEach(function(b){b.id===a&&(c=b.name)}),c)}}var b={resource:[{id:1,name:"초1"},{id:2,name:"초2"},{id:3,name:"초3"},{id:4,name:"초4"},{id:5,name:"초5"},{id:6,name:"초6"},{id:7,name:"중1"},{id:8,name:"중2"},{id:9,name:"중3"},{id:10,name:"고1"},{id:11,name:"고2"},{id:12,name:"고3"}]};angular.module("dataDashboard.common.filter.grade",[]).filter("grade",a)}(),function(){"use strict";function a(){return function(a){return a=a.toLowerCase(),b=a.split("_"),2===b.length&&b[0]===b[1]&&(a=b[0]),c[a]?c[a]:a}}var b,c={af:"Afrikaans",ar:"Arabic",ar_ae:"Arabic (U.A.E.)",ar_bh:"Arabic (Bahrain)",ar_dz:"Arabic (Algeria)",ar_eg:"Arabic (Egypt)",ar_iq:"Arabic (Iraq)",ar_jo:"Arabic (Jordan)",ar_kw:"Arabic (Kuwait)",ar_lb:"Arabic (Lebanon)",ar_ly:"Arabic (Libya)",ar_ma:"Arabic (Morocco)",ar_om:"Arabic (Oman)",ar_qa:"Arabic (Qatar)",ar_sa:"Arabic (Saudi Arabia)",ar_sy:"Arabic (Syria)",ar_tn:"Arabic (Tunisia)",ar_ye:"Arabic (Yemen)",az:"Azeri (Latin)",bs_ba:"Bosnian (Bosnia and Herzegovina)",be:"Belarusian",bg:"Bulgarian",ca:"Catalan",ca_es:"Catalan (Spain)",cs:"Czech",cs_cz:"Czech (Czech Republic)",da:"Danish",da_dk:"Danish (Denmark)",de:"German (Standard)",de_at:"German (Austria)",de_ch:"German (Switzerland)",de_li:"German (Liechtenstein)",de_lu:"German (Luxembourg)",el:"Greek",el_gr:"Greek (Greece)",en:"English",en_au:"English (Australia)",en_bz:"English (Belize)",en_ca:"English (Canada)",en_gb:"English (United Kingdom)",en_hk:"English (Hong Kong)",en_hu:"English (Hungary)",en_id:"English (Indonesia)",en_ie:"English (Ireland)",en_in:"English (India)",en_jm:"English (Jamaica)",en_kr:"English (South Korea)",en_mm:"English (Myanmar)",en_my:"English (Malaysia)",en_nz:"English (New Zealand)",en_sg:"English (Singapore)",en_tt:"English (Trinidad)",en_us:"English (United States)",en_za:"English (South Africa)",es:"Spanish (Spain)",es_ar:"Spanish (Argentina)",es_bo:"Spanish (Bolivia)",es_cl:"Spanish (Chile)",es_co:"Spanish (Colombia)",es_cr:"Spanish (Costa Rica)",es_do:"Spanish (Dominican Republic)",es_ec:"Spanish (Ecuador)",es_gt:"Spanish (Guatemala)",es_hn:"Spanish (Honduras)",es_mx:"Spanish (Mexico)",es_ni:"Spanish (Nicaragua)",es_pa:"Spanish (Panama)",es_pe:"Spanish (Peru)",en_ph:"English (Philippines)",es_pr:"Spanish (Puerto Rico)",es_py:"Spanish (Paraguay)",es_sv:"Spanish (El Salvador)",es_us:"Spanish (United States)",es_uy:"Spanish (Uruguay)",es_ve:"Spanish (Venezuela)",et:"Estonian",eu:"Basque",fa:"Farsi",fa_ir:"Farsi (Iran)",fi:"Finnish",fil_ph:"Filipino (Philippines)",fo:"Faeroese",fr:"French (Standard)",fr_be:"French (Belgium)",fr_ca:"French (Canada)",fr_ch:"French (Switzerland)",fr_lu:"French (Luxembourg)",ga:"Irish",gd:"Gaelic (Scotland)",he:"Hebrew",hi:"Hindi",hi_in:"Hindi (India)",hr:"Croatian",hu:"Hungarian",id:"Indonesian",is:"Icelandic",it:"Italian (Standard)",it_ch:"Italian (Switzerland)",iw_il:"Hebrew",ja:"Japanese",ja_jp:"Japanese (Japan)",ji:"Yiddish",ka_ge:"Georgian (Georgia)",kk_kz:"Kazakh (Kazakhstan)",km_kh:"Khmer",ko:"Korean",ko_an:"Korean (Netherlands Antilles)",ko_ca:"Korean (Canada)",ko_gb:"Korean (Great Britain)",ko_kp:"Korean (North Korea)",ko_kr:"Korean (South Korea)",ko_sd:"Korean (Sudan)",ko_so:"Korean (Somalia)",ko_st:"Korean (Sao Tome and Principe)",ko_tr:"Korean (Turkey)",ko_us:"Korean (United States)",kr:"Kanuri",kr_gb:"Kanuri (Great Britain)",kr_cn:"Kanuri (China)",ku:"Kurdish",lt:"Lithuanian",lv:"Latvian",mk:"Macedonian (FYROM)",ml:"Malayalam",ms:"Malaysian",ms_my:"Malaysian (Malaysia)",mt:"Maltese",nl:"Dutch (Standard)",nl_be:"Dutch (Belgium)",nb:"Norwegian (Bokmål)",nn:"Norwegian (Nynorsk)",no:"Norwegian",pa:"Punjabi",pl:"Polish",pt:"Portuguese (Portugal)",pt_br:"Portuguese (Brazil)",rm:"Rhaeto-Romanic",ro:"Romanian",ro_md:"Romanian (Republic of Moldova)",ru:"Russian",ru_md:"Russian (Republic of Moldova)",sb:"Sorbian",sk:"Slovak",sl:"Slovenian",sl_si:"Slovenian (Slovenia)",sq:"Albanian",sr:"Serbian",sr_rs:"Serbian (Cyrillic)",sv:"Swedish",sv_fi:"Swedish (Finland)",sv_se:"Swedish (Sweden)",th:"Thai",tn:"Tswana",tr:"Turkish",ts:"Tsonga",uk:"Ukrainian",uk_ua:"Ukrainian (Ukraine)",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vi_vn:"Vietnamese (Vietnam)",xh:"Xhosa",zh_cn:"Chinese (PRC)",zh_hk:"Chinese (Hong Kong)",zh_sg:"Chinese (Singapore)",zh_tw:"Chinese (Taiwan)",zu:"Zulu"};angular.module("dataDashboard.common.filter.language",[]).filter("language",a)}(),function(){"use strict";function a(){return function(a){return b[a]}}var b={0:"01: January",1:"02: February",2:"03: March",3:"04: April",4:"05: May",5:"06: June",6:"07: July",7:"08: August",8:"09: September",9:"10: October",10:"11: November",11:"12: December"};angular.module("dataDashboard.common.filter.month",[]).filter("month",a)}(),function(){"use strict";function a(){return function(a){return b[a]&&a.length>2&&0!==b[a].length?b[a]:a}}var b={landing:"랜딩 화면",signin:"러닝카드 시작하기","Reset PW":"","Reset PW New PW":"",join:"가입","join.terms":"이용약관","join.select_role":"가입시 역할 선택","join.enter_school_grade":"가입시 학년 선택","join.select_subjects":"가입시 과목 선택","join.parent_confirm":"가입시 부모 등록","join.start_trial":"체험 시작 안내",today:"투데이 추천","today.change_card":"추천 카드 변경","card.cover":"카드 표지","card.sheet":"카드 시트","card.quiz":"퀴즈","card.explanation":"퀴즈 해설","card.rate":"카드 평가",
"card.milestone":"마일스톤","card.result":"카드 결과","card.menu":"카드 메뉴","card.info":"카드 정보","card.references":"카드 출처","card.editor_info":"카드 저작자 정보",series:"시리즈",editor:"에디터 상세 페이지",explore:"탐색","explore.popular":"인기 카드 목록","explore.subject_series":"과목별 시리즈 목록",search:"검색",performance:"성취도","performance.milestone":"목표달성","performance.past":"이전 성취도",profile:"프로필","profile.edit":"프로필 수정",search_school:"학교 검색",select_grade:"학년 선택",select_subject:"과목 선택","profile.subject_detail":"",bookmarks:"즐겨찾기 카드",completed:"완료한 카드",settings:"설정","settings.change_email":"이메일 변경 modal","settings.change_pw":"이름 변경","settings.change_name":"비밀번호 변경","settings.noti_frequency":"추천카드 알람","settings.noti_time":"알람 시간",downloaded_cards:"다운로드된 카드","settings.notices":"공지사항","settings.support":"고객지원","settings.delete_account":"탈퇴",subscription_info:"구독정보",parent_dashboard:"학부모 대시보드",child_settings:"자녀 설정",child_performance:"자녀 성취도",parent_settings:"부모 설정","parent_settings.invite_child":"","parent_settings.account":"부모 계정 설정",plan:"플랜 선택","payment.info":"결제 정보","payment.edit":"결제 정보 수정","payment.list":"","subscription.unsubscribe":"구독 해지","payment.refund":"환불 신청","subscription.index":"결제 완료","subscription.select":"구독할 자녀 선택","payment.detail":"",_null:"없음"};angular.module("dataDashboard.common.filter.pageName",[]).filter("pageName",a)}(),function(){"use strict";function a(a){return function(b,c){return a("number")(100*b,c)+"%"}}a.$inject=["$filter"],angular.module("dataDashboard.common.filter.percentage",[]).filter("percentage",a)}(),function(){"use strict";function a(){return function(a,d){return"iamport"===a?b[d]:1120*c[d]}}var b={basic1:19800,basic2:35640,basic3:47520,standard1:29800,standard2:53640,standard3:71520,premium1:49800,premium2:89640,premium3:19520},c={basic1:22,basic2:40,basic3:53,standard1:33,standard2:61,standard3:83,premium1:55,premium2:99,premium3:132};angular.module("dataDashboard.common.filter.price",[]).filter("price",a)}(),function(){"use strict";function a(){return function(a){var c;return b.resource.forEach(function(b){b.id===parseInt(a)&&(c=b.name)}),c}}var b={resource:[{id:-1,name:"Total"},{id:1,name:"Classting"},{id:2,name:"김태우"},{id:3,name:"윤요한"},{id:4,name:"비상교육"},{id:5,name:"YBM잉글루"},{id:6,name:"교학사"},{id:7,name:"미래엔"},{id:8,name:"EBS"},{id:9,name:"금성출판사 푸르넷"},{id:10,name:"천재교육해법스터디"},{id:11,name:"이준헌"},{id:12,name:"API테스트"},{id:13,name:"대교"},{id:14,name:"이충은"},{id:15,name:"클요미♡"},{id:16,name:"샤비놈"},{id:17,name:"(주)지학사"},{id:18,name:"EBS 초등"},{id:19,name:"EBS 중학"},{id:20,name:"금성출판사"},{id:21,name:"디즈니코리아"},{id:22,name:"lctestqa운영"},{id:23,name:"lctestqa운영"},{id:24,name:"미래엔 아이세움"},{id:25,name:"YBM"},{id:26,name:"정철영어TV"},{id:27,name:"윤선생영어교실"},{id:28,name:"와이즈캠프"},{id:29,name:"대교"},{id:30,name:"MBC"},{id:31,name:"knowre"},{id:32,name:"서울교대 컴퓨터교육과"},{id:33,name:"캐치잇잉글리쉬"},{id:34,name:"비상교육"},{id:35,name:"차이나탄"},{id:36,name:"능률교육"},{id:37,name:"좋은책신사고"},{id:38,name:"청담러닝"},{id:39,name:"매일경제"},{id:40,name:"모네상스"},{id:41,name:"시공미디어(홈런)"},{id:42,name:"Brightstorm"},{id:43,name:"이상현"},{id:44,name:"하이라이츠"},{id:45,name:"위션"},{id:46,name:"올림피아드 교육"},{id:47,name:"동아출판"},{id:48,name:"엔트리"},{id:49,name:"HMH"},{id:50,name:"백미란"},{id:51,name:"문정아중국어"},{id:52,name:"杨帆"},{id:53,name:"초3"},{id:54,name:"백미쌀"},{id:55,name:"조현구"},{id:56,name:"이충은"},{id:57,name:"Jayon Kim"}]};angular.module("dataDashboard.common.filter.publisher",[]).filter("publisher",a)}(),function(){"use strict";function a(){return function(a){var c;return b.resource.forEach(function(b){b.id===parseInt(a)&&(c=b.name)}),c}}var b={resource:[{id:1,name:"시리즈명3"},{id:2,name:"오투 초등과학 6-1"},{id:3,name:"BLUE 6"},{id:4,name:"BLUE 9"},{id:5,name:"BLUE 4"},{id:6,name:"BLUE 8"},{id:7,name:"나노"},{id:8,name:"선생님이 강력 추천하는 단원평가"},{id:9,name:"선생님이 강력 추천하는 단원평가"},{id:10,name:"선생님이 강력 추천하는 단원평가"},{id:13,name:"올리드"},{id:15,name:"푸르넷"},{id:16,name:"푸르넷"},{id:17,name:"핵심노트"},{id:19,name:"나노 과학"},{id:20,name:"YBM 잉글루 BLUE 8권"},{id:22,name:"2단원테스트"},{id:23,name:"선생님이 강력 추천하는 단원평가"},{id:24,name:"선생님이 강력 추천하는 단원평가"},{id:25,name:"올리드"},{id:26,name:"올리드"},{id:27,name:"오투"},{id:28,name:"오투"},{id:29,name:"ORANGE 2"},{id:30,name:"ORANGE 3"},{id:31,name:"ORANGE 5"},{id:32,name:"ORANGE 6"},{id:33,name:"YELLOW 2"},{id:34,name:"YELLOW 4"},{id:35,name:"YELLOW 6"},{id:36,name:"YELLOW 12"},{id:37,name:"GREEN 2"},{id:38,name:"핵심노트"},{id:39,name:"BLUE 3"},{id:40,name:"green2"},{id:41,name:"BLUE 1"},{id:42,name:"BLUE 2"},{id:43,name:"BLUE 5"},{id:44,name:"BLUE 7"},{id:45,name:"BLUE 10"},{id:46,name:"BLUE 11"},{id:47,name:"BLUE 12"},{id:48,name:"ORANGE 1"},{id:49,name:"ORANGE 3"},{id:50,name:"ORANGE 4"},{id:51,name:"ORANGE 7"},{id:52,name:"ORANGE 8"},{id:53,name:"ORANGE 9"},{id:54,name:"ORANGE 10"},{id:55,name:"ORANGE 11"},{id:56,name:"ORANGE 12"},{id:57,name:"GREEN 1"},{id:58,name:"GREEN 2"},{id:59,name:"GREEN 3"},{id:60,name:"GREEN 4"},{id:61,name:"GREEN 5"},{id:62,name:"GREEN 6"},{id:63,name:"GREEN 7"},{id:64,name:"GREEN 8"},{id:65,name:"GREEN 9"},{id:66,name:"GREEN 10"},{id:67,name:"GREEN 11"},{id:68,name:"GREEN 12"},{id:69,name:"YELLOW 1"},{id:70,name:"YELLOW 3"},{id:71,name:"YELLOW 5"},{id:72,name:"YELLOW 7"},{id:73,name:"YELLOW 8"},{id:74,name:"YELLOW 9"},{id:75,name:"YELLOW 10"},{id:76,name:"YELLOW 11"},{id:77,name:"하잇"},{id:78,name:"오투"},{id:79,name:"오투"},{id:80,name:"선생님이 강력 추천하는 단원평가"},{id:81,name:"선생님이 강력 추천하는 단원평가"},{id:82,name:"선생님이 강력 추천하는 단원평가"},{id:83,name:"나노"},{id:85,name:"푸르넷"},{id:86,name:"푸르넷"},{id:87,name:"푸르넷"},{id:88,name:"푸르넷"},{id:89,name:"푸르넷"},{id:90,name:"푸르넷"},{id:91,name:"NAVY 1"},{id:92,name:"NAVY  2"},{id:93,name:"NAVY 3"},{id:94,name:"NAVY 4"},{id:95,name:"NAVY 5"},{id:96,name:"NAVY 6"},{id:97,name:"NAVY 7"},{id:98,name:"NAVY 8"},{id:99,name:"NAVY 9"},{id:100,name:"NAVY 10"},{id:101,name:"NAVY 11"},{id:102,name:"NAVY 12"},{id:103,name:"PURPLE 1"},{id:104,name:"PURPLE 2"},{id:105,name:"PURPLE 3"},{id:106,name:"PURPLE 4"},{id:107,name:"PURPLE 5"},{id:108,name:"PURPLE 6"},{id:109,name:"PURPLE 7"},{id:110,name:"PURPLE 8"},{id:111,name:"PURPLE 9"},{id:112,name:"PURPLE 10"},{id:113,name:"PURPLE 11"},{id:114,name:"PURPLE 12"},{id:115,name:"샘플"},{id:116,name:"오투"},{id:117,name:"오투"},{id:118,name:"오투"},{id:121,name:"나노과학"},{id:122,name:"올리드"},{id:123,name:"평가문제집"},{id:124,name:"핵심노트"},{id:125,name:"핵심노트"},{id:126,name:"핵심노트"},{id:127,name:"핵심노트"},{id:128,name:"핵심노트"},{id:129,name:"핵심노트"},{id:130,name:"오투"},{id:131,name:"올리드"},{id:132,name:"나노"},{id:133,name:"영어로 배우는 마법천자문"},{id:134,name:"WANNA BE 또봇"},{id:135,name:"WANNA BE 또봇 시즌1"},{id:136,name:"WANNA BE 또봇 시즌2"},{id:137,name:"WANNA BE 또봇 시즌3"},{id:138,name:"만점왕"},{id:139,name:"만점왕"},{id:140,name:"만점왕"},{id:141,name:"만점왕"},{id:142,name:"만점왕"},{id:143,name:"만점왕"},{id:144,name:"만점왕"},{id:145,name:"만점왕"},{id:146,name:"기초영문법 1"},{id:147,name:"기초영문법 2"},{id:148,name:"TV중학"},{id:149,name:"TV중학"},{id:150,name:"test"},{id:151,name:"TEST"},{id:152,name:"만점왕"},{id:153,name:"한달만에 초등영문법 뽀개기"},{id:154,name:"한달만에 초등 영문법 뽀개기"},{id:155,name:"TV중학"},{id:156,name:"TV중학"},{id:157,name:"TV중학"},{id:158,name:"TV중학"},{id:159,name:"만점왕"},{id:160,name:"만점왕"},{id:161,name:"만점왕"},{id:162,name:"수학 자습서"},{id:163,name:"자습서"},{id:164,name:"자습서"},{id:165,name:"자습서"},{id:166,name:"풍산자 필수유형"},{id:167,name:"풍산자 필수유형"},{id:168,name:"풍산자 필수유형"},{id:169,name:"풍산자 필수유형"},{id:170,name:"풍산자 개념완성"},{id:171,name:"풍산자 개념완성"},{id:172,name:"풍산자 개념완성"},{id:173,name:"자습서"},{id:174,name:"수학중심&유형맞짱"},{id:175,name:"수학중심&유형맞짱"},{id:176,name:"수학중심&유형맞짱"},{id:177,name:"수학중심&유형맞짱"},{id:178,name:"개념플러스유형 라이트"},{id:179,name:"개념플러스유형 라이트"},{id:180,name:"개념플러스유형 라이트"},{id:181,name:"개념플러스유형 라이트"},{id:182,name:"개념플로스유형 파워"},{id:183,name:"개념플러스유형 파워"},{id:184,name:"개념플러스유형 파워"},{id:185,name:"개념플러스유형 파워"},{id:186,name:"개념플러스유형 파워"},{id:187,name:"개념플러스유형 라이트 개념편"},{id:188,name:"개념플러스유형 라이트 개념편"},{id:189,name:"개념플러스유형 라이트 개념편"},{id:190,name:"개념플러스유형 라이트 유형편"},{id:191,name:"개념플러스유형 라이트 유형편"},{id:192,name:"개념플러스유형 라이트 유형편"},{id:193,name:"개념플러스유형 파워"},{id:194,name:"개념플러스유형 파워"},{id:195,name:"개념플러스유형 파워"},{id:196,name:"나노"},{id:197,name:"나노"},{id:198,name:"나노"},{id:199,name:"나노"},{id:200,name:"English Serise"},{id:201,name:"츤데레레"},{id:202,name:"dd"},{id:203,name:"ee"},{id:204,name:"리듬중국어 Step1"},{id:205,name:"교과서가 쉬워지는 용어 한국사 600"},{id:206,name:"완소단어장"},{id:207,name:"도란도란 한국사"},{id:208,name:"기타과학"},{id:209,name:"내신만점 평가 문제집"},{id:210,name:"내신만점 평가 문제집"},{id:211,name:"내신만점 평가 문제집"},{id:212,name:"특강"},{id:213,name:"특강"},{id:214,name:"특강"},{id:215,name:"자습서"},{id:216,name:"자습서"},{id:217,name:"특강"},{id:218,name:"특강"},{id:219,name:"3분 직업체험"},{id:220,name:"ㅁㄴㅇㄹㅁㄴ"},{id:221,name:"개념 플러스 유형"},{id:222,name:"개념 플러스 유형"},{id:223,name:"개념 플러스 유형"},{id:224,name:"노리중등수학"},{id:225,name:"노리중등수학"},{id:226,name:"노리중등수학"},{id:227,name:"통큰세계사"},{id:228,name:"TV과학"},{id:229,name:"TV중학"},{id:230,name:"TV중학"},{id:231,name:"TV중학"}]};angular.module("dataDashboard.common.filter.series",[]).filter("series",a)}(),function(){"use strict";function a(){return function(a){var c;return null===a?"Extra":(b.resource.forEach(function(b){b.id===a&&(c=b.name)}),c)}}var b={resource:[{id:2,name:"수학"},{id:3,name:"사회"},{id:5,name:"과학"},{id:41,name:"영어 - 초급"},{id:42,name:"영어 - 중급"},{id:43,name:"사회1"},{id:44,name:"사회2"},{id:45,name:"역사"},{id:46,name:"중국어 - 초급"},{id:47,name:"교양 - 역사"},{id:48,name:"교양 - 일반"},{id:49,name:"한자"}]};angular.module("dataDashboard.common.filter.subject",[]).filter("subject",a)}(),function(){"use strict";function a(){return function(a){return a=a||"",a.replace(/\w\S*/g,function(a){return a.charAt(0).toUpperCase()+a.substr(1).toLowerCase()})}}angular.module("dataDashboard.common.filter.titleCase",[]).filter("titleCase",a)}(),function(){"use strict";function a(a,b){function c(c){if(401===c.status||403===c.status){d||(d=b.get("$http")),e||(e=b.get("$cookies")),f||(f=b.get("$rootScope")),g||(g=b.get("$state")),d.defaults.headers.common["X-DreamFactory-Session-Token"]=void 0,e.session_token=void 0,f.user=void 0,f.isLoggedIn=!1;try{window.localStorage.user=void 0}catch(h){}g.go("signin")}return a.reject(c)}var d,e,f,g;return{responseError:c}}a.$inject=["$q","$injector"],angular.module("dataDashboard.common.interceptor.AuthInterceptor",[]).factory("AuthInterceptor",a)}(),function(){"use strict";function a(a,b,c){try{a.user=JSON.parse(window.localStorage.user),a.user&&(a.isLoggedIn=!0)}catch(d){}}a.$inject=["$rootScope","$http","APP_CONFIG"],angular.module("dataDashboard.common.run.FetchUserFromLocalStorageRun",[]).run(a)}(),function(){"use strict";function a(a,b,c){}a.$inject=["$rootScope","$state","$location"],angular.module("dataDashboard.common.run.RouterPermissionRun",[]).run(a)}(),function(){"use strict";function a(a){function b(b,c,d,e,f){this.options={chart:{type:"column"},tooltip:{xDateFormat:e||"%A, %B %d, %Y",shared:d||!1},plotOptions:{series:{legendItemClick:c,stacking:f}},colors:a.COLORS,loading:{labelStyle:{color:"white"},style:{backgroundColor:"gray"},hideDuration:1e3,showDuration:1e3}},this.title={text:null},this.xAxis={type:"datetime"},this.yAxis={title:null},this.series=b}return{BarChartConfig:b}}a.$inject=["APP_CONFIG"],angular.module("dataDashboard.common.utils.BarchartUtils",[]).factory("BarchartUtils",a)}(),function(){"use strict";function a(){function a(a){return Object.keys(a).map(function(b){return a[b]})}return{convertObjectToArray:a}}angular.module("dataDashboard.common.utils.CommonUtils",[]).factory("CommonUtils",a)}(),function(){"use strict";function a(a){function b(a){return Papa.parse(a).data}function c(a){return Papa.unparse({fields:["timestamp","count"],data:a.data})}function d(a,b){return Papa.unparse({fields:b,data:a})}function e(a,b,c,d,e){var f=[];return b.forEach(function(b){d&&e&&b.date>=k(d)&&b.date<=k(e)?(f.push({}),a.forEach(function(a){c&&"date"!==a?f[f.length-1][a]=(c[a]||0)+(f[f.length-2][a]||0)+(b[a]||0):f[f.length-1][a]=b[a]||0})):d||e||(f.push({}),a.forEach(function(a){c&&"date"!==a?f[f.length-1][a]=(c[a]||0)+(f[f.length-2][a]||0)+(b[a]||0):f[f.length-1][a]=b[a]||0}))}),Papa.unparse({fields:a,data:f})}function f(b,d,e){var f,g;d?f=b:(b.data.forEach(function(b){b[0]=a("date")(b[0],"MM/dd/yyyy")}),f=c(b)),e||(e="export.csv"),window.URL=window.URL||window.webkitURL;var h=new Blob([f],{type:"text/csv"});g=document.createElement("a"),g.setAttribute("href",window.URL.createObjectURL(h)),g.setAttribute("download",e),g.click()}function g(b,c,e,f,g){var h,i;c?h=b:(g||b.forEach(function(b){b[0]=a("date")(b[0],"MM/dd/yyyy")}),h=d(b,f)),e||(e="export.csv"),window.URL=window.URL||window.webkitURL;var j=new Blob([h],{type:"text/csv"});i=document.createElement("a"),i.setAttribute("href",window.URL.createObjectURL(j)),i.setAttribute("download",e),i.click()}function h(a,b,c){a.forEach(function(a){a.data.splice(0)});for(var d=1;d<b.length;d++)if(b[d].length>3)for(var e=0;e<c.length;e++)a[e].data.push([new Date(b[d][0]).getTime(),parseInt(b[d][c[e]],10)])}function i(a,b,c){b.forEach(function(d){d.length>3&&"Date"!==d[0]&&(a[d[2]]||0===d[2].length?a[d[2]]&&0!==d[2].length&&c.forEach(function(c){a[d[2]][b[0][c]]+=parseInt(d[c],10)}):(a[d[2]]={},a[d[2]].name=d[2],c.forEach(function(c){a[d[2]][b[0][c]]=parseInt(d[c],10)})))})}function j(a,b,c,d){a.forEach(function(a){a.data.splice(0)});for(var e=1;e<b.length;e++)if(b[e].length>2&&b[e][2]===d)for(var f=0;f<c.length;f++)a[f].data.push([new Date(b[e][0]).getTime(),parseInt(b[e][c[f]],10)])}function k(a){return(1e4*a.getFullYear()+100*(a.getMonth()+1)+a.getDate()).toString()}return{csvParser:b,convertToCSV:c,convertEsRawDataToCSV:e,downloadCSV:f,downloadCSV2:g,convertParsedCSVDataToHighchartsSeries:h,convertParsedCSVDataToOverviewTable:i,convertParsedCSVDataToItemSpecificSeries:j}}a.$inject=["$filter"],angular.module("dataDashboard.common.utils.CSVparserUtils",[]).factory("CSVparserUtils",a)}(),function(){"use strict";function a(a){function b(a){return a.length>0?e(a)/a.length:void 0}function c(a){return a.length>0?a.slice().sort(f)[0][1]:void 0}function d(a){return a.length>0?a.slice().sort(f)[a.length-1][1]:void 0}function e(a){var b=0;return a.length>0&&a.forEach(function(a){b+=a[1]}),b}function f(a,b){return a[1]<b[1]?-1:a[1]>b[1]?1:0}function g(b,c,d){this.options={chart:{type:"line"},tooltip:{xDateFormat:"%A, %B %d, %Y",shared:c||!1,crosshairs:c||!1},plotOptions:{series:{events:{legendItemClick:d||function(){}}}},colors:a.COLORS,loading:{labelStyle:{color:"white"},style:{backgroundColor:"gray"},hideDuration:1e3,showDuration:1e3}},this.title={text:null},this.xAxis={type:"datetime"},this.yAxis={title:null},this.series=b}function h(b,c){this.options={chart:{type:"line",zoomType:"x"},tooltip:{xDateFormat:"%H:%M, %A, %B %d, %Y"},plotOptions:{series:{events:{legendItemClick:c||function(){}},marker:{enabled:!1}}},colors:a.COLORS,loading:{labelStyle:{color:"white"},style:{backgroundColor:"gray"},hideDuration:1e3,showDuration:1e3}},this.title={text:null},this.xAxis={type:"datetime"},this.yAxis={title:null},this.series=b}function i(b,c,d,e){this.options={chart:{type:"line"},tooltip:{xDateFormat:e||"%A, %B %d, %Y",shared:d||!1},plotOptions:{series:{events:{legendItemClick:c||function(){}}}},colors:a.COLORS,loading:{labelStyle:{color:"white"},style:{backgroundColor:"gray"},hideDuration:1e3,showDuration:1e3}},this.title={text:null},this.xAxis={type:"datetime"},this.yAxis={title:null},this.series=b}return{getAverage:b,getMinimum:c,getMaximum:d,getSum:e,LineChartConfig:i,LineChartConfigForCSV:g,LineChartConfigForSES:h}}a.$inject=["APP_CONFIG"],angular.module("dataDashboard.common.utils.LinechartUtils",[]).factory("LinechartUtils",a)}(),function(){"use strict";function a(a){function b(b){this.options={chart:{type:"pie"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},colors:a.COLORS,tooltip:{headerFormat:"",pointFormat:"<b>{point.name}: {point.y} ({point.percentage:.1f}%)</b>"}},this.title={text:null},this.series=[{name:"proportion",data:b}]}return{PieChartConfig:b}}a.$inject=["APP_CONFIG"],angular.module("dataDashboard.common.utils.PiechartUtils",[]).factory("PiechartUtils",a)}(),function(){"use strict";function a(a,e,f,g,h,i){function j(){l()}function k(a){return(s.currentPage-1)*s.pageSize+a}function l(){a.getCumulativeUserData(s.cumulativeUserDataForLineChart,s.selectedRange,s.selectedPaidFilter,s.dateRange.startDate,s.dateRange.endDate).then(function(a){"success"===a.name&&m()})}function m(){s.reversedData=[],s.reversedData=s.cumulativeUserDataForLineChart.data.reverse(),s.totalItem=s.reversedData.length-1,n(1)}function n(a){s.currentPage=a,s.reversedDataContainer=[];for(var b=(s.currentPage-1)*s.pageSize,c=b;c<b+s.pageSize&&0!==s.reversedData.length;c++){if(c===s.totalItem){s.reversedDataContainer.push([s.reversedData[c][0],s.reversedData[c][1],"-"]);break}s.reversedDataContainer.push([s.reversedData[c][0],s.reversedData[c][1],s.reversedData[c][1]-s.reversedData[c+1][1],(s.reversedData[c][1]-s.reversedData[c+1][1])/s.reversedData[c+1][1]])}}function o(a){s.selectedRange=a,l()}function p(a){var b,c=[];b=["date","totalUsers","changeNet/%"],a.forEach(function(a,b){var d=[];d[0]=a[0],d[1]=a[1],d[2]=a[2]+"/"+(100*a[3]).toFixed(2)+"%",c.push(d)}),i.downloadCSV2(c,!1,"cumulative_userdata_"+s.selectedRange+"_"+s.selectedLineChartFilter+".csv",b)}function q(a){return a=r(a),6===a?{color:"blue"}:0===a?{color:"red"}:{color:"black"}}function r(a){var b=new Date(a);return b.getDay()}var s=this;s.currentPage=1,s.pageSize=20,s.totalItem=0,s.dateRange={startDate:c,endDate:b},s.dateRangePieChart={startDate:d,endDate:b},s.availableRanges=["daily","weekly","monthly","yearly"],s.availablePieChartFilters=["role","device","country"],s.availablePaid=["free","paid","basic","standard","premium"],s.selectedLineChartFilter="all",s.selectedRange="daily",s.selectedPaidFilter="all",s.currentUsers={value:0,first:0},s.cumulativeUserDataForLineChart={name:"User Signups",data:[[(new Date).getTime(),0]],id:"user-signups",color:g.COLORS[9]},s.reversedData,s.reversedDataContainer=[],s.lineChartData=[s.cumulativeUserDataForLineChart],s.lineChartConfig=new e.LineChartConfig(s.lineChartData,null,!0),s.lineChartFilter=l,s.selectDropdownRange=o,s.getDateColor=q,s.getTableIndex=k,s.pageChanged=n,s.fetchAndDownloadCSV=p,j()}var b=new Date,c=new Date(new Date(b).setMonth(b.getMonth()-1)),d=new Date("2015-11-01");a.$inject=["CumulativeUserData","LinechartUtils","PiechartUtils","APP_CONFIG","$filter","CSVparserUtils"],angular.module("dataDashboard.cumulativeUserData.controller.CumulativeUserDataController",[]).controller("CumulativeUserDataController",a)}(),function(){"use strict";angular.module("dataDashboard.cumulativeUserData",["dataDashboard.cumulativeUserData.controller.CumulativeUserDataController","dataDashboard.cumulativeUserData.service.CumulativeUserData","dataDashboard.cumulativeUserData.CumulativeUserDataRouter"])}(),function(){"use strict";function a(a){a.state("dashboard.cumulativeUserData",{templateUrl:"app/cumulative-userdata/cumulative-userdata.html",url:"/cumulative-userdata",controller:"CumulativeUserDataController",controllerAs:"cumulativeUserDataVm"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.cumulativeUserData.CumulativeUserDataRouter",[]).config(a)}(),function(){"use strict";function a(a,c,d,e){function f(d,f,i,j,k){var l,m=c.defer(),n=h(i),o=0,p=-1;return a({url:e.BACKEND_ADDRESS+n,method:"GET",headers:{"X-DreamFactory-Application-Name":e.DSP_API_NAME,"X-DreamFactory-Api-Key":e.DSP_API_KEY}}).then(function(a){d.data.splice(0),!a.data.timed_out&&a.data.length>0&&(a.data.forEach(function(a){g(j)>=g(a.created_at)?o+=parseInt(a.num,10):g(j)<g(a.created_at)&&g(k)>=g(a.created_at)&&("daily"===f?(d.data.push([g(a.created_at),o+(parseInt(a.num,10)||0)]),o=d.data[d.data.length-1][1]):(l="weekly"===f?7:"monthly"===f?30:365,p+b*l>g(a.created_at)?o+=parseInt(a.num,10):(d.data.push([g(a.created_at),o+(parseInt(a.num,10)||0)]),o=d.data[d.data.length-1][1],p=g(a.created_at))))}),o>d.data[d.data.length-1][1]&&d.data.push([g(a.data[a.data.length-1].created_at),o])),m.resolve({name:"success"})},m.reject),m.promise}function g(a){var b=new Date(a).setHours(12,0,0,0);return new Date(b).getTime()}function h(a){var b="";return b="all"===a?"/lc_db_prd/_proc/total_user":"free"===a?"/lc_db_prd/_proc/free_user":"paid"===a?"/lc_db_prd/_proc/paid_user":"basic"===a?"/lc_db_prd/_proc/basic_paid_user":"standard"===a?"/lc_db_prd/_proc/standard_paid_user":"/lc_db_prd/_proc/premium_paid_user"}return{getCumulativeUserData:f}}var b=864e5;a.$inject=["$http","$q","$filter","APP_CONFIG"],angular.module("dataDashboard.cumulativeUserData.service.CumulativeUserData",[]).factory("CumulativeUserData",a)}(),function(){"use strict";function a(a,b,e){function f(){p()}function g(a){u.selectedChartType=a,u.lineChartConfig.options.chart.type=a}function h(a){u.selectedGroupByFilter=a,p()}function i(a){u.selectedAPIFilter=a,p()}function j(a){u.selectedMethodFilter=a,p()}function k(a){u.selectedRoleFilter=a,p()}function l(a){u.selectedDeviceFilter=a,p()}function m(a){u.selectedTypeFilter=a,console.log(u.selectedTypeFilter),p()}function n(){p()}function o(){var b=a.getGroupByFilterFromQuery(u.customQueryString);return null===b?null:void(b.startsWith("date_histogram")?u.lineChartConfig.xAxis.type="datetime":u.lineChartConfig.xAxis.type="category")}function p(){u.customQueryString=a.createQueryString(u.selectedAPIFilter,u.selectedDeviceFilter,u.selectedRoleFilter,u.selectedTypeFilter,u.selectedMethodFilter,u.selectedGroupByFilter,u.dateRange.startDate,u.dateRange.endDate)}function q(){t||(t=angular.element("#date-alert-msg")),u.customQueryString.substring(u.customQueryString.toLowerCase().indexOf("from"),u.customQueryString.toLowerCase().indexOf("where")).split(",").length>30?s(v):(t.addClass("hide"),r())}function r(){u.lineChartConfig.getHighcharts&&(u.linechart=u.lineChartConfig.getHighcharts(),u.linechart.showLoading()),console.log(u.customQueryString),a.getCustomQueryData(u.dataContainer,u.customQueryString,u.dateRange.startDate,u.dateRange.endDate,u.linechart,s,g,o)}function s(a){u.alertMsgContent=a,t.removeClass("hide")}var t,u=this,v=("You can't select date after "+c.getFullYear()+". "+(c.getMonth()+1)+". "+c.getDate(),"Please select date within a month range");u.dateRange={startDate:d,endDate:c},u.alertMsgContent,u.constraintDay=c,u.getAverage=b.getAverage,u.getMinimum=b.getMinimum,u.getMaximum=b.getMaximum,u.getSum=b.getSum,u.customQueryString="",u.selectedAPIFilter="posts",u.selectedMethodFilter="POST",u.selectedRoleFilter="All",u.selectedDeviceFilter="All",u.selectedTypeFilter="All",u.selectedGroupByFilter="date",u.selectedChartType="line",u.availableAPIs=["users","classes","posts","sessions","notices","photos","albums","search"],u.availableMethods=["GET","POST","PUT","DELETE"],u.availableRoles=["All","child","parent"],u.availableDevices=["All","Android","iOS"],u.availableTypes=["All","api","result","quiz","page","event","payment","download"],u.availableGroupBys=["date","role"],u.availableChartTypes=["line","area","bar","column","pie","scatter"],u.iconAliases={Android:"fa-android",iOS:"fa-apple",Web:"fa-laptop",Korea:"flag-icon-kr",Japan:"flag-icon-jp",Taiwan:"flag-icon-tw",USA:"flag-icon-us",Canada:"flag-icon-ca"},u.dataContainer={name:"custom query",data:[[u.dateRange.endDate.getTime(),0]],id:"dataContainer",color:e.COLORS[1]},u.lineChartData=[u.dataContainer],u.lineChartConfig=new b.LineChartConfig(u.lineChartData),u.linechart,u.selectDropdownMethod=j,u.selectDropdownRole=k,u.selectDropdownDevice=l,u.selectDropdownType=m,u.selectDropdownAPI=i,u.selectDropdownGroupBy=h,u.selectDropdownChartType=g,u.selectDateRange=n,u.triggerUpdateWithQueryString=q,u.updateCustomQueryString=p,u.updateData=r,f()}var b=new Date,c=new Date(b.getTime());c.setDate(c.getDate()-1);var d=new Date(c.getTime());d.setDate(d.getDate()-2),a.$inject=["CustomQuery","LinechartUtils","APP_CONFIG"],angular.module("dataDashboard.customQuery.controller.CustomQueryController",[]).controller("CustomQueryController",a)}(),function(){"use strict";angular.module("dataDashboard.customQuery",["dataDashboard.customQuery.controller.CustomQueryController","dataDashboard.customQuery.service.CustomQuery","dataDashboard.customQuery.CustomQueryRouter"])}(),function(){"use strict";function a(a){a.state("dashboard.customQuery",{templateUrl:"app/custom-query/custom-query.html",url:"/custom-query",controller:"CustomQueryController",controllerAs:"customQueryVm"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.customQuery.CustomQueryRouter",[]).config(a)}(),function(){"use strict";function a(a,b,c){function d(d,g,h,i,j,k,l,m){var n=b.defer(),o=f(g,h,i);if("incorrect_from"===o)k('There was an error while parsing your query. Please use "eslog_*" format for FROM clause.');else{if("forbidden_action"!==o)return a({url:c.ELASTIC_SEARCH_SQL+"?sql="+o,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){d.data.splice(0);var b,c,f=864e5;if(a.data.timed_out||!a.data.aggregations)r(d,h,i);else{if(c=e(g),null===c)return k("There was an error while parsing your query. Please use GROUP BY clause properly."),n.resolve(),null;a.data.aggregations[c].buckets.forEach(function(a){for(;b&&a.key-b>f;)d.data.push([b+f,0]),b+=f;d.data.push([a.key,a.doc_count]),b=a.key})}m&&m(),l&&l(c.startsWith("date_histogram")?"line":"column"),j&&j.hideLoading(),n.resolve()},function(a){var b=a.data.error;404===a.status&&"no such index"===b.reason?k("Could not find data on "+b.index):500===a.status&&k("There was an error while parsing your query. Please check your query syntax"),n.reject()}),n.promise;k("Only SELECT query is allowed.")}}function e(a){var b=a.substring(a.toLowerCase().indexOf("group by")+9,a.length);return b.startsWith("date_histogram")?b.replace(/['"]/g,""):b.length>a.length-9?null:b}function f(a,b,c){var d,e;return a.toLowerCase().startsWith("select")?-1===a.toLowerCase().indexOf("lclog_all")?a.toLowerCase():(e="lclog_all",d=i(b,c),a.toLowerCase().replace(e,d)):"forbidden_action"}function g(a,b,c,d,e,f,g,i){var k="SELECT count(*)";return k+=h(b),k+=o(a,c,d,e,b,g,i),k+=j(f)}function h(){return" FROM lclog_all"}function i(a,b){var c=new Date(a.getTime()),d=l(b),e="log-",f=k(e,l(a));c.setDate(c.getDate()+1);for(var g=c.getDate(),h=l(c),i=l(a).toString().substring(6,7);d>h;)i&&i===h.toString().substring(6,7)||(f+=","+k(e,h),i=h.toString().substring(6,7)),c.setDate(g+1),g=c.getDate(),h=l(c);return i&&i===d.toString().substring(6,7)||(f+=","+k(e,d)),f}function j(a){var b=" GROUP BY";return b+="date"===a?' date_histogram(field="@timestamp","interval"="1d")':"role"===a?" role":"device"===a?" device":"method"===a?" method":' date_histogram(field="@timestamp","interval"="1d")'}function k(a,b,c){var d=b.toString();return console.log(d),c?a+d.substring(0,4)+c+d.substring(4,6)+c+d.substring(6,8):a+d.substring(0,4)+"."+d.substring(4,6)}function l(a){return 1e4*a.getFullYear()+100*(a.getMonth()+1)+a.getDate()}function m(a){return"All"===a?"":"Android"===a?' AND app_version="a"':"iOS"===a?' AND app_version="i"':""}function n(a,b){var c=new Date(b.getTime());c.setDate(c.getDate()+1);var d=k("",l(a),"-"),e=k("",l(c),"-");return' AND @timestamp BETWEEN "'+d+'" AND "'+e+'"'}function o(a,b,c,d,e,f,g){var h=" WHERE";return h+=p(b),h+=q(c),h+=m(e),h+=n(f,g)}function p(a){return"All"===a?' (role="parent" OR role="child")':"child"===a?' role="child"':"parent"===a?' role="parent"':' (role="parent" OR role="child")'}function q(a){return"All"===a?"":"api"===a?' AND _type="serverapi"':"page"===a?' AND _type="page"':"event"===a?' AND _type="event"':"result"===a?' AND _type="result"':"quiz"===a?' AND _type="quizevent"':"payment"===a?' AND _type="payment"':"download"===a?' AND _type="download"':void 0}function r(a,b,c){for(var d=b.getTime();d<c.getTime();d+=864e5)a.data.push([d,0]);a.data.push([c.getTime(),0])}return{getCustomQueryData:d,createQueryString:g,getGroupByFilterFromQuery:e,dateRange:{startDate:null,endDate:null}}}a.$inject=["$http","$q","APP_CONFIG"],angular.module("dataDashboard.customQuery.service.CustomQuery",[]).factory("CustomQuery",a)}(),function(){"use strict";function a(a,b,c,d){function e(){f()}function f(){j.lineChartConfig.getHighcharts&&(j.linechart||(j.linechart=j.lineChartConfig.getHighcharts()),j.linechart.showLoading()),a.getDailyStatsData(j.newClasses,"newClasses",a.dateRange.startDate,a.dateRange.endDate,j.selectedDeviceFilter,j.selectedRoleFilter,j.selectedCountryFilter,j.linechart),a.getDailyStatsData(j.deletedClasses,"deletedClasses",a.dateRange.startDate,a.dateRange.endDate,j.selectedDeviceFilter,j.selectedRoleFilter,j.selectedCountryFilter,j.linechart),j.currentFilter.device=j.selectedDeviceFilter,j.currentFilter.country=j.selectedCountryFilter}function g(b){"New Classes"===b?c.downloadCSV(j.newClasses,!1,"daily_new_classes_"+a.dateRange.startDate.toLocaleDateString().replace(/[\.\ ]/g,"")+"-"+a.dateRange.endDate.toLocaleDateString().replace(/[\.\ ]/g,"")+"_by_device-"+j.currentFilter.device+"_country-"+j.currentFilter.country+".csv"):"Deleted Classes"===b&&c.downloadCSV(j.deletedClasses,!1,"daily_deleted_classes_"+a.dateRange.startDate.toLocaleDateString().replace(/[\.\ ]/g,"")+"-"+a.dateRange.endDate.toLocaleDateString().replace(/[\.\ ]/g,"")+"_by_device-"+j.currentFilter.device+"_country-"+j.currentFilter.country+".csv")}function h(a){j.selectedDeviceFilter=a}function i(a){j.selectedCountryFilter=a}var j=this;j.getAverage=b.getAverage,j.getMinimum=b.getMinimum,j.getMaximum=b.getMaximum,j.getSum=b.getSum,j.selectedRoleFilter="teacher",j.selectedDeviceFilter="All",j.selectedCountryFilter="All",j.currentFilter={device:"All",country:"All"},j.availableDevices=["All","Android","iOS","Web"],j.availableCountries=["All","Korea","Japan","Taiwan","USA","Canada"],j.availableDownloadOptions=["New Classes","Deleted Classes"],j.iconAliases={Android:"fa-android",iOS:"fa-apple",Web:"fa-laptop",Korea:"flag-icon-kr",Japan:"flag-icon-jp",Taiwan:"flag-icon-tw",USA:"flag-icon-us",Canada:"flag-icon-ca"},j.newClasses={name:"new classes",data:[[a.dateRange.endDate.getTime(),0]],id:"newClasses",color:d.COLORS[0]},j.deletedClasses={name:"deleted classes",data:[[a.dateRange.endDate.getTime(),0]],id:"deletedClasses",color:d.COLORS[1]},j.lineChartData=[j.newClasses,j.deletedClasses],j.lineChartConfig=new b.LineChartConfig(j.lineChartData,null,!0),j.linechart,j.selectDropdownDevice=h,j.selectDropdownCountry=i,j.updateData=f,j.fetchAndDownloadCSV=g,e()}a.$inject=["DailyStats","LinechartUtils","CSVparserUtils","APP_CONFIG"],angular.module("dataDashboard.dailyStats.controller.ClassesSchoolsStatsController",[]).controller("ClassesSchoolsStatsController",a)}(),function(){"use strict";function a(a,b){function e(){h()}function f(){p||(p=angular.element("#date-alert-msg")),l||(l=angular.element("#class-stats-update-btn")),m||(m=angular.element("#post-stats-update-btn")),n||(n=angular.element("#user-stats-update-btn")),o||(o=angular.element("#visits-stats-update-btn")),q.dateRange.endDate-q.dateRange.startDate>26784e5?g(r):(p.addClass("hide"),b(function(){l.triggerHandler("click"),m.triggerHandler("click"),n.triggerHandler("click"),o.triggerHandler("click")},0),h())}function g(a){q.alertMsgContent=a,p.removeClass("hide")}function h(){p||(p=angular.element("#date-alert-msg")),q.pieChartConfig.getHighcharts&&(q.piechart||(q.piechart=q.pieChartConfig.getHighcharts()),q.piechart.showLoading()),a.getRoleProportionData(q.pieChartData,q.selectedPieSubject,a.dateRange.startDate,a.dateRange.endDate,q.piechart,g)}function i(){var a=0;return q.pieChartData.forEach(function(b){a+=b.y}),a}function j(a){return a/q.getPieChartTotal()}function k(a){q.selectedPieSubject=a,h()}var l,m,n,o,p,q=this,r=("You can't select date after "+c.getFullYear()+". "+(c.getMonth()+1)+". "+c.getDate(),"Please select date within a month range"),s={"new users":"#new-users","new posts":"#new posts",visits:"#visits"};q.dateRange={startDate:d,endDate:c},q.alertMsgContent,q.constraintDay=c,a.dateRange=q.dateRange,q.dataSubjects=Object.keys(s),q.pieChartData=[{name:"loading",y:1}],q.getPieChartTotal=i,q.getPieChartProportion=j,
q.selectedPieSubject="new users",q.selectPieDropdownSubject=k,q.pieChartConfig={options:{chart:{type:"pie"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},tooltip:{headerFormat:"",pointFormat:"<b>{point.name}: {point.y} ({point.percentage:.1f}%)</b>"}},title:{text:null},series:[{name:"proportion",data:q.pieChartData}]},q.piechart,q.triggerUpdateWithDate=f,e()}var b=new Date,c=new Date(b.getTime());c.setDate(c.getDate()-1);var d=new Date(c.getTime());d.setDate(d.getDate()-6),a.$inject=["DailyStats","$timeout"],angular.module("dataDashboard.dailyStats.controller.DailyStatsController",[]).controller("DailyStatsController",a)}(),function(){"use strict";angular.module("dataDashboard.dailyStats",["dataDashboard.dailyStats.controller.DailyStatsController","dataDashboard.dailyStats.controller.PostStatsController","dataDashboard.dailyStats.controller.ClassesSchoolsStatsController","dataDashboard.dailyStats.controller.VisitsStatsController","dataDashboard.dailyStats.controller.UserStatsController","dataDashboard.dailyStats.service.DailyStats","dataDashboard.dailyStats.DailyStatsRouter"])}(),function(){"use strict";function a(a){a.state("dashboard.dailyStats",{templateUrl:"app/daily-stats/daily-stats.html",url:"/daily-stats",controller:"DailyStatsController",controllerAs:"dailyStatsVm"}).state("dashboard.dailyStats.main",{url:"/main",views:{"post-stats":{templateUrl:"app/daily-stats/post-stats/post-stats.html",controller:"PostStatsController",controllerAs:"postStatsVm"},"classes-schools":{templateUrl:"app/daily-stats/classes-schools/classes-schools.html",controller:"ClassesSchoolsStatsController",controllerAs:"classesSchoolsStatsVm"},visits:{templateUrl:"app/daily-stats/visits/visits.html",controller:"VisitsStatsController",controllerAs:"visitsStatsVm"},"user-stats":{templateUrl:"app/daily-stats/user-stats/user-stats.html",controller:"UserStatsController",controllerAs:"userStatsVm"}}})}a.$inject=["$stateProvider"],angular.module("dataDashboard.dailyStats.DailyStatsRouter",[]).config(a)}(),function(){"use strict";function a(a,b,c){function d(d,e,g,h,i,j,k,l){var m=b.defer(),n=f(e,g,h,i,j,k,"linechart");return a({url:c.ELASTIC_SEARCH_SQL+"?sql="+n,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){d.data.splice(0);var b,c=864e5;a.data.timed_out||!a.data.aggregations?q(d,g,h):a.data.aggregations["date_histogram(field=@timestamp,interval=1d)"].buckets.forEach(function(a){for(;b&&a.key-b>c;)d.data.push([b+c,0]),b+=c;d.data.push([a.key,"visits"===e?a.id.buckets.length:a.doc_count]),b=a.key}),l&&l.hideLoading(),m.resolve()},m.reject),m.promise}function e(d,e,g,h,i,j){var k=b.defer(),l=f(e,g,h,"All","All","All","role"),m=c.COLORS;return a({url:c.ELASTIC_SEARCH_SQL+"?sql="+l,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){d.splice(0),a.data.aggregations.role.buckets.forEach(function(a,b){d.push({name:a.key,y:a.doc_count,color:m[b]})}),i&&i.hideLoading(),k.resolve()},function(a){var b=a.data.error;"no such index"===b.reason&&j("Could not find data on "+b.index),k.reject()}),k.promise}function f(a,b,c,d,e,f,i){var j="SELECT count(*)";return j+=g(b,c),j+=m(a,e,f,d,b,c),j+=h(i,a)}function g(a,b){var c=new Date(a.getTime()),d=j(b),e="all_prd-",f=" FROM "+i(e,j(a));c.setDate(c.getDate()+1);for(var g=c.getDate(),h=j(c),k=j(a).toString().substring(6,7);d>h;)k&&k===h.toString().substring(6,7)||(f+=","+i(e,h),k=h.toString().substring(6,7)),c.setDate(g+1),g=c.getDate(),h=j(c);return k&&k===d.toString().substring(6,7)||(f+=","+i(e,d)),f}function h(a,b){var c=" GROUP BY";if("linechart"===a)c+=' date_histogram(field="@timestamp","interval"="1d")';else if("role"===a)c+=" role";else{if("country"!==a)return"";c+=" country"}return"visits"===b&&(c+=", id"),c}function i(a,b,c){var d=b.toString();return c?a+d.substring(0,4)+c+d.substring(4,6)+c+d.substring(6,8):a+d.substring(0,4)+"."+d.substring(4,6)+"."+d.substring(6,7)+"*"}function j(a){return 1e4*a.getFullYear()+100*(a.getMonth()+1)+a.getDate()}function k(a){return"All"===a?"":"Android"===a?' AND device="android.event"':"iOS"===a?' AND device="ios.event"':"Web"===a?' AND device="web.event"':""}function l(a,b){var c=new Date(b.getTime());c.setDate(c.getDate()+1);var d=i("",j(a),"-"),e=i("",j(c),"-");return' AND @timestamp BETWEEN "'+d+'" AND "'+e+'"'}function m(a,b,c,d,e,f){var g,h=" WHERE";return g=a.startsWith("deleted")?"DELETE":"POST",h+=" code=200","visits"!==a&&(h+=' AND method="'+g+'"',h+=n(a)),h+=o(b),h+=p(c),h+=k(d),h+=l(e,f)}function n(a){return"newUsers"===a||"new users"===a?' AND (api="users" AND api<>"mobile_device" AND api<>"pincode" AND api<>"email_verification" AND api<>"favorited_classes" AND api<>"mobile_activation")':"deletedUsers"===a||"deleted users"===a?' AND (api="users" AND api<>"mobile_device" AND api<>"favorites" AND api<>"waiting_classes" AND api<>"friends_sent" AND api<>"friends" AND api<>"friends_received" AND api<>"favorited_classes" AND api<>"invited_classes")':"newClasses"===a||"new classes"===a?' AND (api="classes" AND api<>"noticeboard" AND api<>"topics" AND api<>"administrators" AND api<>"tingboard")':"deletedClasses"===a||"deleted classes"===a?' AND (api="classes" AND api<>"members" AND api<>"announcement" AND api<>"member_candidates" AND api<>"ting_received" AND api<>"administrators" AND api<>"topics")':"newPosts"===a||"new posts"===a?' AND api="https://www.classting.com/api/posts"':"visits"===a?' AND api="https://www.classting.com/api/sessions"':""}function o(a){return"All"===a?' AND (role="teacher" OR role="student" OR role="parent")':"teacher"===a?' AND role="teacher"':"student"===a?' AND role="student"':"parent"===a?' AND role="parent"':' AND (role="teacher" OR role="student" OR role="parent")'}function p(a){return"All"===a?"":"Korea"===a?' AND country="KR"':"Japan"===a?' AND country="JP"':"Taiwan"===a?' AND country="TW"':"USA"===a?' AND country="US"':"Canada"===a?' AND country="CA"':void 0}function q(a,b,c){for(var d=b.getTime();d<c.getTime();d+=864e5)a.data.push([d,0]);a.data.push([c.getTime(),0])}return{getDailyStatsData:d,getRoleProportionData:e,dateRange:{startDate:null,endDate:null}}}a.$inject=["$http","$q","APP_CONFIG"],angular.module("dataDashboard.dailyStats.service.DailyStats",[]).factory("DailyStats",a)}(),function(){"use strict";function a(a,b,c,d){function e(){f()}function f(){k.lineChartConfig.getHighcharts&&(k.linechart||(k.linechart=k.lineChartConfig.getHighcharts()),k.linechart.showLoading()),a.getDailyStatsData(k.newPosts,"newPosts",a.dateRange.startDate,a.dateRange.endDate,k.selectedDeviceFilter,k.selectedRoleFilter,k.selectedCountryFilter,k.linechart),k.currentFilter.role=k.selectedRoleFilter,k.currentFilter.device=k.selectedDeviceFilter,k.currentFilter.country=k.selectedCountryFilter}function g(){c.downloadCSV(k.newPosts,!1,"daily_new_posts_"+a.dateRange.startDate.toLocaleDateString().replace(/[\.\ ]/g,"")+"-"+a.dateRange.endDate.toLocaleDateString().replace(/[\.\ ]/g,"")+"_by_device-"+k.currentFilter.device+"_role-"+k.currentFilter.role+"_country-"+k.currentFilter.country+".csv")}function h(a){k.selectedRoleFilter=a}function i(a){k.selectedDeviceFilter=a}function j(a){k.selectedCountryFilter=a}var k=this;k.getAverage=b.getAverage,k.getMinimum=b.getMinimum,k.getMaximum=b.getMaximum,k.getSum=b.getSum,k.selectedRoleFilter="All",k.selectedDeviceFilter="All",k.selectedCountryFilter="All",k.currentFilter={role:"All",device:"All",country:"All"},k.availableRoles=["All","teacher","student","parent"],k.availableDevices=["All","Android","iOS","Web"],k.availableCountries=["All","Korea","Japan","Taiwan","USA","Canada"],k.iconAliases={Android:"fa-android",iOS:"fa-apple",Web:"fa-laptop",Korea:"flag-icon-kr",Japan:"flag-icon-jp",Taiwan:"flag-icon-tw",USA:"flag-icon-us",Canada:"flag-icon-ca"},k.newPosts={name:"new posts",data:[[a.dateRange.endDate.getTime(),0]],id:"newPosts",color:d.COLORS[4]},k.lineChartData=[k.newPosts],k.lineChartConfig=new b.LineChartConfig(k.lineChartData),k.linechart,k.selectDropdownRole=h,k.selectDropdownDevice=i,k.selectDropdownCountry=j,k.updateData=f,k.fetchAndDownloadCSV=g,e()}a.$inject=["DailyStats","LinechartUtils","CSVparserUtils","APP_CONFIG"],angular.module("dataDashboard.dailyStats.controller.PostStatsController",[]).controller("PostStatsController",a)}(),function(){"use strict";function a(a,b,c,d){function e(){f()}function f(){k.lineChartConfig.getHighcharts&&(k.linechart||(k.linechart=k.lineChartConfig.getHighcharts()),k.linechart.showLoading()),a.getDailyStatsData(k.newUsers,"newUsers",a.dateRange.startDate,a.dateRange.endDate,k.selectedDeviceFilter,k.selectedRoleFilter,k.selectedCountryFilter,k.linechart),a.getDailyStatsData(k.deletedUsers,"deletedUsers",a.dateRange.startDate,a.dateRange.endDate,k.selectedDeviceFilter,k.selectedRoleFilter,k.selectedCountryFilter,k.linechart),k.currentFilter.role=k.selectedRoleFilter,k.currentFilter.device=k.selectedDeviceFilter,k.currentFilter.country=k.selectedCountryFilter}function g(b){"New Users"===b?c.downloadCSV(k.newUsers,!1,"daily_new_users_"+a.dateRange.startDate.toLocaleDateString().replace(/[\.\ ]/g,"")+"-"+a.dateRange.endDate.toLocaleDateString().replace(/[\.\ ]/g,"")+"_by_device-"+k.currentFilter.device+"_role-"+k.currentFilter.role+"_country-"+k.currentFilter.country+".csv"):"Deleted Users"===b&&c.downloadCSV(k.deletedUsers,!1,"daily_deleted_users_"+a.dateRange.startDate.toLocaleDateString().replace(/[\.\ ]/g,"")+"-"+a.dateRange.endDate.toLocaleDateString().replace(/[\.\ ]/g,"")+"_by_device-"+k.currentFilter.device+"_role-"+k.currentFilter.role+"_country-"+k.currentFilter.country+".csv")}function h(a){k.selectedRoleFilter=a}function i(a){k.selectedDeviceFilter=a}function j(a){k.selectedCountryFilter=a}var k=this;k.getAverage=b.getAverage,k.getMinimum=b.getMinimum,k.getMaximum=b.getMaximum,k.getSum=b.getSum,k.selectedRoleFilter="All",k.selectedDeviceFilter="All",k.selectedCountryFilter="All",k.currentFilter={role:"All",device:"All",country:"All"},k.availableRoles=["All","teacher","student","parent"],k.availableDevices=["All","Android","iOS","Web"],k.availableCountries=["All","Korea","Japan","Taiwan","USA","Canada"],k.availableDownloadOptions=["New Users","Deleted Users"],k.iconAliases={Android:"fa-android",iOS:"fa-apple",Web:"fa-laptop",Korea:"flag-icon-kr",Japan:"flag-icon-jp",Taiwan:"flag-icon-tw",USA:"flag-icon-us",Canada:"flag-icon-ca"},k.newUsers={name:"new users",data:[[a.dateRange.endDate.getTime(),0]],id:"newUsers",color:d.COLORS[3]},k.deletedUsers={name:"deleted users",data:[[a.dateRange.endDate.getTime(),0]],id:"deletedUsers",color:d.COLORS[2]},k.lineChartData=[k.newUsers,k.deletedUsers],k.lineChartConfig=new b.LineChartConfig(k.lineChartData,null,!0),k.linechart,k.selectDropdownRole=h,k.selectDropdownDevice=i,k.selectDropdownCountry=j,k.updateData=f,k.fetchAndDownloadCSV=g,e()}a.$inject=["DailyStats","LinechartUtils","CSVparserUtils","APP_CONFIG"],angular.module("dataDashboard.dailyStats.controller.UserStatsController",[]).controller("UserStatsController",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){g()}function g(){l.lineChartConfig.getHighcharts&&(l.linechart||(l.linechart=l.lineChartConfig.getHighcharts()),l.linechart.showLoading()),b.getDailyActiveUsersData(l.visits,a.dateRange.startDate,a.dateRange.endDate,l.selectedDeviceFilter,l.selectedRoleFilter,l.selectedCountryFilter,l.selectedActivenessCnt,l.linechart),l.currentFilter.role=l.selectedRoleFilter,l.currentFilter.device=l.selectedDeviceFilter,l.currentFilter.country=l.selectedCountryFilter}function h(){d.downloadCSV(l.visits,!1,"daily_visits_"+a.dateRange.startDate.toLocaleDateString().replace(/[\.\ ]/g,"")+"-"+a.dateRange.endDate.toLocaleDateString().replace(/[\.\ ]/g,"")+"_by_device-"+l.currentFilter.device+"_role-"+l.currentFilter.role+"_country-"+l.currentFilter.country+".csv")}function i(a){l.selectedRoleFilter=a}function j(a){l.selectedDeviceFilter=a}function k(a){l.selectedCountryFilter=a}var l=this;l.getAverage=c.getAverage,l.getMinimum=c.getMinimum,l.getMaximum=c.getMaximum,l.getSum=c.getSum,l.selectedRoleFilter="all",l.selectedDeviceFilter="all",l.selectedCountryFilter="all",l.selectedActivenessCnt=1,l.currentFilter={role:"all",device:"all",country:"all"},l.availableRoles=["all","student","teacher","parent"],l.availableDevices=["all","android","ios","web"],l.availableCountries=["all","kr","jp","us","tw","ca"],l.iconAliases={android:"fa-android",ios:"fa-apple",web:"fa-laptop",kr:"flag-icon-kr",jp:"flag-icon-jp",tw:"flag-icon-tw",us:"flag-icon-us",ca:"flag-icon-ca"},l.visits={name:"DAU",data:[],id:"DAU",color:e.COLORS[6]},l.lineChartData=[l.visits],l.lineChartConfig=new c.LineChartConfig(l.lineChartData),l.linechart,l.selectDropdownRole=i,l.selectDropdownDevice=j,l.selectDropdownCountry=k,l.updateData=g,l.fetchAndDownloadCSV=h,f()}a.$inject=["DailyStats","ActiveUsers","LinechartUtils","CSVparserUtils","APP_CONFIG"],angular.module("dataDashboard.dailyStats.controller.VisitsStatsController",[]).controller("VisitsStatsController",a)}(),function(){"use strict";function a(a,e,f,g,h,i){function j(){l(),m()}function k(a){return(v.currentPage-1)*v.pageSize+a}function l(){a.getDownloadedData(v.downloadedCardForLineChart,v.selectedRange,v.selectedPublisherFilter,v.selectedPaidFilter,v.dateRange.startDate,v.dateRange.endDate).then(function(a){"success"===a.name&&n()})}function m(){a.getPublisherKeys(v.availablePublishers,v.dateRange.startDate,v.dateRange.endDate)}function n(){v.reversedData=[],v.reversedData=v.downloadedCardForLineChart.data.reverse(),v.totalItem=v.reversedData.length-1,o(1)}function o(a){v.currentPage=a,v.reversedDataContainer=[];for(var b=(v.currentPage-1)*v.pageSize,c=b;c<b+v.pageSize&&0!==v.reversedData.length;c++){if(c===v.totalItem){v.reversedDataContainer.push([v.reversedData[c][0],v.reversedData[c][1],"-"]);break}v.reversedDataContainer.push([v.reversedData[c][0],v.reversedData[c][1],v.reversedData[c][1]-v.reversedData[c+1][1],(v.reversedData[c][1]-v.reversedData[c+1][1])/v.reversedData[c+1][1]])}}function p(a){v.selectedRange=a,l()}function q(){for(var a=new jsPDF("p","pt"),b=["Date","Downloaded Cards","Change Net / %"],c=[],d=0;d<v.reversedData.length;d++){if(d===v.reversedData.length-1){c.push([r(new Date(v.reversedData[d][0])),v.reversedData[d][1],v.reversedData[d][1],"-"]);break}c.push([r(new Date(v.reversedData[d][0])),v.reversedData[d][1],(v.reversedData[d][1]-v.reversedData[d+1][1]).toString()+" / "+(Math.round((v.reversedData[d][1]-v.reversedData[d+1][1])/v.reversedData[d+1][1]*100)/100).toString()+" %"])}a.autoTable(b,c,{theme:"grid"}),a.save("table.pdf")}function r(a){var b=a.getFullYear().toString(),c=(a.getMonth()+1).toString(),d=a.getDate().toString();return(b+"-"+(c[1]?c:"0"+c[0])+"-"+(d[1]?d:"0"+d[0])).toString()}function s(a){var b,c=[];b=["Date","downloaded Cards","Change Net/%"],a.forEach(function(a,b){var d=[];d[0]=a[0],d[1]=a[1],d[2]=a[2]+"/"+(100*a[3]).toFixed(2)+"%",c.push(d)}),i.downloadCSV2(c,!1,"downloaded_cards_"+v.selectedRange+".csv",b)}function t(a){return a=u(a),6===a?{color:"blue"}:0===a?{color:"red"}:{color:"black"}}function u(a){var b=new Date(a);return b.getDay()}var v=this;v.currentPage=1,v.pageSize=20,v.totalItem=0,v.dateRange={startDate:c,endDate:b},v.dateRangePieChart={startDate:d,endDate:b},v.availableRanges=["daily","weekly","monthly"],v.availablePaid=["free","paid"],v.availablePublishers=[],v.selectedRange="daily",v.selectedPaidFilter="all",v.selectedPublisherFilter="-1",v.downloadedCardForLineChart={name:"Downloaded Cards",data:[[(new Date).getTime(),0]],id:"downloaded-cards",color:g.COLORS[9]},v.reversedData,v.reversedDataContainer=[],v.lineChartData=[v.downloadedCardForLineChart],v.lineChartConfig=new e.LineChartConfig(v.lineChartData,null,!0),v.lineChartFilter=l,v.selectDropdownRange=p,v.getDateColor=t,v.getTableIndex=k,v.pageChanged=o,v.fetchAndDownloadCSV=s,v.exportPDF=q,j()}var b=new Date,c=new Date(new Date(b).setMonth(b.getMonth()-1)),d=new Date("2015-11-01");a.$inject=["DownloadedCard","LinechartUtils","PiechartUtils","APP_CONFIG","$filter","CSVparserUtils"],angular.module("dataDashboard.downloadedCard.controller.DownloadedCardController",[]).controller("DownloadedCardController",a)}(),function(){"use strict";angular.module("dataDashboard.downloadedCard",["dataDashboard.downloadedCard.controller.DownloadedCardController","dataDashboard.downloadedCard.service.DownloadedCard","dataDashboard.downloadedCard.DownloadedCardRouter"])}(),function(){"use strict";function a(a){a.state("dashboard.downloadedCard",{templateUrl:"app/downloaded-card/downloaded-card.html",url:"/downloaded-card",controller:"DownloadedCardController",controllerAs:"downloadedCardVm"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.downloadedCard.DownloadedCardRouter",[]).config(a)}(),function(){"use strict";function a(a,d,e,f){function g(e,g,h,k,l,m){var n,o=d.defer(),p=j(g,h,k,l,m);return a({url:f.ELASTIC_SEARCH_SQL+"?sql="+p,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){a.data.timed_out||(e.data.splice(0),a.data.aggregations.timestamp.buckets.forEach(function(a){var d;"daily"===g?n=0:"weekly"===g?n=6:"monthly"===g&&(d=new Date(new Date(a.key).getFullYear(),new Date(a.key).getMonth()+1,0,12,0,0)),"monthly"!==g&&(d=i(a.key)+n*b),d>c&&(d=c);var f=0;a.user_id.buckets.forEach(function(a){f+=a.card_id.buckets.length}),e.data.push([d,parseInt(f,10)||0])})),o.resolve({name:"success"})},o.reject),o.promise}function h(b,c,e){var g=d.defer(),h="SELECT publisher_id"+k(c,e)+" GROUP BY publisher_id";return a({url:f.ELASTIC_SEARCH_SQL+"?sql="+h,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){!a.data.timed_out&&a.data.aggregations&&(b.splice(0),b.push(-1),a.data.aggregations.publisher_id.buckets.forEach(function(a){-1===b.indexOf(a.key)&&b.push(a.key)})),g.resolve()},g.reject),g.promise}function i(a){var b=new Date(a).setHours(12,0,0,0);return new Date(b).getTime()}function j(a,b,c,d,e){var f="SELECT count(*)";return f+=k(d,e),f+=l(b,d,e),f+=o(a)}function k(a,b){var c=new Date(a.getTime()),d=q(b),e=p(q(a)),f=" FROM "+e;c.setDate(c.getDate()+1);for(var g,h=c.getDate(),i=q(c),j=q(a).toString().substring(6,7),k=e;d>i;)g=p(i),k!==g&&(f+=","+p(i),j=i.toString().substring(6,7)),c.setDate(h+1),h=c.getDate(),i=q(c),k=g;return g=p(i),k!==g&&(f+=","+p(d)),f}function l(a,b,c){var d=' WHERE _type="download"';return d+=n(a),d+=m(b,c)}function m(a,b){var c=new Date(b.getTime());c.setDate(c.getDate()+1);var d=p(q(a),"-"),e=p(q(c),"-");return' AND @timestamp BETWEEN "'+d+'" AND "'+e+'"'}function n(a){return"-1"===a?"":" AND publisher_id="+a}function o(a){return a="daily"===a?"1d":"weekly"===a?"7d":"1M",' GROUP BY date_histogram("alias"="timestamp", field="@timestamp","interval"="'+a+'"), user_id, card_id'}function p(a,b){var c=a.toString();return b?c.substring(0,4)+b+c.substring(4,6)+b+c.substring(6,8):"log-"+c.substring(0,4)+"."+c.substring(4,6)}function q(a){return 1e4*a.getFullYear()+100*(a.getMonth()+1)+a.getDate()}return{getDownloadedData:g,getPublisherKeys:h}}var b=864e5,c=(new Date).setHours(12,0,0,0);a.$inject=["$http","$q","$filter","APP_CONFIG"],angular.module("dataDashboard.downloadedCard.service.DownloadedCard",[]).factory("DownloadedCard",a)}(),function(){"use strict";function a(a){a.state("dashboard.home",{url:"/home",controller:"MainController",templateUrl:"app/main/home.html"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.main.HomeRouter",[]).config(a)}(),function(){"use strict";function a(a,b,c){}a.$inject=["$position","$scope","$rootScope"],angular.module("dataDashboard.main.controller.MainController",[]).controller("MainController",a)}(),function(){"use strict";angular.module("dataDashboard.main",["dataDashboard.main.controller.MainController","dataDashboard.main.MainRouter","dataDashboard.main.HomeRouter"])}(),function(){"use strict";function a(a){a.state("dashboard",{url:"/dashboard",templateUrl:"app/main/main.html"}).state("404",{templateUrl:"app/main/404.html"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.main.MainRouter",[]).config(a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){i.tableData={},c.convertParsedCSVDataToOverviewTable(i.tableData,i.csvSource.androidCountryStats,j),c.convertParsedCSVDataToItemSpecificSeries(i.lineChartData,i.csvSource.androidCountryStats,j,i.selectedCountry),i.availableCountries=Object.keys(i.tableData)}function h(a){i.selectedCountry=a,c.convertParsedCSVDataToItemSpecificSeries(i.lineChartData,i.csvSource.androidCountryStats,j,a)}var i=this,j=[4,5,6],k=(new Date).getTime(),l={"Daily Device Installs":"#daily-device-installs","Daily Device Uninstalls":"#daily-device-uninstalls","Daily Device Upgrades":"#daily-device-upgrades"};i.dataSubjects=Object.keys(l),i.getAverage=b.getAverage,i.getMinimum=b.getMinimum,i.getMaximum=b.getMaximum,i.getSum=b.getSum,i.selectedCountry="KR",i.availableCountries,i.selectDropdownCountry=h,i.dailyDeviceInstalls={name:"Daily Device Installs",data:[[k,0]],id:"dailyDeviceInstalls",color:e.COLORS[0]},i.dailyDeviceUninstalls={name:"Daily Device Uninstalls",data:[[k,0]],id:"dailyDeviceUninstalls",color:e.COLORS[1]},i.dailyDeviceUpgrades={name:"Daily Device Upgrades",data:[[k,0]],id:"dailyDeviceUpgrades",color:e.COLORS[2]},i.lineChartData=[i.dailyDeviceInstalls,i.dailyDeviceUninstalls,i.dailyDeviceUpgrades],i.tableData={},i.csvSource=f.$parent.mobileStoreStatsVm.csvData,i.lineChartConfig=new b.LineChartConfigForCSV(i.lineChartData,!0),i.updateData=g,i.predicate="Daily Device Installs",i.convertObjectToArray=d.convertObjectToArray}a.$inject=["MobileStoreStats","LinechartUtils","CSVparserUtils","CommonUtils","APP_CONFIG","$scope"],angular.module("dataDashboard.mobileStoreStats.controller.AndroidCountryStatsController",[]).controller("AndroidCountryStatsController",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){c.convertParsedCSVDataToHighchartsSeries(j.lineChartData,j.csvSource.androidInstallsOverview,l),i()}function g(){return j.dataSubjects.indexOf(j.selectedSubject)}function h(a){j.selectedSubject=a}function i(){j.reverseLineChartData=angular.copy(j.lineChartData),j.reverseLineChartData[0].data.reverse(),j.reverseLineChartData[1].data.reverse(),j.reverseLineChartData[2].data.reverse()}var j=this,k=(new Date).getTime(),l=[2,6,7],m={"Current Device Installs":"#current-device-installs","Current User Installs":"#current-user-installs","Total User Installs":"#total-user-installs"};j.dataSubjects=Object.keys(m),j.getAverage=b.getAverage,j.getMinimum=b.getMinimum,j.getMaximum=b.getMaximum,j.getSum=b.getSum,j.selectedSubject="Current Device Installs",j.currentDeviceInstalls={name:"Current Device Installs",data:[[k,0]],id:"currentDeviceInstalls",color:d.COLORS[3]},j.currentUserInstalls={name:"Current User Installs",data:[[k,0]],id:"currentUserInstalls",color:d.COLORS[4],visible:!1},j.totalUserInstalls={name:"Total User Installs",data:[[k,0]],id:"totalUserInstalls",color:d.COLORS[5],visible:!1},j.lineChartData=[j.currentDeviceInstalls,j.currentUserInstalls,j.totalUserInstalls],j.reverseLineChartData,j.csvSource=e.$parent.mobileStoreStatsVm.csvData,j.lineChartConfig=new b.LineChartConfigForCSV(j.lineChartData,!0),j.updateData=f,j.selectDropdownSubject=h,j.getSubjectIndex=g}a.$inject=["MobileStoreStats","LinechartUtils","CSVparserUtils","APP_CONFIG","$scope"],angular.module("dataDashboard.mobileStoreStats.controller.AndroidCumulativeStatsController",[]).controller("AndroidCumulativeStatsController",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){c.convertParsedCSVDataToHighchartsSeries(g.lineChartData,g.csvSource.androidInstallsOverview,i)}var g=this,h=(new Date).getTime(),i=[3,4,5],j={"Daily Device Installs":"#daily-device-installs","Daily Device Uninstalls":"#daily-device-uninstalls","Daily Device Upgrades":"#daily-device-upgrades"};g.dataSubjects=Object.keys(j),g.getAverage=b.getAverage,g.getMinimum=b.getMinimum,g.getMaximum=b.getMaximum,g.getSum=b.getSum,g.dailyDeviceInstalls={name:"Daily Device Installs",data:[[h,0]],id:"dailyDeviceInstalls",color:d.COLORS[6]},g.dailyDeviceUninstalls={name:"Daily Device Uninstalls",data:[[h,0]],id:"dailyDeviceUninstalls",color:d.COLORS[7]},g.dailyDeviceUpgrades={name:"Daily Device Upgrades",data:[[h,0]],id:"dailyDeviceUpgrades",color:d.COLORS[8],visible:!1},g.lineChartData=[g.dailyDeviceInstalls,g.dailyDeviceUninstalls,g.dailyDeviceUpgrades],g.csvSource=e.$parent.mobileStoreStatsVm.csvData,g.lineChartConfig=new b.LineChartConfigForCSV(g.lineChartData,!0),g.updateData=f}a.$inject=["MobileStoreStats","LinechartUtils","CSVparserUtils","APP_CONFIG","$scope"],angular.module("dataDashboard.mobileStoreStats.controller.AndroidDailyDeviceStatsController",[]).controller("AndroidDailyDeviceStatsController",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){c.convertParsedCSVDataToHighchartsSeries(g.lineChartData,g.csvSource.androidInstallsOverview,h)}var g=this,h=[8,9],i=(new Date).getTime(),j={"Daily User Installs":"#daily-user-installs","Daily User Uninstalls":"#daily-user-uninstalls"};g.dataSubjects=Object.keys(j),g.getAverage=b.getAverage,g.getMinimum=b.getMinimum,g.getMaximum=b.getMaximum,g.getSum=b.getSum,g.dailyUserInstalls={name:"Daily User Installs",data:[[i,0]],id:"dailyUserInstalls",color:d.COLORS[9]},g.dailyUserUninstalls={name:"Daily User Uninstalls",data:[[i,0]],id:"dailyUserUninstalls",color:d.COLORS[10]},g.lineChartData=[g.dailyUserInstalls,g.dailyUserUninstalls],g.csvSource=e.$parent.mobileStoreStatsVm.csvData,g.lineChartConfig=new b.LineChartConfigForCSV(g.lineChartData,!0),g.updateData=f}a.$inject=["MobileStoreStats","LinechartUtils","CSVparserUtils","APP_CONFIG","$scope"],angular.module("dataDashboard.mobileStoreStats.controller.AndroidDailyUserStatsController",[]).controller("AndroidDailyUserStatsController",a)}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){i.tableData={},c.convertParsedCSVDataToOverviewTable(i.tableData,i.csvSource.androidLanguageStats,j),c.convertParsedCSVDataToItemSpecificSeries(i.lineChartData,i.csvSource.androidLanguageStats,j,i.selectedLanguage),i.availableLanguages=Object.keys(i.tableData)}function h(a){i.selectedLanguage=a,c.convertParsedCSVDataToItemSpecificSeries(i.lineChartData,i.csvSource.androidLanguageStats,j,a)}var i=this,j=[4,5,6],k=(new Date).getTime(),l={"Daily Device Installs":"#daily-device-installs","Daily Device Uninstalls":"#daily-device-uninstalls","Daily Device Upgrades":"#daily-device-upgrades"};i.dataSubjects=Object.keys(l),i.getAverage=b.getAverage,i.getMinimum=b.getMinimum,i.getMaximum=b.getMaximum,i.getSum=b.getSum,i.selectedLanguage="ko_KR",i.availableLanguages,i.selectDropdownLanguage=h,i.dailyDeviceInstalls={name:"Daily Device Installs",data:[[k,0]],id:"dailyDeviceInstalls",color:e.COLORS[11]},i.dailyDeviceUninstalls={name:"Daily Device Uninstalls",data:[[k,0]],id:"dailyDeviceUninstalls",color:e.COLORS[12]},i.dailyDeviceUpgrades={name:"Daily Device Upgrades",data:[[k,0]],id:"dailyDeviceUpgrades",color:e.COLORS[13],visible:!1},i.lineChartData=[i.dailyDeviceInstalls,i.dailyDeviceUninstalls,i.dailyDeviceUpgrades],i.tableData={},i.csvSource=f.$parent.mobileStoreStatsVm.csvData,i.lineChartConfig=new b.LineChartConfigForCSV(i.lineChartData,!0),i.updateData=g,i.predicate="Daily Device Installs",i.convertObjectToArray=d.convertObjectToArray}a.$inject=["MobileStoreStats","LinechartUtils","CSVparserUtils","CommonUtils","APP_CONFIG","$scope"],angular.module("dataDashboard.mobileStoreStats.controller.AndroidLanguageStatsController",[]).controller("AndroidLanguageStatsController",a)}(),function(){"use strict";function a(a,b,c,d){function e(){m(),a.getAndroidInstallsOverviewStats(u.csvData,k(),h),a.getAndroidLanguageStats(u.csvData,k(),i),a.getAndroidCountryStats(u.csvData,k(),j)}function f(b){"Android Installs Overview"===b?a.getAndroidInstallsOverviewStats(null,k(),c.downloadCSV):"Android Installs by Languages"===b?a.getAndroidLanguageStats(null,k(),c.downloadCSV):"Android Installs by Countries"===b&&a.getAndroidCountryStats(null,k(),c.downloadCSV)}function g(){a.getAndroidInstallsOverviewStats(u.csvData,k(),h),a.getAndroidLanguageStats(u.csvData,k(),i),a.getAndroidCountryStats(u.csvData,k(),j)}function h(){p||(p=angular.element("#android-daily-device-stats-update-btn")),q||(q=angular.element("#android-daily-user-stats-update-btn")),r||(r=angular.element("#android-cumulative-stats-update-btn")),d(function(){p.triggerHandler("click"),q.triggerHandler("click"),r.triggerHandler("click")},0)}function i(){s||(s=angular.element("#android-language-stats-update-btn")),d(function(){s.triggerHandler("click")},0)}function j(){t||(t=angular.element("#android-country-stats-update-btn")),d(function(){t.triggerHandler("click")},0)}function k(){return u.selectedYear.toString()+u.selectedMonth}function l(){var a=v.getMonth();return 0===a&&(a=12),10>a?"0"+a.toString():a.toString()}function m(){for(var a=x;a>w;)u.availableYears.unshift(a),a--;u.availableYears.unshift(w)}function n(a){u.selectedMonth=a}function o(a){u.selectedYear=a}var p,q,r,s,t,u=this,v=new Date,w=2015,x=0===v.getMonth()?v.getFullYear()-1:v.getFullYear();u.availableMonths=["01","02","03","04","05","06","07","08","09","10","11","12"],u.availableYears=[],u.monthNames={"01":"January","02":"February","03":"March","04":"April","05":"May","06":"June","07":"July","08":"August","09":"September",10:"October",11:"November",12:"December"},u.availableDownloadOptions=["Android Installs Overview","Android Installs by Languages","Android Installs by Countries"],u.selectedYear=x,u.selectedMonth=l(),u.triggerUpdateForNewInstallsOverviewCSV=h,u.updateDataWithNewYearMonth=g,u.selectDropdownMonth=n,u.selectDropdownYear=o,u.csvData={androidInstallsOverview:null,androidLanguageStats:null,androidCountryStats:null},u.fetchAndDownloadCSV=f,e()}a.$inject=["MobileStoreStats","LinechartUtils","CSVparserUtils","$timeout"],angular.module("dataDashboard.mobileStoreStats.controller.MobileStoreStatsController",[]).controller("MobileStoreStatsController",a)}(),function(){"use strict";angular.module("dataDashboard.mobileStoreStats",["dataDashboard.mobileStoreStats.controller.MobileStoreStatsController","dataDashboard.mobileStoreStats.controller.AndroidDailyDeviceStatsController","dataDashboard.mobileStoreStats.controller.AndroidDailyUserStatsController","dataDashboard.mobileStoreStats.controller.AndroidCumulativeStatsController","dataDashboard.mobileStoreStats.controller.AndroidLanguageStatsController","dataDashboard.mobileStoreStats.controller.AndroidCountryStatsController","dataDashboard.mobileStoreStats.service.MobileStoreStats","dataDashboard.mobileStoreStats.MobileStoreStatsRouter"])}(),function(){"use strict";function a(a){a.state("dashboard.mobileStoreStats",{templateUrl:"app/mobile-store-stats/mobile-store-stats.html",url:"/mobile-store-stats",controller:"MobileStoreStatsController",controllerAs:"mobileStoreStatsVm"}).state("dashboard.mobileStoreStats.main",{url:"/main",views:{"android-daily-device-stats":{templateUrl:"app/mobile-store-stats/android-daily-device-stats/android-daily-device-stats.html",controller:"AndroidDailyDeviceStatsController",controllerAs:"androidDailyDeviceStatsVm"},"android-daily-user-stats":{templateUrl:"app/mobile-store-stats/android-daily-user-stats/android-daily-user-stats.html",controller:"AndroidDailyUserStatsController",controllerAs:"androidDailyUserStatsVm"},"android-cumulative-stats":{templateUrl:"app/mobile-store-stats/android-cumulative-stats/android-cumulative-stats.html",controller:"AndroidCumulativeStatsController",controllerAs:"androidCumulativeStatsVm"},"android-language-stats":{templateUrl:"app/mobile-store-stats/android-language-stats/android-language-stats.html",controller:"AndroidLanguageStatsController",controllerAs:"androidLanguageStatsVm"},"android-country-stats":{templateUrl:"app/mobile-store-stats/android-country-stats/android-country-stats.html",controller:"AndroidCountryStatsController",controllerAs:"androidCountryStatsVm"}}})}a.$inject=["$stateProvider"],
angular.module("dataDashboard.mobileStoreStats.MobileStoreStatsRouter",[]).config(a)}(),function(){"use strict";function a(a,b,c,d){function e(e,f,g){var h=b.defer();return a({url:c.S3_DATA_BUCKET+"/googleplay_reports/googleplay_reports_"+f+"/installs/installs_com.Classting_"+f+"_overview.csv",method:"GET",headers:{"Content-Type":void 0}}).then(function(a){e?(e.androidInstallsOverview=d.csvParser(a.data),g()):g(a.data,!0,"android_installs_"+f+"_overview.csv"),h.resolve()},h.reject),h.promise}function f(e,f,g){var h=b.defer();return a({url:c.S3_DATA_BUCKET+"/googleplay_reports/googleplay_reports_"+f+"/installs/installs_com.Classting_"+f+"_language.csv",method:"GET",headers:{"Content-Type":void 0}}).then(function(a){e?(e.androidLanguageStats=d.csvParser(a.data),g()):g(a.data,!0,"android_installs_"+f+"_language.csv"),h.resolve()},h.reject),h.promise}function g(e,f,g){var h=b.defer();return a({url:c.S3_DATA_BUCKET+"/googleplay_reports/googleplay_reports_"+f+"/installs/installs_com.Classting_"+f+"_country.csv",method:"GET",headers:{"Content-Type":void 0}}).then(function(a){e?(e.androidCountryStats=d.csvParser(a.data),g()):g(a.data,!0,"android_installs_"+f+"_country.csv"),h.resolve()},h.reject),h.promise}return{getAndroidInstallsOverviewStats:e,getAndroidLanguageStats:f,getAndroidCountryStats:g}}a.$inject=["$http","$q","APP_CONFIG","CSVparserUtils"],angular.module("dataDashboard.mobileStoreStats.service.MobileStoreStats",[]).factory("MobileStoreStats",a)}(),function(){"use strict";function a(a,e,f,g,h,i){function j(){l()}function k(a){return(r.currentPage-1)*r.pageSize+a}function l(){a.getMRR(r.totalDataForLineChart,"increase",r.selectedRange,r.selectedDeviceFilter,r.dateRange.startDate,r.dateRange.endDate).then(function(b){a.getMRR(r.totalDataForLineChart,"decrease",r.selectedRange,r.selectedDeviceFilter,r.dateRange.startDate,r.dateRange.endDate).then(function(b){a.getMRR2(r.totalDataForLineChart,"iamport",r.selectedRange,r.selectedDeviceFilter,r.dateRange.startDate,r.dateRange.endDate).then(function(b){a.getMRR2(r.totalDataForLineChart,"app_store",r.selectedRange,r.selectedDeviceFilter,r.dateRange.startDate,r.dateRange.endDate).then(function(a){r.reversedTotalData=r.totalDataForLineChart.data.slice().reverse(),r.totalItem=r.reversedTotalData.length-1,m(1)})})})})}function m(a){r.currentPage=a,r.reversedDataContainer=[];for(var b=(r.currentPage-1)*r.pageSize,c=b;c<b+r.pageSize&&0!==r.reversedTotalData.length;c++){if(c===r.totalItem){r.reversedDataContainer.push([r.reversedTotalData[c][0],r.reversedTotalData[c][1],"-"]);break}r.reversedDataContainer.push([r.reversedTotalData[c][0],r.reversedTotalData[c][1],r.reversedTotalData[c][1]-r.reversedTotalData[c+1][1],(r.reversedTotalData[c][1]-r.reversedTotalData[c+1][1])/(r.reversedTotalData[c+1][1]||1)])}}function n(a){r.selectedRange=a,l()}function o(a){var b,c=[];b=["date","mrr","changeNet/%"],a.forEach(function(a){var b=[];b[0]=a[0],b[1]=a[1],b[2]=a[2],c.push(b)}),i.downloadCSV2(c,!1,"mrr_"+r.selectedRange+".csv",b)}function p(a){return a=q(a),6===a?{color:"blue"}:0===a?{color:"red"}:{color:"black"}}function q(a){var b=new Date(a);return b.getDay()}var r=this;r.currentPage=1,r.pageSize=20,r.totalItem=0,r.dateRange={startDate:c,endDate:b},r.dateRangePieChart={startDate:d,endDate:b},r.availableRanges=["daily","weekly","monthly","yearly"],r.availableRoles=["student","teacher","parent"],r.availableDevices=["android","ios"],r.selectedRange="daily",r.selectedType="User Signups",r.selectedRoleFilter="all",r.selectedDeviceFilter="all",r.selectedPaidFilter="all",r.currentTotalUsers={value:0,first:0},r.totalDataForLineChart={name:"Total",data:[],id:"total",color:g.COLORS[9]},r.reversedTotalData=[],r.reversedDataContainer=[],r.lineChartData=[r.totalDataForLineChart],r.lineChartConfig=new e.LineChartConfig(r.lineChartData,null,!0),r.lineChartFilter=l,r.selectDropdownRange=n,r.getDateColor=p,r.getTableIndex=k,r.pageChanged=m,r.fetchAndDownloadCSV=o,j()}var b=new Date,c=new Date(new Date(b).setMonth(b.getMonth()-1)),d=new Date("2015-11-01");a.$inject=["MonthlyRecurringRevenue","LinechartUtils","PiechartUtils","APP_CONFIG","$filter","CSVparserUtils"],angular.module("dataDashboard.monthlyRecurringRevenue.controller.MonthlyRecurringRevenueController",[]).controller("MonthlyRecurringRevenueController",a)}(),function(){"use strict";angular.module("dataDashboard.monthlyRecurringRevenue",["dataDashboard.monthlyRecurringRevenue.controller.MonthlyRecurringRevenueController","dataDashboard.monthlyRecurringRevenue.service.MonthlyRecurringRevenue","dataDashboard.monthlyRecurringRevenue.MonthlyRecurringRevenueRouter"])}(),function(){"use strict";function a(a){a.state("dashboard.monthlyRecurringRevenue",{templateUrl:"app/monthly-recurring-revenue/monthly-recurring-revenue.html",url:"/monthly-recurring-revenue",controller:"MonthlyRecurringRevenueController",controllerAs:"monthlyRecurringRevenueVm"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.monthlyRecurringRevenue.MonthlyRecurringRevenueRouter",[]).config(a)}(),function(){"use strict";function a(a,e,f,g){function h(b,d,f,h,i,j){var m=e.defer(),n=l(d,h,f,i,j);return"increase"===d&&b.data.splice(0),a({url:g.ELASTIC_SEARCH_SQL+"?sql="+n,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){a.data.timed_out||a.data.aggregations.timestamp.buckets.forEach(function(a){var e,g=0;if(e=k(a.key,f),a.price.buckets.forEach(function(a){g+=a.key<1e3?a.key*a.doc_count*1100:a.key*a.doc_count}),"increase"===d)b.data.push([e,g]);else for(var h=0;h<b.data.length;h++)a.key+c===b.data[h][0]&&(b.data[h][1]-=g)}),m.resolve({name:"success"})},m.reject),m.promise}function i(b,d,h,i,j,k){var m=e.defer(),n=l(d,i,h,j,k);return a({url:g.ELASTIC_SEARCH_SQL+"?sql="+n,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){a.data.timed_out||a.data.aggregations.timestamp.buckets.forEach(function(a){var e=0;a.now_payment_plan.buckets.forEach(function(a){a.now_payment_children_limit.buckets.forEach(function(b){b.change_payment_plan.buckets.forEach(function(c){c.change_payment_children_limit.buckets.forEach(function(g){var h=f("price")(d,a.key.toString()+b.key.toString()),i=f("price")(d,c.key.toString()+g.key.toString());e+=(i-h)*g.doc_count})})})});for(var g=0;g<b.data.length;g++)a.key+c===b.data[g][0]&&(b.data[g][1]+=e)}),m.resolve({name:"success"})},m.reject),m.promise}function j(a){return new Date(a).getTime()}function k(a,e){var f;return f="daily"===e?a:"weekly"===e?a+6*b:"monthly"===e?new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1,0,0,0,0):a*(364*b),new Date(f).getTime()>new Date(d).getTime()&&(f=d.setHours(0,0,0,0)),new Date(f).getTime()+c}function l(a,b,c,d,e){var f="SELECT count(*) FROM log-*";return f+=m(a,b,d,e),f+=q(a,c),f+=r(),encodeURIComponent(f)}function m(a,b,c,d){var e="";return e+=n(a),e+=o(b),e+=p(c,d)}function n(a){var b;return b="increase"===a?' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND (event="_null" and now_payment_plan="_null") or (event="continue" and now_payment_plan<>"_null") and event<>"resume"':"decrease"===a?' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND event="stop"':' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND event="_null" and now_payment_plan<>"_null" and payment_method="'+a+'"'}function o(a){var b;return b="android"===a?' AND app_version="a"':"ios"===a?' AND app_version="i"':""}function p(a,c){var d=j(a),e=j(c)+b;return' AND @timestamp BETWEEN "'+d+'" AND "'+e+'"'}function q(a,b){return"increase"===a||"decrease"===a?"daily"===b?' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1d", "format"="yyyy-MM-dd", "time_zone"="+09:00"), price':"weekly"===b?' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1W", "format"="yyyy-MM-dd", "time_zone"="+09:00"), price':"monthly"===b?' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1M", "format"="yyyy-MM-dd", "time_zone"="+09:00"), price':' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1y", "format"="yyyy-MM-dd", "time_zone"="+09:00"), price':"daily"===b?' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1d", "format"="yyyy-MM-dd", "time_zone"="+09:00"), now_payment_plan, now_payment_children_limit, change_payment_plan, change_payment_children_limit':"weekly"===b?' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1W", "format"="yyyy-MM-dd", "time_zone"="+09:00"), now_payment_plan, now_payment_children_limit, change_payment_plan, change_payment_children_limit':"monthly"===b?' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1M", "format"="yyyy-MM-dd", "time_zone"="+09:00"), now_payment_plan, now_payment_children_limit, change_payment_plan, change_payment_children_limit':' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1y", "format"="yyyy-MM-dd", "time_zone"="+09:00"), now_payment_plan, now_payment_children_limit, change_payment_plan, change_payment_children_limit'}function r(){return" ORDER BY @timestamp ASC"}return{getMRR:h,getMRR2:i}}var b=864e5,c=432e5,d=new Date;a.$inject=["$http","$q","$filter","APP_CONFIG"],angular.module("dataDashboard.monthlyRecurringRevenue.service.MonthlyRecurringRevenue",[]).factory("MonthlyRecurringRevenue",a)}(),function(){"use strict";function a(a,b){function c(){d()}function d(){a.getData(g.dataContainer).then(function(a){e("count")})}function e(a){g.selectedSortType=a,"DESC"===g.selectedOrderBy?g.selectedOrderBy="ASC":g.selectedOrderBy="DESC",f()}function f(){var a=0;a="ASC"===g.selectedOrderBy?-1:1,"grade_id"===g.selectedSortType?g.dataContainer.sort(function(b,c){return 1===a?c.grade_id-b.grade_id:b.grade_id-c.grade_id}):"subject_id"===g.selectedSortType?g.dataContainer.sort(function(b,c){return 1===a?c.subject_id-b.subject_id:b.subject_id-c.subject_id}):g.dataContainer.sort(function(b,c){return 1===a?c.count-b.count:b.count-c.count})}var g=this;g.dataContainer=[],g.selectedSortType="count",g.selectedOrderBy="ASC",g.getData=d,g.sortType=e,c()}a.$inject=["PreferredSubjects","APP_CONFIG"],angular.module("dataDashboard.preferredSubjects.controller.PreferredSubjectsController",[]).controller("PreferredSubjectsController",a)}(),function(){"use strict";angular.module("dataDashboard.preferredSubjects",["dataDashboard.preferredSubjects.controller.PreferredSubjectsController","dataDashboard.preferredSubjects.service.PreferredSubjects","dataDashboard.preferredSubjects.PreferredSubjectsRouter"])}(),function(){"use strict";function a(a){a.state("dashboard.preferredSubjects",{templateUrl:"app/preferred-subjects/preferred-subjects.html",url:"/preferred-subjects",controller:"PreferredSubjectsController",controllerAs:"preferredSubjectsVm"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.preferredSubjects.PreferredSubjectsRouter",[]).config(a)}(),function(){"use strict";function a(a,b,c,d,e){function f(c){var d=b.defer(),f="/lc_db_prd/_proc/preferred_subjects";return a({url:e.BACKEND_ADDRESS+f,method:"GET",headers:{"X-DreamFactory-Application-Name":e.DSP_API_NAME,"X-DreamFactory-Api-Key":e.DSP_API_KEY}}).then(function(a){a.data.forEach(function(a){c.push({subject_id:parseInt(a.subject_id)||null,grade_id:parseInt(a.grade_id)||null,count:parseInt(a["COUNT(*)"])})}),d.resolve({name:"success"})},d.reject),d.promise}return{getData:f}}a.$inject=["$http","$q","$rootScope","$filter","APP_CONFIG"],angular.module("dataDashboard.preferredSubjects.service.PreferredSubjects",[]).factory("PreferredSubjects",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){g(),i()}function g(){a.getPublisherRate(m.publisherRates).then(function(a){"success"===a.name&&j(0)})}function h(){a.getSeriesRate(m.seriesRates,m.selectedPublisherFilter).then(function(a){"success"===a.name&&j(1)})}function i(){a.getPublisherKeys(m.availablePublishers)}function j(a){if(0===a){m.sortablePublishers=[];for(var b in m.publisherRates)m.sortablePublishers.push([b,m.publisherRates[b][0]/m.publisherRates[b][1],m.publisherRates[b][1]]);m.publisherTotalItem=m.sortablePublishers.length,m.sortablePublishers.sort(function(a,b){return b[1]-a[1]})}else{m.sortableSeries=[];for(var b in m.seriesRates)m.sortableSeries.push([b,m.seriesRates[b][0]/m.seriesRates[b][1],m.seriesRates[b][1]]);m.seriesTotalItem=m.sortableSeries.length,m.sortableSeries.sort(function(a,b){return b[1]-a[1]})}}function k(a){var b,c=[];b=[m.selectedPieChartFilter,"count","proportion"],a.forEach(function(a){var b=[];b[0]=a.name,b[1]=a.y,b[2]=(100*getPieChartProportion(a.y)).toFixed(1).toString()+"%",c.push(b)}),d.downloadCSV2(c,!1,"school_stats_"+m.selectedPieChartFilter+"_count_proportion.csv",b,!0)}function l(a){m.currentPage=a,m.totalItem=m.publisherRates.length-1,m.dataContainer=[];for(var b=(m.currentPage-1)*m.pageSize,c=b;c<b+m.pageSize&&c!==m.totalItem;c++)null===j[c].recc_end?j[c].recc_end=0:j[c].recc_end=new Date(j[c].recc_end),m.dataContainer.push([j[c].id,j[c].title,j[c].avg_rate,j[c].rate_cnt,j[c].series_id,j[c].publisher_id,j[c].grade_id,j[c].curr_type,j[c].recc_end])}var m=this;m.currentPage=1,m.pageSize=20,m.publisherTotalItem=0,m.seriesTotalItem=0,m.selectedTypeFilter="all",m.selectedPublisherId=0,m.selectedSeriesId=0,m.selectedPublisherFilter="-1",m.availablePublishers=[],m.publisherRates={},m.sortablePublishers=[],m.seriesRates={},m.sortableSeries=[],m.dataContainer=[],m.getPublisherRate=g,m.getSeriesRate=h,m.pageChanged=l,m.fetchAndDownloadCSV=k,m.pieChartConfig=new b.PieChartConfig(m.pieChartData),f()}a.$inject=["PublisherRate","PiechartUtils","APP_CONFIG","CSVparserUtils","$filter"],angular.module("dataDashboard.publisherRate.controller.PublisherRateController",[]).controller("PublisherRateController",a)}(),function(){"use strict";angular.module("dataDashboard.publisherRate",["dataDashboard.publisherRate.controller.PublisherRateController","dataDashboard.publisherRate.service.PublisherRate","dataDashboard.publisherRate.PublisherRateRouter"])}(),function(){"use strict";function a(a){a.state("dashboard.publisherRate",{templateUrl:"app/publisher-rate/publisher-rate.html",url:"/publisher-rate",controller:"PublisherRateController",controllerAs:"publisherRateVm"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.publisherRate.PublisherRateRouter",[]).config(a)}(),function(){"use strict";function a(a,b,c,d,e){function f(c){var d=b.defer(),f="SELECT avg_rate, rate_cnt, publisher_id FROM lcrate LIMIT 10000";return a({url:e.ELASTIC_SEARCH_SQL+"?sql="+f,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){for(var b in c)delete c[b];a.data.hits.hits.forEach(function(a){c.hasOwnProperty(a._source.publisher_id)?(c[a._source.publisher_id][0]+=a._source.avg_rate*a._source.rate_cnt,c[a._source.publisher_id][1]+=a._source.rate_cnt):c[a._source.publisher_id]=[a._source.avg_rate*a._source.rate_cnt,a._source.rate_cnt]}),d.resolve({name:"success"})},d.reject),d.promise}function g(c,d){var f=b.defer(),g='SELECT avg_rate, rate_cnt, series_id FROM lcrate WHERE publisher_id="'+d+'"';return a({url:e.ELASTIC_SEARCH_SQL+"?sql="+g,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){for(var b in c)delete c[b];a.data.hits.hits.forEach(function(a){c.hasOwnProperty(a._source.series_id)?(c[a._source.series_id][0]+=a._source.avg_rate*a._source.rate_cnt,c[a._source.series_id][1]+=a._source.rate_cnt):c[a._source.series_id]=[a._source.avg_rate*a._source.rate_cnt,a._source.rate_cnt]}),f.resolve({name:"success"})},f.reject),f.promise}function h(c){var d=b.defer(),f="SELECT publisher_id from lcrate GROUP BY publisher_id";return a({url:e.ELASTIC_SEARCH_SQL+"?sql="+f,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){!a.data.timed_out&&a.data.aggregations&&(c.splice(0),c.push(-1),a.data.aggregations.publisher_id.buckets.forEach(function(a){-1===c.indexOf(a.key)&&c.push(a.key)})),d.resolve()},d.reject),d.promise}return{getPublisherRate:f,getSeriesRate:g,getPublisherKeys:h}}a.$inject=["$http","$q","$rootScope","$filter","APP_CONFIG"],angular.module("dataDashboard.publisherRate.service.PublisherRate",[]).factory("PublisherRate",a)}(),function(){"use strict";function a(a,b,c,d,e){function f(){e.signin({email:g.email,password:g.password,duration:31536e4}).then(function(){b.isLoggedIn=!0,c.path("/dashboard/home")})}var g=this;g.email="",g.password="",g.signin=f,g.bar=0}a.$inject=["$http","$rootScope","$location","APP_CONFIG","SigninService"],angular.module("dataDashboard.signin.controller.SigninController",[]).controller("SigninController",a)}(),function(){"use strict";angular.module("dataDashboard.signin",["dataDashboard.signin.controller.SigninController","dataDashboard.signin.service.SigninService","dataDashboard.signin.SigninRouter"])}(),function(){"use strict";function a(a){a.state("signin",{templateUrl:"app/signin/signin.html",url:"/signin",controller:"SigninController",controllerAs:"signinVm"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.signin.SigninRouter",[]).config(a)}(),function(){"use strict";function a(a,b,c,d,e){function f(f){var g=b.defer();return a({url:e.BACKEND_ADDRESS+"/user/session/",method:"POST",headers:{"X-DreamFactory-Application-Name":e.DSP_API_NAME},data:f}).then(function(a){c.session_token=a.data.session_id,d.user=a.data;try{window.localStorage.user=JSON.stringify(a.data)}catch(b){}g.resolve()},g.reject),g.promise}function g(c){var d=b.defer();return a({url:e.BACKEND_ADDRESS+"/user/register?login=true",method:"POST",headers:{"Content-Type":void 0},data:c}).then(function(a){d.resolve()},d.reject),d.promise}function h(){a.defaults.headers.common["X-DreamFactory-Session-Token"]=void 0,c.session_token=void 0,d.user=void 0,d.isLoggedIn=!1;try{window.localStorage.user=void 0}catch(b){}}this.signin=f,this.signup=g,this.signout=h}a.$inject=["$http","$q","$cookies","$rootScope","APP_CONFIG"],angular.module("dataDashboard.signin.service.SigninService",["ngCookies"]).service("SigninService",a)}(),function(){"use strict";function a(a,d,e,f,g,h,i){function j(){l()}function k(a){return(x.currentPage-1)*x.pageSize+a}function l(){var b=0;x.lineChartDataLoop.forEach(function(c){a.getSubscribeData(c,x.selectedRange,x.selectedRoleFilter,x.selectedDeviceFilter,x.dateRange.startDate,x.dateRange.endDate).then(function(a){"success"===a.name&&(b+=1,6===b&&m(x.selectedRange))})})}function m(a){var b,c=new Date(x.trialToBasicDataForLineChart.data[0][0]),d=!1;for(x.reversedData=[],"daily"===a?b=1:"weekly"===a?b=7:"monthly"===a?c=new Date(x.dateRange.startDate.getFullYear(),x.dateRange.startDate.getMonth()+1,0,23,59,59):(b=365,c=new Date(x.dateRange.startDate.getFullYear(),11,31));c<=x.dateRange.endDate;)x.reversedData.push([c.setHours(12,0,0,0),0,0,0,0,0,0]),"monthly"===a?c=new Date(c.getFullYear(),c.getMonth()+2,0,23,59,59):(c=new Date(c.getTime()),c.setDate(c.getDate()+b)),c>x.dateRange.endDate&&(d=!0);(d!==!0||x.reversedData[x.reversedData.length-1][0]===x.dateRange.endDate.setHours(12,0,0,0)&&0!==x.reversedData.length)&&"yearly"!==a||x.reversedData.push([x.dateRange.endDate.setHours(12,0,0,0),0,0,0,0,0,0]),n()}function n(){for(var a=0;a<x.reversedData.length;a++)for(var b=0;b<x.trialToBasicDataForLineChart.data.length;b++)x.reversedData[a][0]===x.trialToBasicDataForLineChart.data[b][0]&&(x.reversedData[a][1]=x.trialToBasicDataForLineChart.data[b][1]);for(var a=0;a<x.reversedData.length;a++)for(var b=0;b<x.trialToStandardDataForLineChart.data.length;b++)x.reversedData[a][0]===x.trialToStandardDataForLineChart.data[b][0]&&(x.reversedData[a][2]=x.trialToStandardDataForLineChart.data[b][1]);for(var a=0;a<x.reversedData.length;a++)for(var b=0;b<x.trialToPremiumDataForLineChart.data.length;b++)x.reversedData[a][0]===x.trialToPremiumDataForLineChart.data[b][0]&&(x.reversedData[a][3]=x.trialToPremiumDataForLineChart.data[b][1]);for(var a=0;a<x.reversedData.length;a++)for(var b=0;b<x.basicSubscribersDataForLineChart.data.length;b++)x.reversedData[a][0]===x.basicSubscribersDataForLineChart.data[b][0]&&(x.reversedData[a][4]=x.basicSubscribersDataForLineChart.data[b][1]);for(var a=0;a<x.reversedData.length;a++)for(var b=0;b<x.premiumSubscribersDataForLineChart.data.length;b++)x.reversedData[a][0]===x.premiumSubscribersDataForLineChart.data[b][0]&&(x.reversedData[a][5]=x.premiumSubscribersDataForLineChart.data[b][1]);for(var a=0;a<x.reversedData.length;a++)for(var b=0;b<x.standardSubscribersDataForLineChart.data.length;b++)x.reversedData[a][0]===x.standardSubscribersDataForLineChart.data[b][0]&&(x.reversedData[a][6]=x.standardSubscribersDataForLineChart.data[b][1]);x.reversedData.reverse(),x.totalItem=x.reversedData.length-1,o(1)}function o(a){x.currentPage=a,x.reversedDataContainer=[];for(var b=20*(x.currentPage-1),c=b;b+20>c&&0!==x.reversedData.length;c++){if(c===x.totalItem){x.reversedDataContainer.push([x.reversedData[c][0],x.reversedData[c][1],"-","-",x.reversedData[c][2],"-","-",x.reversedData[c][3],"-","-",x.reversedData[c][4],"-","-",x.reversedData[c][5],"-","-",x.reversedData[c][6],"-","-"]);break}x.reversedDataContainer.push([x.reversedData[c][0],x.reversedData[c][1],x.reversedData[c][1]-x.reversedData[c+1][1],(x.reversedData[c][1]-x.reversedData[c+1][1])/(x.reversedData[c+1][1]||1),x.reversedData[c][2],x.reversedData[c][2]-x.reversedData[c+1][2],(x.reversedData[c][2]-x.reversedData[c+1][2])/(x.reversedData[c+1][2]||1),x.reversedData[c][3],x.reversedData[c][3]-x.reversedData[c+1][3],(x.reversedData[c][3]-x.reversedData[c+1][3])/(x.reversedData[c+1][3]||1),x.reversedData[c][4],x.reversedData[c][4]-x.reversedData[c+1][4],(x.reversedData[c][4]-x.reversedData[c+1][4])/(x.reversedData[c+1][4]||1),x.reversedData[c][5],x.reversedData[c][5]-x.reversedData[c+1][5],(x.reversedData[c][5]-x.reversedData[c+1][5])/(x.reversedData[c+1][5]||1),x.reversedData[c][6],x.reversedData[c][6]-x.reversedData[c+1][6],(x.reversedData[c][6]-x.reversedData[c+1][6])/(x.reversedData[c+1][6]||1)])}}function p(a){x.selectedRange=a,l()}function q(){a.getSubscribeProportionData(x.pieChartData,x.selectedPieChartFilter,x.dateRangePieChart.startDate,x.dateRangePieChart.endDate,x.currentPieChartUsers,x.availableTypes[0])}function r(a){x.selectedPieChartFilter=a,q()}function s(){var a=0;return x.pieChartSumData.forEach(function(b){a+=b.y}),a}function t(a){return a/s()}function u(a,b){var c,d=[];"LineChart"===b?(c=["date","trial to basic","trial to standard","trial to premium","basic subscribers","standard subscribers","premium subscribers"],a.forEach(function(a,b){var c=[];c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],d.push(c)}),h.downloadCSV2(d,!1,"subscribers__"+x.selectedRange+".csv",c)):(c=[x.selectedPieChartFilter,"count","proportion"],a.forEach(function(a){var b=[];b[0]=a.name,b[1]=a.y,b[2]=(100*t(a.y)).toFixed(1).toString()+"%",d.push(b)}),h.downloadCSV2(d,!1,"cumulative_userdata_"+x.selectedPieChartFilter+"_count_proportion.csv",c))}function v(a){return a=w(a),6===a?{color:"blue"}:0===a?{color:"red"}:{color:"black"}}function w(a){var b=new Date(a);return b.getDay()}var x=this;x.currentPage=1,x.pageSize=20,x.totalItem=0,x.dateRange={startDate:c,endDate:b},x.dateRangePieChart={startDate:c,endDate:b},x.availableRanges=["daily","weekly","monthly","yearly"],x.availableRoles=["student","teacher","parent"],x.availableDevices=["android","ios"],x.availablePieChartFilters=["type"],x.selectedPieChartFilter="type",x.selectedRange="daily",x.selectedRoleFilter="all",x.selectedDeviceFilter="all",x.selectedPaidFilter="all",x.trialToBasicDataForLineChart={name:"Trial to Basic",data:[[(new Date).getTime(),0]],id:"trial-basic",color:f.COLORS[0]},x.trialToStandardDataForLineChart={name:"Trial to Standard",data:[[(new Date).getTime(),0]],id:"trial-standard",color:f.COLORS[1]},x.trialToPremiumDataForLineChart={name:"Trial to Premium",data:[[(new Date).getTime(),0]],id:"trial-premium",color:f.COLORS[2]},x.basicSubscribersDataForLineChart={name:"Basic Subscribers",data:[[(new Date).getTime(),0]],id:"basic-subscribers",color:f.COLORS[0]},x.standardSubscribersDataForLineChart={name:"Standard Subscribers",data:[[(new Date).getTime(),0]],id:"standard-subscribers",color:f.COLORS[2]},x.premiumSubscribersDataForLineChart={name:"Premium Subscribers",data:[[(new Date).getTime(),0]],id:"premium-subscribers",color:f.COLORS[1]},x.lineChartDataLoop=[x.trialToBasicDataForLineChart,x.trialToStandardDataForLineChart,x.trialToPremiumDataForLineChart,x.basicSubscribersDataForLineChart,x.standardSubscribersDataForLineChart,x.premiumSubscribersDataForLineChart],x.reversedData=[],x.reversedDataContainer=[],x.lineChartPaidData=[x.trialToBasicDataForLineChart,x.trialToStandardDataForLineChart,x.trialToPremiumDataForLineChart],x.lineChartUpgradeData=[x.basicSubscribersDataForLineChart,x.standardSubscribersDataForLineChart,x.premiumSubscribersDataForLineChart],x.lineChartPaidDataConfig=new d.LineChartConfig(x.lineChartPaidData,null,!0),x.lineChartUpgradeDataConfig=new d.LineChartConfig(x.lineChartUpgradeData,null,!0),x.lineChartFilter=l,x.getPieChart=q,x.selectDropdownRange=p,x.getDateColor=v,x.getTableIndex=k,x.pageChanged=o,x.pieChartData=[{name:"User Signups",y:1}],x.pieChartConfig=new e.PieChartConfig(x.pieChartData),x.pieChartFilter=r,x.getPieChartProportion=t,x.fetchAndDownloadCSV=u,j()}var b=new Date,c=new Date(new Date(b).setMonth(b.getMonth()-1));a.$inject=["SubscribeUserData","LinechartUtils","PiechartUtils","APP_CONFIG","$filter","CSVparserUtils","$q"],angular.module("dataDashboard.subscribeUserData.controller.SubscribeUserDataController",[]).controller("SubscribeUserDataController",a)}(),function(){"use strict";angular.module("dataDashboard.subscribeUserData",["dataDashboard.subscribeUserData.controller.SubscribeUserDataController","dataDashboard.subscribeUserData.service.SubscribeUserData","dataDashboard.subscribeUserData.SubscribeUserDataRouter"])}(),function(){"use strict";function a(a){a.state("dashboard.subscribeUserData",{templateUrl:"app/subscribe-userdata/subscribe-userdata.html",url:"/subscribe-userdata",controller:"SubscribeUserDataController",controllerAs:"subscribeUserDataVm"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.subscribeUserData.SubscribeUserDataRouter",[]).config(a)}(),function(){"use strict";function a(a,e,f,g){function h(b,c,d,f,h,i){var j=e.defer(),m=l(b.id,d,f,c,h,i);return a({url:g.ELASTIC_SEARCH_SQL+"?sql="+m,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){b.data.splice(0),a.data.aggregations.timestamp.buckets.forEach(function(a){var d;d=k(a.key,c),b.data.push([d,a.doc_count])}),j.resolve({name:"success"})},j.reject),j.promise}function i(b,c,d,h,i,k,l,m){var n=e.defer(),p="SELECT count(*) FROM accum-stats-201*"+o(l)+" AND"+r(h,i)+"GROUP BY "+c;return a({url:g.ELASTIC_SEARCH_SQL+"?sql="+p,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){b.splice(0),k.value=0,a.data.aggregations[c].buckets.forEach(function(a,e){j(h)<=1446336e6?(b.push({name:"country"===c?f("country")(a.key):a.key,y:(d[a.key]||0)+a.doc_count,color:g.COLORS[e%11]}),k.value+=(d[a.key]||0)+a.doc_count):(b.push({name:"country"===c?f("country")(a.key):a.key,y:a.doc_count,color:g.COLORS[e%11]}),k.value+=a.doc_count)}),m&&m.hideLoading(),n.resolve({name:"success"})},n.reject),n.promise}function j(a){return new Date(a).getTime()}function k(a,e){var f;return f="daily"===e?a:"weekly"===e?a+6*b:"monthly"===e?new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1,0,23,59,59):a*(364*b),f>d&&(f=d.setHours(0,0,0,0)),f+c}function l(a,b,c,d,e,f){var g="SELECT count(*) FROM log-*";return g+=m(a,b,c,e,f),g+=s(d),g+=t(),encodeURIComponent(g)}function m(a,b,c,d,e){var f="";return f+=n(a),f+=p(b),f+=q(c),f+=r(d,e)}function n(a){var b;return"trial-basic"===a?b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND event="_null" AND change_payment_plan="basic"':"trial-standard"===a?b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND event="_null" AND change_payment_plan="standard"':"trial-premium"===a?b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND event="_null" AND change_payment_plan="premium"':"basic-subscribers"===a?b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND event="continue" AND change_payment_plan="basic"':"standard-subscribers"===a?b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND event="continue" AND change_payment_plan="standard"':"premium-subscribers"===a&&(b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND event="continue" AND change_payment_plan="premium"'),b}function o(a){var b="";return b="User Signups"===a?' WHERE _type="user"':' WHERE _type="user-del"'}function p(a){var b;return b="teacher"===a?' AND role="teacher"':"student"===a?' AND role="student"':"parent"===a?' AND role="parent"':""}function q(a){var b;return b="android"===a?' AND app_version="a"':"ios"===a?' AND app_version="i"':""}function r(a,c){var d=j(a),e=j(c)+b;return' AND @timestamp BETWEEN "'+d+'" AND "'+e+'"'}function s(a){var b;return b="daily"===a?' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1d", "format"="yyyy-MM-dd", "time_zone"="+09:00")':"weekly"===a?' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1w", "format"="yyyy-MM-dd", "time_zone"="+09:00")':"monthly"===a?' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1M", "format"="yyyy-MM-dd", "time_zone"="+09:00")':' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1y", "format"="yyyy-MM-dd", "time_zone"="+09:00")'}function t(){return" ORDER BY @timestamp ASC"}return{getSubscribeData:h,getSubscribeProportionData:i}}var b=864e5,c=432e5,d=new Date;a.$inject=["$http","$q","$filter","APP_CONFIG"],angular.module("dataDashboard.subscribeUserData.service.SubscribeUserData",[]).factory("SubscribeUserData",a)}(),function(){"use strict";function a(a,d,e,f,g,h,i){function j(){l(),m()}function k(a){return(t.currentPage-1)*t.pageSize+a}function l(){var b=0;t.lineChartDataLoop.forEach(function(c){a.getUpgradeDowngradeData(c,t.selectedRange,t.selectedRoleFilter,t.selectedDeviceFilter,t.dateRange.startDate,t.dateRange.endDate).then(function(a){"success"===a.name&&(b+=1,6===b&&m(t.selectedRange))})})}function m(a){var b,c=new Date(t.basicToStandardDataForLineChart.data[0][0]),d=!1;for(t.reversedData=[],"daily"===a?b=1:"weekly"===a?b=7:"monthly"===a?c=new Date(t.dateRange.startDate.getFullYear(),t.dateRange.startDate.getMonth()+1,0,23,59,59):(b=365,c=new Date(t.dateRange.startDate.getFullYear(),11,31));c<t.dateRange.endDate;)t.reversedData.push([c.setHours(12,0,0,0),0,0,0,0,0,0]),"monthly"===a?c=new Date(c.getFullYear(),c.getMonth()+2,0,23,59,59):(c=new Date(c.getTime()),c.setDate(c.getDate()+b)),c>t.dateRange.endDate&&(d=!0);(d!==!0||t.reversedData[t.reversedData.length-1][0]===t.dateRange.endDate.setHours(12,0,0,0)&&0!==t.reversedData.length)&&"yearly"!==a||t.reversedData.push([t.dateRange.endDate.setHours(12,0,0,0),0,0,0,0,0,0]),n()}function n(){for(var a=0;a<t.reversedData.length;a++)for(var b=0;b<t.basicToStandardDataForLineChart.data.length;b++)t.reversedData[a][0]===t.basicToStandardDataForLineChart.data[b][0]&&(t.reversedData[a][1]=t.basicToStandardDataForLineChart.data[b][1]);for(var a=0;a<t.reversedData.length;a++)for(var b=0;b<t.basicToPremiumDataForLineChart.data.length;b++)t.reversedData[a][0]===t.basicToPremiumDataForLineChart.data[b][0]&&(t.reversedData[a][2]=t.basicToPremiumDataForLineChart.data[b][1]);for(var a=0;a<t.reversedData.length;a++)for(var b=0;b<t.standardToPremiumDataForLineChart.data.length;b++)t.reversedData[a][0]===t.standardToPremiumDataForLineChart.data[b][0]&&(t.reversedData[a][3]=t.standardToPremiumDataForLineChart.data[b][1]);for(var a=0;a<t.reversedData.length;a++)for(var b=0;b<t.standardToBasicDataForLineChart.data.length;b++)t.reversedData[a][0]===t.standardToBasicDataForLineChart.data[b][0]&&(t.reversedData[a][4]=t.standardToBasicDataForLineChart.data[b][1]);
for(var a=0;a<t.reversedData.length;a++)for(var b=0;b<t.premiumdToStandardDataForLineChart.data.length;b++)t.reversedData[a][0]===t.premiumdToStandardDataForLineChart.data[b][0]&&(t.reversedData[a][5]=t.premiumdToStandardDataForLineChart.data[b][1]);for(var a=0;a<t.reversedData.length;a++)for(var b=0;b<t.premiumdToBasicDataForLineChart.data.length;b++)t.reversedData[a][0]===t.premiumdToBasicDataForLineChart.data[b][0]&&(t.reversedData[a][6]=t.premiumdToBasicDataForLineChart.data[b][1]);t.reversedData.reverse(),t.totalItem=t.reversedData.length-1,o(1)}function o(a){t.currentPage=a,t.reversedDataContainer=[];for(var b=20*(t.currentPage-1),c=b;b+20>c&&0!==t.reversedData.length;c++){if(c===t.totalItem){t.reversedDataContainer.push([t.reversedData[c][0],t.reversedData[c][1],"-","-",t.reversedData[c][2],"-","-",t.reversedData[c][3],"-","-",t.reversedData[c][4],"-","-",t.reversedData[c][5],"-","-",t.reversedData[c][6],"-","-"]);break}t.reversedDataContainer.push([t.reversedData[c][0],t.reversedData[c][1],t.reversedData[c][1]-t.reversedData[c+1][1],(t.reversedData[c][1]-t.reversedData[c+1][1])/(t.reversedData[c+1][1]||1),t.reversedData[c][2],t.reversedData[c][2]-t.reversedData[c+1][2],(t.reversedData[c][2]-t.reversedData[c+1][2])/(t.reversedData[c+1][2]||1),t.reversedData[c][3],t.reversedData[c][3]-t.reversedData[c+1][3],(t.reversedData[c][3]-t.reversedData[c+1][3])/(t.reversedData[c+1][3]||1),t.reversedData[c][4],t.reversedData[c][4]-t.reversedData[c+1][4],(t.reversedData[c][4]-t.reversedData[c+1][4])/(t.reversedData[c+1][4]||1),t.reversedData[c][5],t.reversedData[c][5]-t.reversedData[c+1][5],(t.reversedData[c][5]-t.reversedData[c+1][5])/(t.reversedData[c+1][5]||1),t.reversedData[c][6],t.reversedData[c][6]-t.reversedData[c+1][6],(t.reversedData[c][6]-t.reversedData[c+1][6])/(t.reversedData[c+1][6]||1)])}}function p(a){t.selectedRange=a,l()}function q(a,b){var c,d=[];"LineChart"===b?(c=["date","trial to basic","trial to standard","trial to premium","basic subscribers","standard subscribers","premium subscribers"],a.forEach(function(a,b){var c=[];c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[4]=a[4],c[5]=a[5],c[6]=a[6],d.push(c)}),h.downloadCSV2(d,!1,"upgrade_downgrade_"+t.selectedRange+".csv",c)):(c=[t.selectedPieChartFilter,"count","proportion"],a.forEach(function(a){var b=[];b[0]=a.name,b[1]=a.y,b[2]=(100*getPieChartProportion(a.y)).toFixed(1).toString()+"%",d.push(b)}),h.downloadCSV2(d,!1,"cumulative_userdata_"+t.selectedPieChartFilter+"_count_proportion.csv",c))}function r(a){return a=s(a),6===a?{color:"blue"}:0===a?{color:"red"}:{color:"black"}}function s(a){var b=new Date(a);return b.getDay()}var t=this;t.currentPage=1,t.pageSize=20,t.totalItem=0,t.dateRange={startDate:c,endDate:b},t.dateRangePieChart={startDate:c,endDate:b},t.availableRanges=["daily","weekly","monthly","yearly"],t.availableRoles=["student","teacher","parent"],t.availableDevices=["android","ios"],t.availablePieChartFilters=["type"],t.selectedPieChartFilter="type",t.selectedRange="daily",t.selectedRoleFilter="all",t.selectedDeviceFilter="all",t.selectedPaidFilter="all",t.basicToStandardDataForLineChart={name:"Basic to Standard",data:[[(new Date).getTime(),0]],id:"basic-standard",color:f.COLORS[0]},t.basicToPremiumDataForLineChart={name:"Basic to Premium",data:[[(new Date).getTime(),0]],id:"basic-premium",color:f.COLORS[1]},t.standardToPremiumDataForLineChart={name:"Standard to Premium",data:[[(new Date).getTime(),0]],id:"standard-premium",color:f.COLORS[2]},t.standardToBasicDataForLineChart={name:"Standard to basic",data:[[(new Date).getTime(),0]],id:"standard-basic",color:f.COLORS[0]},t.premiumdToStandardDataForLineChart={name:"Premium to Standard",data:[[(new Date).getTime(),0]],id:"premium-standard",color:f.COLORS[2]},t.premiumdToBasicDataForLineChart={name:"Premium To Basic",data:[[(new Date).getTime(),0]],id:"premium-basic",color:f.COLORS[1]},t.lineChartDataLoop=[t.basicToStandardDataForLineChart,t.basicToPremiumDataForLineChart,t.standardToPremiumDataForLineChart,t.standardToBasicDataForLineChart,t.premiumdToStandardDataForLineChart,t.premiumdToBasicDataForLineChart],t.reversedData=[],t.reversedDataContainer=[],t.lineChartUpgradeData=[t.basicToStandardDataForLineChart,t.basicToPremiumDataForLineChart,t.standardToPremiumDataForLineChart],t.lineChartDowngradeData=[t.standardToBasicDataForLineChart,t.premiumdToStandardDataForLineChart,t.premiumdToBasicDataForLineChart],t.lineChartUpgradeDataConfig=new d.LineChartConfig(t.lineChartUpgradeData,null,!0),t.lineChartDowngradeDataConfig=new d.LineChartConfig(t.lineChartDowngradeData,null,!0),t.lineChartFilter=l,t.selectDropdownRange=p,t.getDateColor=r,t.getTableIndex=k,t.pageChanged=o,t.fetchAndDownloadCSV=q,j()}var b=new Date,c=new Date(new Date(b).setMonth(b.getMonth()-1));a.$inject=["UpgradeDowngrade","LinechartUtils","PiechartUtils","APP_CONFIG","$filter","CSVparserUtils","$q"],angular.module("dataDashboard.upgradeDowngrade.controller.UpgradeDowngradeController",[]).controller("UpgradeDowngradeController",a)}(),function(){"use strict";angular.module("dataDashboard.upgradeDowngrade",["dataDashboard.upgradeDowngrade.controller.UpgradeDowngradeController","dataDashboard.upgradeDowngrade.service.UpgradeDowngrade","dataDashboard.upgradeDowngrade.UpgradeDowngradeRouter"])}(),function(){"use strict";function a(a){a.state("dashboard.upgradeDowngrade",{templateUrl:"app/upgrade-downgrade/upgrade-downgrade.html",url:"/upgrade-downgrade",controller:"UpgradeDowngradeController",controllerAs:"upgradeDowngradeVm"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.upgradeDowngrade.UpgradeDowngradeRouter",[]).config(a)}(),function(){"use strict";function a(a,e,f,g){function h(b,c,d,f,h,i){var l=e.defer(),m=k(b.id,d,f,c,h,i);return a({url:g.ELASTIC_SEARCH_SQL+"?sql="+m,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){b.data.splice(0),a.data.aggregations.timestamp.buckets.forEach(function(a){var d;d=j(a.key,c),b.data.push([d,a.doc_count])}),l.resolve({name:"success"})},l.reject),l.promise}function i(a){return new Date(a).getTime()}function j(a,e){var f;return f="daily"===e?a:"weekly"===e?a+6*b:"monthly"===e?new Date(new Date(a).getFullYear(),new Date(a).getMonth()+1,0,0,0,0):a*(364*b),new Date(f).getTime()>new Date(d).getTime()&&(f=d.setHours(0,0,0,0)),new Date(f).getTime()+c}function k(a,b,c,d,e,f){var g="SELECT count(*) FROM log-*";return g+=l(a,b,c,e,f),g+=q(d),g+=r(),encodeURIComponent(g)}function l(a,b,c,d,e){var f="";return f+=m(a),f+=n(b),f+=o(c),f+=p(d,e)}function m(a){var b;return"basic-standard"===a?b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND event="_null" AND now_payment_plan="basic" AND change_payment_plan="standard"':"basic-premium"===a?b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND event="_null" AND now_payment_plan="basic" AND change_payment_plan="premium"':"standard-premium"===a?b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND event="_null" AND now_payment_plan="standard" AND change_payment_plan="premium"':"standard-basic"===a?b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND event="_null" AND now_payment_plan="standard" AND change_payment_plan="basic"':"premium-standard"===a?b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND event="_null" AND now_payment_plan="premium" AND change_payment_plan="standard"':"premium-basic"===a&&(b=' WHERE (user_id <> "30" AND user_id <> "1475" AND user_id <> "1520") AND event="_null" AND now_payment_plan="premium" AND change_payment_plan="basic"'),b}function n(a){var b;return b="teacher"===a?' AND role="teacher"':"student"===a?' AND role="student"':"parent"===a?' AND role="parent"':""}function o(a){var b;return b="android"===a?' AND app_version="a"':"ios"===a?' AND app_version="i"':""}function p(a,b){var c=864e5,d=i(a)-c,e=i(b);return' AND @timestamp BETWEEN "'+d+'" AND "'+e+'"'}function q(a){var b;return b="daily"===a?' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1d", "format"="yyyy-MM-dd", "time_zone"="+09:00")':"weekly"===a?' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1w", "format"="yyyy-MM-dd", "time_zone"="+09:00")':"monthly"===a?' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1M", "format"="yyyy-MM-dd", "time_zone"="+09:00")':' GROUP BY date_histogram("alias"="timestamp", field="@timestamp", "interval"="1y", "format"="yyyy-MM-dd", "time_zone"="+09:00")'}function r(){return" ORDER BY @timestamp ASC"}return{getUpgradeDowngradeData:h}}var b=864e5,c=432e5,d=new Date;a.$inject=["$http","$q","$filter","APP_CONFIG"],angular.module("dataDashboard.upgradeDowngrade.service.UpgradeDowngrade",[]).factory("UpgradeDowngrade",a)}(),function(){"use strict";function a(a){function d(){e(),f()}function e(){for(var a=b.getFullYear();a<c.getFullYear();a++)h.availableYears.push(a);h.availableYears.push(c.getFullYear())}function f(){if(h.availableMonths.splice(0),parseInt(h.selectedYearFilter,10)===b.getFullYear())h.availableMonths.push(10),h.availableMonths.push(11),parseInt(h.selectedMonthFilter,10)<10&&(h.selectedMonthFilter="11");else if(parseInt(h.selectedYearFilter,10)===c.getFullYear()){for(var a=new Date(h.selectedYearFilter+"-01-01");a.getMonth()<c.getMonth();)h.availableMonths.push(a.getMonth()),a.setMonth(a.getMonth()+1);h.availableMonths.push(c.getMonth()),-1===h.availableMonths.indexOf(parseInt(h.selectedMonthFilter,10))&&(h.selectedMonthFilter=c.getMonth().toString())}else for(var d=0;12>d;d++)h.availableMonths.push(d)}function g(b){a.fetchAndDownloadActiveTeachersContacts(b,h.selectedYearFilter,h.selectedMonthFilter,h.selectedCountryFilter)}var h=this;h.availableYears=[],h.availableMonths=[],h.availableCountries=["kr","jp","us","tw"],h.selectedYearFilter=c.getFullYear().toString(),h.selectedMonthFilter=c.getMonth().toString(),h.selectedCountryFilter="all",h.selectYearFilter=f,h.fetchAndDownloadCSV=g,d()}var b=new Date("2015-11-01"),c=new Date;c.setDate(1),c.setMonth(c.getMonth()-1),a.$inject=["UserContacts"],angular.module("dataDashboard.userContacts.controller.UserContactsController",[]).controller("UserContactsController",a)}(),function(){"use strict";angular.module("dataDashboard.userContacts",["dataDashboard.userContacts.controller.UserContactsController","dataDashboard.userContacts.service.UserContacts","dataDashboard.userContacts.UserContactsRouter"])}(),function(){"use strict";function a(a){a.state("dashboard.userContacts",{templateUrl:"app/user-contacts/user-contacts.html",url:"/downloadables",controller:"UserContactsController",controllerAs:"userContactsVm"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.userContacts.UserContactsRouter",[]).config(a)}(),function(){"use strict";function a(a,b,c,d){function e(e,h,i,j){var k=b.defer(),l=g(e,h,i,j);return a({url:c.S3_DATA_BUCKET+f(e)+l,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){d.downloadCSV(a.data,!0,l),k.resolve()},k.reject),k.promise}function f(a){return"user-contacts"===a||"jp-teachers"===a?"/user_contacts/":"jp-classes"===a?"/class-links/":void 0}function g(a,b,c,d){if("user-contacts"===a){var e,f=new Date([b,parseInt(c,10)+1,"01"].join("-")),g=h(f);return f.setMonth(f.getMonth()+1),f.setDate(0),e=h(f),"active-teachers_"+g+"-"+e+"_dau_"+d+".csv"}return"jp-teachers"===a?"japanese-teachers.csv":"jp-classes"===a?"japanese-classes.csv":void 0}function h(a){return(1e4*a.getFullYear()+100*(a.getMonth()+1)+a.getDate()).toString()}return{fetchAndDownloadActiveTeachersContacts:e}}a.$inject=["$http","$q","APP_CONFIG","CSVparserUtils"],angular.module("dataDashboard.userContacts.service.UserContacts",[]).factory("UserContacts",a)}(),function(){"use strict";function a(a){function b(){i||(i=angular.element("#date-alert-msg")),j.dateRange.endDate-j.dateRange.startDate>53568e5?g(k):(i.addClass("hide"),e())}function e(){a.getUserPageFlow(j.userPageFlowData,j.userId,a.dateRange.startDate,a.dateRange.endDate,g).then(function(a){f()})}function f(){a.getUserInfo(j.userInfo,j.userId).then(function(b){a.getPaidDate(j.userInfo,j.userId).then(function(b){a.getDownloadedCount(j.userInfo,j.userId).then(function(b){a.getCompleteCount(j.userInfo,j.userId).then(function(b){a.getLastSignAt(j.userInfo,j.userId)})})})})}function g(a){j.alertMsgContent=a,i.removeClass("hide")}var h,i,j=this,k=("You can't select date after "+c.getFullYear()+". "+(c.getMonth()+1)+". "+c.getDate(),"Please select date within 2 month range");h={time:"-",cur_page:"-",prev_page:"-",user_ip:"-"},j.dateRange={startDate:d,endDate:c},j.alertMsgContent,j.constraintDay=c,a.dateRange=j.dateRange,j.userId="",j.userPageFlowData=[h],j.userInfo={},j.triggerUpdateWithDate=b,j.getUserInfo=f}var b=new Date,c=new Date(b.getTime()),d=new Date(c.getTime());d.setDate(d.getDate()-2),a.$inject=["UserPageFlow"],angular.module("dataDashboard.userPageFlow.controller.UserPageFlowController",[]).controller("UserPageFlowController",a)}(),function(){"use strict";angular.module("dataDashboard.userPageFlow",["dataDashboard.userPageFlow.controller.UserPageFlowController","dataDashboard.userPageFlow.service.UserPageFlow","dataDashboard.userPageFlow.UserPageFlowRouter"])}(),function(){"use strict";function a(a){a.state("dashboard.userPageFlow",{templateUrl:"app/user-page-flow/user-page-flow.html",url:"/user-page-flow",controller:"UserPageFlowController",controllerAs:"userPageFlowVm"})}a.$inject=["$stateProvider"],angular.module("dataDashboard.userPageFlow.UserPageFlowRouter",[]).config(a)}(),function(){"use strict";function a(a,b,c){function d(d,e,f,g,h){var i=b.defer(),k=j(e,f,g);return a({url:c.ELASTIC_SEARCH_SQL+"?sql="+k,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){d.splice(0),a.data.timed_out||0===a.data.hits.hits.length?p(d,e):a.data.hits.hits.forEach(function(a){d[d.length-1]&&(d[d.length-1].cur_page===a._source.cur_page||d[d.length-1].prev_page===a._source.prev_page)||""===a._source.cur_page||""===a._source.prev_page||(d[d.length-1]&&d[d.length-1].time.getDate()===new Date(a.sort[0]).getDate()||d.push({time:new Date(a.sort[0]),cur_page:null,prev_page:null,user_ip:null,now_payment_plan:null,app_version:null,_type:null}),d.push({time:new Date(a.sort[0]),cur_page:a._source.cur_page,prev_page:a._source.prev_page,user_ip:a._source.ip,now_payment_plan:a._source.now_payment_plan,app_version:a._source.app_version,_type:a._type}))}),i.resolve()},function(a){var b,c=a.data.error;c.startsWith("IndexMissingException")&&(b=c.substring(c.indexOf("20"),c.indexOf("]")),h("Could not find data on "+b)),i.reject()}),i.promise}function e(d,e){var f=b.defer(),g="/lc_db_prd/_table/users/"+e;return a({url:c.BACKEND_ADDRESS+g,method:"GET",headers:{"X-DreamFactory-Application-Name":c.DSP_API_NAME,"X-DreamFactory-Api-Key":c.DSP_API_KEY}}).then(function(a){d.name=a.data.name,d.created_at=new Date(a.data.created_at),d.role=a.data.role,f.resolve({name:"success"})},f.reject),f.promise}function f(d,e){var f=b.defer(),g='SELECT * FROM log-* WHERE _type="payment" and event="_null" and user_id='+e+" ORDER BY @timestamp DESC LIMIT 1";return a({url:c.ELASTIC_SEARCH_SQL+"?sql="+g,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){0!==a.data.hits.hits.length?d.paid=a.data.hits.hits[0]._source["@timestamp"]:d.paid="None",f.resolve({name:"success"})},f.reject),f.promise}function g(d,e){var f=b.defer(),g='SELECT count(distinct card_id) as count FROM log-* WHERE _type="download" and user_id='+e;return a({url:c.ELASTIC_SEARCH_SQL+"?sql="+g,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){d.downloadedCount=a.data.aggregations.count.value,f.resolve({name:"success"})},f.reject),f.promise}function h(d,e){var f=b.defer(),g='SELECT count(distinct card_id) as count FROM log-* WHERE _type="result" and user_id='+e;return a({url:c.ELASTIC_SEARCH_SQL+"?sql="+g,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){d.completeCount=a.data.aggregations.count.value,f.resolve({name:"success"})},f.reject),f.promise}function i(d,e){var f=b.defer(),g="SELECT * FROM log-* WHERE user_id="+e+" ORDER BY @timestamp DESC LIMIT 1";return a({url:c.ELASTIC_SEARCH_SQL+"?sql="+g,method:"GET",headers:{"Content-Type":void 0}}).then(function(a){0!==a.data.hits.hits.length?d.last_sign_at=a.data.hits.hits[0].sort[0]:d.paid="None",f.resolve({name:"success"})},f.reject),f.promise}function j(a,b,c){var d="SELECT * FROM log-*";return d+=k(a,b,c),d+=" ORDER BY @timestamp ASC",d+=l(b,c)}function k(a,b,c){var d=" WHERE";return d+=' user_id="'+a+'"',d+=o(b,c)}function l(a,b){return" LIMIT 10000"}function m(a,b){var c=a.toString();return b?c.substring(0,4)+b+c.substring(4,6)+b+c.substring(6,8):"log-"+c.substring(0,4)+"."+c.substring(4,6)}function n(a){return 1e4*a.getFullYear()+100*(a.getMonth()+1)+a.getDate()}function o(a,b){var c=new Date(b.getTime());c.setDate(c.getDate()+1);var d=m(n(a),"-"),e=m(n(c),"-");return' AND @timestamp BETWEEN "'+d+'" AND "'+e+'"'}function p(a,b){a.push({time:'There is no record of user "'+b+'"',prev_page:"-",cur_page:"-"})}return{getUserPageFlow:d,getUserInfo:e,getPaidDate:f,getDownloadedCount:g,getCompleteCount:h,getLastSignAt:i,dateRange:{startDate:null,endDate:null}}}a.$inject=["$http","$q","APP_CONFIG"],angular.module("dataDashboard.userPageFlow.service.UserPageFlow",[]).factory("UserPageFlow",a)}(),angular.module("dataDashboard").run(["$templateCache",function(a){"use strict";a.put("app/aarrr/aarrr.html",'<div class="row">\n  <div class="col-lg-12">\n    <h1>AARRR Analysis</h1>\n  </div>\n</div>\n\n\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <form class="form-inline">\n          <div class="form-group">\n            <label for="startDate">Range: </label>\n            <input type="date" id="start-date" class="form-control" name="startDate" ng-model="aarrrVm.startDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <label for="endDate">-</label>\n            <input type="date" id="end-date" class="form-control" name="endDate" ng-model="aarrrVm.endDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <button type="button" class="btn btn-primary" name="date-update" ng-click="aarrrVm.getData()">Go! <i class="fa fa-arrow-right fa-fw"></i></button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <div>\n      <table class="table table-striped table-bordered table-hover">\n        <thead>\n        <tr>\n          <th class="col-sm-2 clickable-thead">\n            회원가입\n          </th>\n          <th class="col-sm-2 clickable-thead">\n            카드 1개 이상 다운로드\n          </th>\n          <th class="col-sm-2 clickable-thead">\n            카드 1개 이상 완료\n          </th>\n          <th class="col-sm-2 clickable-thead">\n            가입 후 3회 이상 방문\n          </th>\n          <th class="col-sm-2 clickable-thead">\n            결제\n          </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr>\n          <td class="col-sm-2">{{aarrrVm.dataSignUpContainer.length | number}}</td>\n          <td class="col-sm-2">{{aarrrVm.dataDownloadContainer.length| number}}</td>\n          <td class="col-sm-2">{{aarrrVm.dataResultContainer.length| number}}</td>\n          <td class="col-sm-2">{{aarrrVm.dataActiveContainer.length| number}}</td>\n          <td class="col-sm-2">{{aarrrVm.dataPaymentContainer.length| number}}</td>\n        </tr>\n        <tr>\n          <td class="col-sm-2">{{aarrrVm.dataSignUpContainer.length| number}} / {{aarrrVm.dataSignUpContainer.length/aarrrVm.dataSignUpContainer.length | percentage}}</td>\n          <td class="col-sm-2">{{aarrrVm.signUpToDownload.length| number}} / {{aarrrVm.signUpToDownload.length/aarrrVm.dataSignUpContainer.length | percentage}}</td>\n          <td class="col-sm-2">{{aarrrVm.downloadToResult.length| number}} / {{aarrrVm.downloadToResult.length/aarrrVm.dataSignUpContainer.length | percentage}}</td>\n          <td class="col-sm-2">{{aarrrVm.resultToActive.length| number}} / {{aarrrVm.resultToActive.length/aarrrVm.dataSignUpContainer.length | percentage}}</td>\n          <td class="col-sm-2">{{aarrrVm.activeToPayment.length| number}} / {{aarrrVm.activeToPayment.length/aarrrVm.dataSignUpContainer.length | percentage}}</td>\n        </tr>\n\n\n        <!--<tr>-->\n          <!--<td class="col-sm-2">총 : {{aarrrVm.dataSignUpContainer.length | number}}</td>-->\n          <!--<td class="col-sm-2">총 : {{aarrrVm.dataDownloadContainer.length| number}}</td>-->\n          <!--<td class="col-sm-2">-</td>-->\n          <!--<td class="col-sm-2">-</td>-->\n          <!--<td class="col-sm-2">-</td>-->\n        <!--</tr>-->\n        <!--<tr>-->\n          <!--<td class="col-sm-2">-</td>-->\n          <!--<td class="col-sm-2">{{aarrrVm.signUpToDownload.length| number}} / {{aarrrVm.signUpToDownload.length/aarrrVm.dataSignUpContainer.length | percentage}}</td>-->\n          <!--<td class="col-sm-2">총 : {{aarrrVm.dataResultContainer.length| number}}</td>-->\n          <!--<td class="col-sm-2">-</td>-->\n          <!--<td class="col-sm-2">-</td>-->\n        <!--</tr>-->\n        <!--<tr>-->\n          <!--<td class="col-sm-2">-</td>-->\n          <!--<td class="col-sm-2">-</td>-->\n          <!--<td class="col-sm-2">{{aarrrVm.downloadToResult.length| number}} / {{aarrrVm.downloadToResult.length/aarrrVm.dataSignUpContainer.length | percentage}}</td>-->\n          <!--<td class="col-sm-2">총 : {{aarrrVm.dataActiveContainer.length| number}}</td>-->\n          <!--<td class="col-sm-2">-</td>-->\n        <!--</tr>-->\n        <!--<tr>-->\n          <!--<td class="col-sm-2">-</td>-->\n          <!--<td class="col-sm-2">-</td>-->\n          <!--<td class="col-sm-2">-</td>-->\n          <!--<td class="col-sm-2">{{aarrrVm.resultToActive.length| number}} / {{aarrrVm.resultToActive.length/aarrrVm.dataSignUpContainer.length | percentage}}</td>-->\n          <!--<td class="col-sm-2">총 : {{aarrrVm.dataPaymentContainer.length | number}}</td>-->\n        <!--</tr>-->\n        <!--<tr>-->\n          <!--<td class="col-sm-2">-</td>-->\n          <!--<td class="col-sm-2">-</td>-->\n          <!--<td class="col-sm-2">-</td>-->\n          <!--<td class="col-sm-2">-</td>-->\n          <!--<td class="col-sm-2">{{aarrrVm.activeToPayment.length| number}} / {{aarrrVm.activeToPayment.length/aarrrVm.dataSignUpContainer.length | percentage}}</td>-->\n        <!--</tr>-->\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>'),a.put("app/active-users/active-users.html",'<div class="row">\n  <div class="col-lg-12">\n    <h1 class="page-header">Active Users</h1>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <form class="form-inline">\n          <div class="form-group">\n            <label for="startDate">Range: </label>\n            <input type="date" id="start-date" class="form-control" name="startDate" ng-model="activeUsersVm.dateRange.startDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <label for="endDate">-</label>\n            <input type="date" id="end-date" class="form-control" name="endDate" ng-model="activeUsersVm.dateRange.endDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <button type="button" class="btn btn-primary" name="date-update" ng-click="activeUsersVm.lineChartFilter()" id="date-update">Go! <i class="fa fa-arrow-right fa-fw"></i></button>\n          </div>\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-success" type="button" name="downloadCSV" id="download-csv-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                export CSV\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="download-csv-btn">\n                <li ng-repeat="option in activeUsersVm.availableViews">\n                  <a href="" ng-click="activeUsersVm.downloadCSV(option)">{{option}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h5>{{activeUsersVm.dateRange.startDate | date: \'longDate\'}} - {{activeUsersVm.dateRange.endDate | date: \'longDate\'}}</h5>\n      </div>\n      <div class="panel-body">\n        <highchart id="linechart" config="activeUsersVm.lineChartConfig"></highchart>\n      </div>\n      <div class="panel-footer">\n        <div class="row">\n          <form name="activeUserForm" novalidate>\n            <div class="col-sm-4 form-group">\n              <label for="roleSelectBtn">Role: </label>\n              <select class="form-control" ng-model="activeUsersVm.selectedRoleFilter" name="roleSelectBtn" id="role-select-btn" ng-change="activeUsersVm.lineChartFilter()">\n                <option value="all">All</option>\n                <option ng-repeat="role in activeUsersVm.availableRoles" value="{{role}}">{{role | titleCase}}</option>\n              </select>\n            </div>\n            <div class="col-sm-4 form-group">\n              <label for="deviceSelectBtn">Device: </label>\n              <select class="form-control" ng-model="activeUsersVm.selectedDeviceFilter" name="deviceSelectBtn" id="device-select-btn" ng-change="activeUsersVm.lineChartFilter()">\n                <option value="all">All</option>\n                <option ng-repeat="device in activeUsersVm.availableDevices" value="{{device}}">{{device | device}}</option>\n              </select>\n            </div>\n            <div class="col-sm-4 form-group" show-errors>\n              <label class="control-label" for="activeCntSelectBtn">Activity Count (Active User: Acitivity ≥ {{activeUsersVm.selectedActivenessCnt}}): </label>\n              <input class="form-control" type="number" min="1" max="100" name="activeCnt" ng-model="activeUsersVm.selectedActivenessCnt" ng-change="activeUsersVm.lineChartFilter()" required="required">\n              <ng-messages for="activeUserForm[\'activeCnt\'].$error" class="help-block">\n                <p class="error-message" ng-message="required">\n                  Activity count is required!\n                </p>\n                <p class="error-message" ng-message="min">\n                  Activity count should be bigger than 0\n                </p>\n                <p class="error-message" ng-message="max">\n                  Activity count should be smaller than 100\n                </p>\n              </ng-messages>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <table class="table table-striped table-bordered table-hover" id="linechart-table">\n        <thead>\n        <tr>\n          <th>Subject</th>\n          <th class="text-right">Min. Count</th>\n          <th class="text-right">Max. Count</th>\n          <th class="text-right">Average</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr ng-repeat="item in activeUsersVm.lineChartData">\n          <td>{{item.name | titleCase}}</td>\n          <td class="text-right">{{activeUsersVm.getMinimum(item.data) | number}}</td>\n          <td class="text-right">{{activeUsersVm.getMaximum(item.data) | number}}</td>\n          <td class="text-right">{{activeUsersVm.getAverage(item.data) | number:0}}</td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n\n<!-- Table -->\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <div class="row">\n          <div class="col-sm-4 dropdown">\n            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n              {{activeUsersVm.selectedView | titleCase}}\n              <span class="caret"></span>\n            </button>\n            <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">\n              <li ng-repeat="view in activeUsersVm.availableViews">\n                <a href="" ng-click="activeUsersVm.selectDropdownView(view)">{{view | titleCase}}</a>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n      <table class="table table-striped table-bordered table-hover">\n        <thead>\n        <tr>\n          <th class="col-sm-4">Date</th>\n          <th class="col-sm-4 text-right">Total</th>\n          <th class="col-sm-4 text-right">Change Net / %</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr ng-repeat="item in activeUsersVm.reversedDataContainer">\n          <td class="col-sm-4" ng-style="activeUsersVm.getDateColor({{item[0]}})">{{item[0] | date:\'yyyy. MM. dd (EEE)\'}}</td>\n          <td class="col-sm-4 text-right">{{item[1] | number}}</td>\n          <td class="col-sm-4 text-right increased" ng-if="item[2] > 0">\n            <b>{{item[2] | number}}</b>\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[3]) | percentage:2}}\n          </td>\n          <td class="col-sm-4 text-right decreased" ng-if="item[2] < 0">\n            <b>{{item[2] | number}}</b>\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[3]) | percentage:2}}\n          </td>\n          <td class="col-sm-4 text-right" ng-if="item[2] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00%\n          </td>\n          <td class="col-sm-4 text-right" ng-if="item[2] === \'-\' ">-</td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class="text-center">\n      <uib-pagination boundary-links="true" total-items="activeUsersVm.totalItem + 1" ng-model="activeUsersVm.currentPage"\n                      ng-change="activeUsersVm.pageChanged(activeUsersVm.currentPage, activeUsersVm.selectedView)" items-per-page="20" max-size="10" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination>\n    </div>\n  </div>\n</div>\n'),a.put("app/cancel-userdata/cancel-userdata.html",'<div class="row">\n  <div class="col-lg-12">\n    <h1 class="page-header">Cancel Users</h1>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <form class="form-inline">\n          <div class="form-group">\n            <label for="startDate">Range: </label>\n            <input type="date" id="start-date" class="form-control" name="startDate" ng-model="cancelUserDataVm.dateRange.startDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <label for="endDate">-</label>\n            <input type="date" id="end-date" class="form-control" name="endDate" ng-model="cancelUserDataVm.dateRange.endDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <button type="button" class="btn btn-primary" name="date-update" ng-click="cancelUserDataVm.lineChartFilter()">Go! <i class="fa fa-arrow-right fa-fw"></i></button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <div class="col-sm-6">\n          <highchart config="cancelUserDataVm.lineChartCancelDataConfig"></highchart>\n        </div>\n        <div class="col-sm-6">\n          <highchart config="cancelUserDataVm.lineChartDowngradeDataConfig"></highchart>\n        </div>\n      </div>\n      <div class="panel-footer">\n        <div class="row">\n        <form>\n          <div class="col-sm-6 form-group">\n            <label for="rangeSelectBtn">Range: </label>\n            <select class="form-control" ng-model="cancelUserDataVm.selectedRange" name="rangeSelectBtn" id="range-select-btn" ng-change="cancelUserDataVm.lineChartFilter()">\n              <option ng-repeat="range in cancelUserDataVm.availableRanges" value="{{range}}">{{range | titleCase}}</option>\n            </select>\n          </div>\n          <!--<div class="col-sm-4 form-group">-->\n            <!--<label for="roleSelectBtn">Role: </label>-->\n            <!--<select class="form-control" ng-model="cancelUserDataVm.selectedRoleFilter" name="roleSelectBtn" id="role-select-btn" ng-change="cancelUserDataVm.lineChartFilter()">-->\n              <!--<option value="all">All</option>-->\n              <!--<option ng-repeat="role in cancelUserDataVm.availableRoles" value="{{role}}">{{role | titleCase}}</option>-->\n            <!--</select>-->\n          <!--</div>-->\n          <div class="col-sm-6 form-group">\n            <label for="deviceSelectBtn">Device: </label>\n            <select class="form-control" ng-model="cancelUserDataVm.selectedDeviceFilter" name="deviceSelectBtn" id="device-select-btn" ng-change="cancelUserDataVm.lineChartFilter()">\n              <option value="all">All</option>\n              <option ng-repeat="device in cancelUserDataVm.availableDevices" value="{{device}}">{{device | device}}</option>\n            </select>\n          </div>\n        </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<!-- Table -->\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <div class="dropdown">\n          <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n            {{cancelUserDataVm.selectedRange | titleCase}}\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">\n            <li ng-repeat="range in cancelUserDataVm.availableRanges">\n              <a href="" ng-click="cancelUserDataVm.selectDropdownRange(range)">{{range | titleCase}}</a>\n            </li>\n          </ul>\n          <button class="btn btn-success pull-right" type="button" name="downloadCSV" id="user-stats-download-btn" ng-click="cancelUserDataVm.fetchAndDownloadCSV(cancelUserDataVm.reversedData,\'LineChart\')">\n              export CSV\n          </button>\n        </div>\n      </div>\n      <table class="table table-striped table-bordered table-hover" id="linechart-table">\n        <thead>\n          <tr>\n            <th class="col-sm-2">Date</th>\n            <th class="col-sm-1">Basic to Unsubscribe</th>\n            <th class="col-sm-1">Standard to Unsubscribe</th>\n            <th class="col-sm-1">Premium to Unsubscribe</th>\n            <th class="col-sm-1">Basic to Refund</th>\n            <th class="col-sm-1">Standard to Refund</th>\n            <th class="col-sm-1">Premium to Refund</th>\n          </tr>\n        </thead>\n        <tbody>\n        <tr ng-repeat="item in cancelUserDataVm.reversedDataContainer">\n          <td class="col-sm-2" ng-style="cancelUserDataVm.getDateColor({{item[0]}})">{{item[0]| date:\'yyyy. MM. dd (EEE)\'}}</td>\n          <td class="col-sm-1 text-left">{{item[1] | number}} (\n          <span class="text-right increased" ng-if="item[2] > 0">\n            {{(item[2]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[3]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[2] < 0">\n            {{(item[2]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[3]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[2] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[2] === \'-\'">\n            - )\n          </span>\n          </td>\n\n          <td class="col-sm-1 text-left">{{item[4] | number}} (\n          <span class="text-right increased" ng-if="item[5] > 0">\n            {{(item[5]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[6]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[5] < 0">\n            {{(item[5]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[6]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[5] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[5] === \'-\'">\n            - )\n          </span>\n          </td>\n\n          <td class="col-sm-1 text-left">{{item[7] | number}} (\n          <span class="text-right increased" ng-if="item[8] > 0">\n            {{(item[8]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[9]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[8] < 0">\n            {{(item[8]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[9]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[8] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[8] === \'-\'">\n            - )\n          </span>\n          </td>\n\n          <td class="col-sm-1 text-left">{{item[10] | number}} (\n          <span class="text-right increased" ng-if="item[11] > 0">\n            {{(item[12]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[12]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[11] < 0">\n            {{(item[11]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[12]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[11] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[11] === \'-\'">\n            - )\n          </span>\n          </td>\n\n          <td class="col-sm-1 text-left">{{item[13] | number}} (\n          <span class="text-right increased" ng-if="item[14] > 0">\n            {{(item[14]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[15]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[14] < 0">\n            {{(item[14]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[15]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[14] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[14] === \'-\'">\n            - )\n          </span>\n          </td>\n\n          <td class="col-sm-1 text-left">{{item[16] | number}} (\n          <span class="text-right increased" ng-if="item[17] > 0">\n            {{(item[17]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[18]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[17] < 0">\n            {{(item[17]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[18]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[17] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[17] === \'-\'">\n            - )\n          </span>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class="text-center">\n      <uib-pagination boundary-links="true" total-items="cancelUserDataVm.totalItem" ng-model="cancelUserDataVm.currentPage"\n                      ng-change="cancelUserDataVm.pageChanged(cancelUserDataVm.currentPage)" items-per-page="20" max-size="10" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination>\n    </div>\n  </div>\n</div>\n\n<!-- Pie Graph -->\n<!--<div class="row">-->\n  <!--<div class="col-sm-12">-->\n    <!--<div class="panel panel-default">-->\n      <!--<div class="panel-body">-->\n        <!--<div class="row">-->\n          <!--<div class="col-sm-12">-->\n            <!--<div class="panel panel-default">-->\n              <!--<div class="panel-body">-->\n                <!--<form class="form-inline">-->\n                  <!--<div class="form-group">-->\n                    <!--<label for="startDate">Range: </label>-->\n                    <!--<input type="date" class="form-control" name="startDate" ng-model="cancelUserDataVm.dateRangePieChart.startDate"-->\n                           <!--placeholder="yyyy-MM-dd"/>-->\n                  <!--</div>-->\n                  <!--<div class="form-group">-->\n                    <!--<label for="endDate">-</label>-->\n                    <!--<input type="date" class="form-control" name="endDate" ng-model="cancelUserDataVm.dateRangePieChart.endDate"-->\n                           <!--placeholder="yyyy-MM-dd"/>-->\n                  <!--</div>-->\n                  <!--<div class="form-group">-->\n                    <!--<button type="button" class="btn btn-primary" name="date-update" ng-click="cancelUserDataVm.getPieChart()">Go! <i class="fa fa-arrow-right fa-fw"></i></button>-->\n                  <!--</div>-->\n                <!--</form>-->\n              <!--</div>-->\n            <!--</div>-->\n          <!--</div>-->\n        <!--</div>-->\n        <!--<div class="col-sm-5">-->\n          <!--<highchart id="piechart" config="cancelUserDataVm.pieChartConfig"></highchart>-->\n        <!--</div>-->\n        <!--<div class="col-sm-7">-->\n          <!--<div class="dropdown">-->\n            <!--<button class="btn btn-default dropdown-toggle" type="button" id="pie-filter-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">-->\n              <!--{{cancelUserDataVm.selectedPieChartFilter | titleCase}}-->\n              <!--<span class="caret"></span>-->\n            <!--</button>-->\n            <!--<ul class="dropdown-menu" aria-labelledby="pie-filter-select-btn">-->\n              <!--<li ng-repeat="filter in cancelUserDataVm.availablePieChartFilters">-->\n                <!--<a href="" ng-click="cancelUserDataVm.pieChartFilter(filter)">{{filter | titleCase}}</a>-->\n              <!--</li>-->\n            <!--</ul>-->\n            <!--<button class="btn btn-success" type="button" name="downloadCSV" ng-click="cancelUserDataVm.fetchAndDownloadCSV(cancelUserDataVm.pieChartSumData,\'PieChart\')">-->\n              <!--export CSV-->\n            <!--</button>-->\n          <!--</div>-->\n          <!--<h3>Total Users by {{cancelUserDataVm.selectedPieChartFilter | titleCase}}</h3>-->\n          <!--<h5>Total Users: {{cancelUserDataVm.currentPieChartTotalUsers.value - cancelUserDataVm.currentPieChartDeleteUsers.value | number}}</h5>-->\n          <!--<br>-->\n          <!--<table class="table table-striped table-bordered table-hover" id="piechart-table">-->\n            <!--<thead>-->\n              <!--<tr>-->\n                <!--<th>{{cancelUserDataVm.selectedPieChartFilter | titleCase}}</th>-->\n                <!--<th class="text-right">Count</th>-->\n                <!--<th class="text-right">Proportion</th>-->\n              <!--</tr>-->\n            <!--</thead>-->\n            <!--<tbody>-->\n              <!--<tr ng-repeat="item in cancelUserDataVm.pieChartSumData | orderBy:\'y\':true | limitTo:5">-->\n                <!--<td>{{item.name | titleCase | device}}</td>-->\n                <!--<td class="text-right">{{item.y | number}}</td>-->\n                <!--<td class="text-right">{{cancelUserDataVm.getPieChartProportion(item.y) | percentage:1}}</td>-->\n              <!--</tr>-->\n            <!--</tbody>-->\n          <!--</table>-->\n        <!--</div>-->\n      <!--</div>-->\n    <!--</div>-->\n  <!--</div>-->\n'),
a.put("app/card-rate/card-rate.html",'<div class="row">\n  <div class="col-lg-12">\n    <h1>Card Rate</h1>\n  </div>\n</div>\n<div class="panel panel-default">\n  <div class="panel-footer">\n    <form name="cardRateForm" novalidate>\n      <div class="row">\n        <div class="col-sm-3 form-group" show-errors>\n          <label class="control-label">Min Average Rate (Count ≥ {{cardRateVm.selectedMinAvgRate}}): </label>\n          <input class="form-control" type="number" min="0" max="5" name="minAvgRate"\n                 ng-model="cardRateVm.selectedMinAvgRate" ng-change="cardRateVm.getCardRate()"\n                 required="required">\n          <ng-messages for="cardRateForm[\'minAvgRate\'].$error" class="help-block">\n            <p class="error-message" ng-message="required">\n              Minimum Average Rate is required!\n            </p>\n            <p class="error-message" ng-message=min>\n              Minimum Average Rate should be bigger than 0\n            </p>\n            <p class="error-message" ng-message=max>\n              Class count should be smaller than 5\n            </p>\n          </ng-messages>\n        </div>\n        <div class="col-sm-3 form-group" show-errors>\n          <label class="control-label">Max Average Rate (Count ≤ {{cardRateVm.selectedMaxAvgRate}}): </label>\n          <input class="form-control" type="number" min="0" max="5" name="maxAvgRate"\n                 ng-model="cardRateVm.selectedMaxAvgRate" ng-change="cardRateVm.getCardRate()"\n                 required="required">\n          <ng-messages for="cardRateForm[\'maxAvgRate\'].$error" class="help-block">\n            <p class="error-message" ng-message="required">\n              Minimum Average Rate is required!\n            </p>\n            <p class="error-message" ng-message=min>\n              Minimum Average Rate should be bigger than 0\n            </p>\n            <p class="error-message" ng-message=max>\n              Class count should be smaller than 5\n            </p>\n          </ng-messages>\n        </div>\n        <div class="col-sm-3 form-group" show-errors>\n          <label class="control-label">Min Rate Count (Count ≥ {{cardRateVm.selectedMinRateCnt}}): </label>\n          <input class="form-control" type="number" min="0" max="1000" name="minRateCnt"\n                 ng-model="cardRateVm.selectedMinRateCnt" ng-change="cardRateVm.getCardRate()"\n                 required="required">\n          <ng-messages for="cardRateForm[\'minRateCnt\'].$error" class="help-block">\n            <p class="error-message" ng-message="required">\n              Rate count is required!\n            </p>\n            <p class="error-message" ng-message=min>\n              Rate count should be bigger than 0\n            </p>\n            <p class="error-message" ng-message=max>\n              Rate count should be smaller than 1000\n            </p>\n          </ng-messages>\n        </div>\n        <div class="col-sm-3 form-group" show-errors>\n          <label class="control-label">Max Rate Count (Count ≤ {{cardRateVm.selectedMaxRateCnt}}): </label>\n          <input class="form-control" type="number" min="0" max="1000" name="maxRateCnt"\n                 ng-model="cardRateVm.selectedMaxRateCnt" ng-change="cardRateVm.getCardRate()"\n                 required="required">\n          <ng-messages for="cardRateForm[\'maxRateCnt\'].$error" class="help-block">\n            <p class="error-message" ng-message="required">\n              Rate count is required!\n            </p>\n            <p class="error-message" ng-message=min>\n              Rate count should be bigger than 0\n            </p>\n            <p class="error-message" ng-message=max>\n              Rate count should be smaller than 1000\n            </p>\n          </ng-messages>\n        </div>\n        <div class="col-sm-4 form-group">\n          <label>Series Id (default = 0): </label>\n          <input class="form-control" type="number" min="0" max="1000" name="maxRateCnt"\n                 ng-model="cardRateVm.selectedSeriesId" ng-change="cardRateVm.getCardRate()"\n                 required="required" placeholder="id로 검색">\n        </div>\n        <div class="col-sm-4 form-group">\n          <label>Publisher Id (default = 0): </label>\n          <input class="form-control" type="number" min="0" max="1000" name="maxRateCnt"\n                 ng-model="cardRateVm.selectedPublisherId" ng-change="cardRateVm.getCardRate()"\n                 required="required" placeholder="id로 검색">\n        </div>\n        <div class="col-sm-4 form-group">\n          <label>Type: </label>\n          <select class="form-control" ng-model="cardRateVm.selectedTypeFilter"\n                  ng-change="cardRateVm.getCardRate()">\n            <option value="all">All</option>\n            <option ng-repeat="type in cardRateVm.availableTypes" value="{{type}}">{{type}}</option>\n          </select>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n\n\n<div class="row">\n  <div class="col-sm-12">\n    <div>\n      <h3>Total Card : {{cardRateVm.totalItem}}</h3>\n      <table class="table table-striped table-bordered table-hover">\n        <thead>\n        <tr>\n          <th class="col-sm-1 clickable-thead" ng-click="cardRateVm.sortType(\'card_id\')">\n            Card Id\n            <i class="fa fa-caret-down fa-fw"\n               ng-if="cardRateVm.selectedOrderBy == \'DESC\' && cardRateVm.selectedSortType ==\'card_id\'"></i>\n            <i class="fa fa-caret-up fa-fw"\n               ng-if="cardRateVm.selectedOrderBy == \'ASC\' && cardRateVm.selectedSortType ==\'card_id\'"></i>\n          <th class="col-sm-2 clickable-thead" ng-click="cardRateVm.sortType(\'title\')">\n            Title\n            <i class="fa fa-caret-down fa-fw"\n               ng-if="cardRateVm.selectedOrderBy == \'DESC\' && cardRateVm.selectedSortType ==\'title\'"></i>\n            <i class="fa fa-caret-up fa-fw"\n               ng-if="cardRateVm.selectedOrderBy == \'ASC\' && cardRateVm.selectedSortType ==\'title\'"></i>\n          <th class="col-sm-1 clickable-thead" ng-click="cardRateVm.sortType(\'avg_rate\')">\n            Avg Rate\n            <i class="fa fa-caret-down fa-fw"\n               ng-if="cardRateVm.selectedOrderBy == \'DESC\' && cardRateVm.selectedSortType ==\'avg_rate\'"></i>\n            <i class="fa fa-caret-up fa-fw"\n               ng-if="cardRateVm.selectedOrderBy == \'ASC\' && cardRateVm.selectedSortType ==\'avg_rate\'"></i>\n          </th>\n          <th class="col-sm-1 clickable-thead" ng-click="cardRateVm.sortType(\'rate_cnt\')">\n            Rate Cnt\n            <i class="fa fa-caret-down fa-fw"\n               ng-if="cardRateVm.selectedOrderBy == \'DESC\' && cardRateVm.selectedSortType ==\'rate_cnt\'"></i>\n            <i class="fa fa-caret-up fa-fw"\n               ng-if="cardRateVm.selectedOrderBy == \'ASC\' && cardRateVm.selectedSortType ==\'rate_cnt\'"></i>\n          </th>\n          <th class="col-sm-1 clickable-thead" ng-click="cardRateVm.sortType(\'series_id\')">\n            Series Id\n            <i class="fa fa-caret-down fa-fw"\n               ng-if="cardRateVm.selectedOrderBy == \'DESC\' && cardRateVm.selectedSortType ==\'series_id\'"></i>\n            <i class="fa fa-caret-up fa-fw"\n               ng-if="cardRateVm.selectedOrderBy == \'ASC\' && cardRateVm.selectedSortType ==\'series_id\'"></i>\n          </th>\n          <th class="col-sm-1 clickable-thead" ng-click="cardRateVm.sortType(\'publisher_id\')">\n            Publisher Id\n            <i class="fa fa-caret-down fa-fw"\n               ng-if="cardRateVm.selectedOrderBy == \'DESC\' && cardRateVm.selectedSortType ==\'publisher_id\'"></i>\n            <i class="fa fa-caret-up fa-fw"\n               ng-if="cardRateVm.selectedOrderBy == \'ASC\' && cardRateVm.selectedSortType ==\'publisher_id\'"></i>\n          </th>\n          <th class="col-sm-1 clickable-thead" ng-click="cardRateVm.sortType(\'grade_id\')">\n            Grade Id\n            <i class="fa fa-caret-down fa-fw"\n               ng-if="cardRateVm.selectedOrderBy == \'DESC\' && cardRateVm.selectedSortType ==\'grade_id\'"></i>\n            <i class="fa fa-caret-up fa-fw"\n               ng-if="cardRateVm.selectedOrderBy == \'ASC\' && cardRateVm.selectedSortType ==\'grade_id\'"></i>\n          </th>\n          <th class="col-sm-1 clickable-thead">\n            Type\n          </th>\n          <th class="col-sm-2 clickable-thead" ng-click="cardRateVm.sortType(\'recc_end\')">\n            Recommend Date\n            <i class="fa fa-caret-down fa-fw"\n               ng-if="cardRateVm.selectedOrderBy == \'DESC\' && cardRateVm.selectedSortType ==\'recc_end\'"></i>\n            <i class="fa fa-caret-up fa-fw"\n               ng-if="cardRateVm.selectedOrderBy == \'ASC\' && cardRateVm.selectedSortType ==\'recc_end\'"></i>\n          </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr ng-repeat="item in cardRateVm.dataContainer" ng-click="cardRateVm.rateModal(item[0])">\n          <td class="col-sm-1">{{item[0]}}</td>\n          <td class="col-sm-2">{{item[1]}}</td>\n          <td class="col-sm-1">{{item[2]| number}}</td>\n          <td class="col-sm-1">{{item[3]| number}}</td>\n          <td class="col-sm-1">{{item[4]| series}} ( {{item[4]| number}} )</td>\n          <td class="col-sm-1">{{item[5]| publisher}} ( {{item[5]|number}} )</td>\n          <td class="col-sm-1">{{item[6]| grade}}\n            <span ng-if="item[6] != null">( {{item[6]|number}} )</span></td>\n          <td class="col-sm-1">{{item[7]}}</td>\n          <td class="col-sm-2" ng-if="item[8] !== 0">{{item[8] | date:\'yyyy. MM. dd (EEE)\'}}</td>\n          <td class="col-sm-2" ng-if="item[8] === 0">{{item[8]}}</td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class="text-center">\n      <uib-pagination boundary-links="true" total-items="cardRateVm.totalItem" ng-model="cardRateVm.currentPage"\n                      ng-change="cardRateVm.pageChanged(cardRateVm.currentPage)" items-per-page="20" max-size="10" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination>\n    </div>\n  </div>\n</div>\n'),a.put("app/card-rate/rate-modal/rate-modal.html",'<div class="modal-header">\n  <button type="button" class="close" ng-click="$dismiss()"><span aria-hidden="true">&times;</span></button>\n  <h3 class="modal-title">Detail Rate</h3>\n</div>\n\n\n<div class="modal-body">\n  <div class="panel panel-default table-responsive">\n    <table class="table table-striped table-bordered table-hover modal-table">\n      <thead>\n      <tr>\n        <th class="col-sm-6 text-center">Date</th>\n        <th class="col-sm-6 text-center">Rate</th>\n      </tr>\n      </thead>\n      <tbody>\n      <tr ng-repeat="item in rateModalVm.pageDataContainter">\n        <td class="col-sm-6 text-center" ng-style="rateModalVm.getDateColor(item[0])">{{item[0] | date:\'yyyy. MM. dd (EEE)\'}}</td>\n        <td class="col-sm-6 text-center" ng-if="item[1] === 0">{{item[1]}} / {{item[2]}}</td>\n        <td class="col-sm-6 text-center" ng-if="item[1] !== 0">{{item[1] / item[2] | number:2}} / {{item[2]}}</td>\n      </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n<div class="text-center">\n  <uib-pagination boundary-links="true" total-items="rateModalVm.totalItem" ng-model="rateModalVm.currentPage"\n                  ng-change="rateModalVm.pageChanged(rateModalVm.currentPage)" previous-text="&lsaquo;"\n                  next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" max-size="20"\n                  items-per-page="20"></uib-pagination>\n</div>\n\n<div class="modal-footer">\n  <button type="button" class="btn btn-primary" ng-click="$dismiss()">Close</button>\n</div>\n'),a.put("app/cohort-analysis/cohort-analysis.html",'<div class="row">\n  <div class="col-lg-12">\n    <h1 class="page-header">Cohort Analysis</h1>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <form class="form-inline">\n          <div class="form-group">\n            <label for="startDate">Range: </label>\n            <input type="date" id="start-date" class="form-control" name="startDate" ng-model="cohortAnalysisVm.dateRange.startDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <label for="endDate">-</label>\n            <input type="date" id="end-date" class="form-control" name="endDate" ng-model="cohortAnalysisVm.dateRange.endDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <button type="button" class="btn btn-primary" name="date-update" ng-click="cohortAnalysisVm.lineChartFilter()">Go! <i class="fa fa-arrow-right fa-fw"></i></button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n<!--       <div class="panel-heading">\n        <h5>{{cohortAnalysisVm.startDate | date: \'longDate\'}} - {{cohortAnalysisVm.endDate | date: \'longDate\'}}</h5>\n      </div> -->\n      <div class="panel-body">\n        <highchart id="heatmap" config="cohortAnalysisVm.heatmapChartConfig"></highchart>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n<div class="panel-footer">\n  <div class="row">\n    <form>\n      <div class="col-sm-6 form-group">\n        <label for="rangeSelectBtn">Range: </label>\n        <select class="form-control" ng-model="cohortAnalysisVm.selectedRange" name="rangeSelectBtn" id="range-select-btn" ng-change="cohortAnalysisVm.lineChartFilter()">\n          <option ng-repeat="range in cohortAnalysisVm.availableRanges" value="{{range}}">{{range | titleCase}}</option>\n        </select>\n      </div>\n      <div class="col-sm-6 form-group">\n        <label for="roleSelectBtn">Standard: </label>\n        <select class="form-control" ng-model="cohortAnalysisVm.selectedStandard" name="StandardSelectBtn" id="standard-select-btn" ng-change="cohortAnalysisVm.lineChartFilter()">\n          <option ng-repeat="standard in cohortAnalysisVm.availableStandard" value="{{standard}}">{{standard | titleCase}}</option>\n        </select>\n      </div>\n    </form>\n  </div>\n</div>\n'),a.put("app/common/directives/dirpagination/dirPagination.tpl.html",'<ul class="pagination" ng-if="1 < pages.length || !autoHide">\n    <li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }">\n        <a href="" ng-click="setCurrent(1)">&laquo;</a>\n    </li>\n    <li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }">\n        <a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a>\n    </li>\n    <li ng-repeat="pageNumber in pages track by tracker(pageNumber, $index)" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == \'...\' }">\n        <a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a>\n    </li>\n\n    <li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }">\n        <a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a>\n    </li>\n    <li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }">\n        <a href="" ng-click="setCurrent(pagination.last)">&raquo;</a>\n    </li>\n</ul>'),a.put("app/common/directives/header/header-notification/header-notification.html",'<ul class="nav navbar-top-links navbar-right">\n  <!-- /.dropdown -->\n  <li class="dropdown">\n    <a class="dropdown-toggle" data-toggle="dropdown">\n      <i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>\n    </a>\n    <ul class="dropdown-menu dropdown-user">\n      <li>\n        <a href="#"><i class="fa fa-user fa-fw"></i> Learning Card</a>\n      </li>\n      <li class="divider"></li>\n      <li ng-show="isLoggedIn">\n        <a ui-sref="signin" ng-click="headerNotificationVm.signout()">\n          <i class="fa fa-sign-out fa-fw"></i>\n          Logout\n        </a>\n      </li>\n      <li ng-hide="isLoggedIn">\n        <a ui-sref="signin">\n          <i class="fa fa-sign-in fa-fw"></i>\n          Login\n        </a>\n      </li>\n    </ul>\n    <!-- /.dropdown-user -->\n  </li>\n  <!-- /.dropdown -->\n</ul>'),a.put("app/common/directives/header/header.html",'<nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">\n  <div class="navbar-header">\n    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">\n      <span class="sr-only">Toggle navigation</span>\n      <span class="icon-bar"></span>\n      <span class="icon-bar"></span>\n      <span class="icon-bar"></span>\n    </button>\n    <a class="navbar-brand" href="index.html">Learning Card Stats v0.1</a>\n  </div>\n  <!-- /.navbar-header -->\n  <header-notification></header-notification>\n  <sidebar></sidebar>\n</nav>\n'),a.put("app/common/directives/sidebar/sidebar-search/sidebar-search.html",'<li class="sidebar-search">\n    <div class="input-group custom-search-form">\n        <input type="text" class="form-control" placeholder="Search...">\n        <span class="input-group-btn">\n            <button class="btn btn-default" type="button">\n                <i class="fa fa-search"></i>\n            </button>\n        </span>\n    </div>\n</li>'),a.put("app/common/directives/sidebar/sidebar.html",'<div class="navbar-default sidebar" role="navigation">\n  <div class="sidebar-nav navbar-collapse">\n    <ul class="nav in" id="side-menu">\n      <li ui-sref-active="active">\n        <a ui-sref="dashboard.home"><i class="fa fa-dashboard fa-fw"></i> Dashboard [NA]</a>\n      </li>\n\n      <li ui-sref-active="active">\n        <a ui-sref="dashboard.cumulativeUserData"><i class="fa fa-user fa-fw"></i> Total Users</a>\n      </li>\n\n      <li ui-sref-active="active">\n        <a ui-sref="dashboard.activeUsers"><i class="fa fa-user fa-fw"></i> Active Users</a>\n      </li>\n\n      <li ui-sref-active="active">\n        <a ui-sref="dashboard.cardRate"><i class="fa fa-list-alt fa-fw"></i> Card Rate</a>\n      </li>\n\n      <li ui-sref-active="active">\n        <a ui-sref="dashboard.publisherRate"><i class="fa fa-list-alt fa-fw"></i> Publisher / Series Rate</a>\n      </li>\n\n\n      <li ng-class="{active: sidebarVm.collapseVar === 2}">{{dropDown}}\n        <a href="" ng-click="sidebarVm.check(2)"><i class="fa fa-money fa-fw"></i> Payment<span\n            class="fa arrow"></span></a>\n        <ul class="nav nav-second-level" uib-collapse="sidebarVm.collapseVar !== 2">\n          <li ui-sref-active="active">\n            <a ui-sref="dashboard.subscribeUserData"><i class="fa fa-money fa-fw"></i> Subscribers</a>\n          </li>\n          <li ui-sref-active="active">\n            <a ui-sref="dashboard.cancelUserData"><i class="fa fa-money fa-fw"></i> Cancel Users</a>\n          </li>\n          <li ui-sref-active="active">\n            <a ui-sref="dashboard.upgradeDowngrade"><i class="fa fa-money fa-fw"></i> Upgrade & Downgrade Users</a>\n          </li>\n          <li ui-sref-active="active">\n            <a ui-sref="dashboard.monthlyRecurringRevenue"><i class="fa fa-money fa-fw"></i> Monthly Recurring Revenue</a>\n          </li>\n        </ul>\n      </li>\n\n      <li ui-sref-active="active">\n        <a ui-sref="dashboard.downloadedCard"><i class="fa fa-download fa-fw"></i> Downloaded Cards</a>\n      </li>\n\n      <li ui-sref-active="active">\n        <a ui-sref="dashboard.userPageFlow"><i class="fa fa-table fa-fw"></i> User Page Flow</a>\n      </li>\n\n      <li ui-sref-active="active">\n        <a ui-sref="dashboard.preferredSubjects"><i class="fa fa-table fa-fw"></i> Preferred Subjects</a>\n      </li>\n\n      <li ui-sref-active="active">\n        <a ui-sref="dashboard.customQuery"><i class="fa fa-line-chart fa-fw"></i> Custom Query</a>\n      </li>\n\n      <li ui-sref-active="active">\n        <a ui-sref="dashboard.aarrr"><i class="fa fa-line-chart fa-fw"></i> AARRR Analysis</a>\n      </li>\n\n      <li ui-sref-active="active">\n        <a ui-sref="dashboard.cohortAnalysis"><i class="fa fa-bar-chart-o fa-fw"></i> Cohort Analysis [NA]</a>\n      </li>\n\n\n      <!--<li ui-sref-active="active">-->\n        <!--<a ui-sref="dashboard.mobileStoreStats.main"><i class="fa fa-line-chart fa-fw"></i> Mobile Store Stats</a>-->\n      <!--</li>-->\n\n\n\n\n    </ul>\n  </div>\n  <!-- /.sidebar-collapse -->\n</div>\n'),a.put("app/cumulative-userdata/cumulative-userdata.html",'<div class="row">\n  <div class="col-lg-12">\n    <h1 class="page-header"> Total Users</h1>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <form class="form-inline">\n          <div class="form-group">\n            <label for="startDate">Range: </label>\n            <input type="date" id="start-date" class="form-control" name="startDate" ng-model="cumulativeUserDataVm.dateRange.startDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <label for="endDate">-</label>\n            <input type="date" id="end-date" class="form-control" name="endDate" ng-model="cumulativeUserDataVm.dateRange.endDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <button type="button" class="btn btn-primary" name="date-update" ng-click="cumulativeUserDataVm.lineChartFilter()">Go! <i class="fa fa-arrow-right fa-fw"></i></button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h3 class="panel-title"> Total Users: {{cumulativeUserDataVm.reversedData[0][1]| number}}\n        </h3>\n      </div>\n      <div class="panel-body">\n        <highchart id="linechart" config="cumulativeUserDataVm.lineChartConfig"></highchart>\n      </div>\n\n      <div class="panel-footer">\n        <div class="row">\n        <form>\n          <div class="col-sm-6 form-group">\n            <label for="rangeSelectBtn">Range: </label>\n            <select class="form-control" ng-model="cumulativeUserDataVm.selectedRange" name="rangeSelectBtn" id="range-select-btn" ng-change="cumulativeUserDataVm.lineChartFilter()">\n              <option ng-repeat="range in cumulativeUserDataVm.availableRanges" value="{{range}}">{{range | titleCase}}</option>\n            </select>\n          </div>\n          <div class="col-sm-6 form-group">\n            <label for="roleSelectBtn">Paid: </label>\n            <select class="form-control" ng-model="cumulativeUserDataVm.selectedPaidFilter" name="paidSelectBtn" id="paid-select-btn" ng-change="cumulativeUserDataVm.lineChartFilter()">\n              <option value="all">All</option>\n              <option ng-repeat="paid in cumulativeUserDataVm.availablePaid" value="{{paid}}">{{paid | titleCase}}</option>\n            </select>\n          </div>\n        </form>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n\n<!-- Table -->\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <div class="dropdown">\n          <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n            {{cumulativeUserDataVm.selectedRange | titleCase}}\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">\n            <li ng-repeat="range in cumulativeUserDataVm.availableRanges">\n              <a href="" ng-click="cumulativeUserDataVm.selectDropdownRange(range)">{{range | titleCase}}</a>\n            </li>\n          </ul>\n          <button class="btn btn-success pull-right" type="button" name="downloadCSV" id="user-stats-download-btn" ng-click="cumulativeUserDataVm.fetchAndDownloadCSV(cumulativeUserDataVm.reversedDataContainer)">\n              export CSV\n          </button>\n        </div>\n      </div>\n      <table class="table table-striped table-bordered table-hover" id="linechart-table">\n        <thead>\n          <tr>\n            <th class="col-sm-4">Date</th>\n            <th class="col-sm-4 text-right">Total Users</th>\n            <th class="col-sm-4 text-right">Change Net / %</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="item in cumulativeUserDataVm.reversedDataContainer">\n            <td class="col-sm-4" ng-style="cumulativeUserDataVm.getDateColor({{item[0]}})">{{item[0] | date:\'yyyy. MM. dd (EEE)\'}}</td>\n            <td class="col-sm-4 text-right">{{item[1] | number}}</td>\n            <td class="col-sm-4 text-right increased" ng-if="item[2] > 0">\n              {{(item[2]) | number}}\n              <i class="fa fa-sort-asc fa-fw"></i>\n              {{(item[3]) | percentage:2}}\n            </td>\n            <td class="col-sm-4 text-right decreased" ng-if="item[2] < 0">\n              {{(item[2]) | number}}\n              <i class="fa fa-sort-desc fa-fw"></i>\n              {{(item[3]) | percentage:2}}\n            </td>\n            <td class="col-sm-4 text-right" ng-if="item[2] === 0">\n              0 <i class="fa fa-fw">-</i> 0.00%\n            </td>\n            <td class="col-sm-4 text-right" ng-if="item[2] === \'-\'">\n               -\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class="text-center">\n      <uib-pagination boundary-links="true" total-items="cumulativeUserDataVm.totalItem + 1" ng-model="cumulativeUserDataVm.currentPage"\n                      ng-change="cumulativeUserDataVm.pageChanged(cumulativeUserDataVm.currentPage)" items-per-page="20" max-size="10" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination>\n    </div>\n  </div>\n</div>\n'),a.put("app/custom-query/custom-query.html",'<div class="row">\n  <div class="col-lg-12">\n    <h1 class="page-header">Custom Query</h1>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <div class="alert alert-danger hide" id="date-alert-msg" role="alert">{{customQueryVm.alertMsgContent}}</div>\n        <form>\n          <div class="form-group">\n            <label for="custom-query-string"><h4>Query Editor</h4></label>\n            <textarea class="form-control" rows="5" name="custom-query-string" ng-model="customQueryVm.customQueryString"></textarea>\n          </div>\n        </form>\n        <form>\n          <div class="form-group">\n            <button type="button" class="btn btn-primary" name="query-update" ng-click="customQueryVm.triggerUpdateWithQueryString()" id="query-update">Go! <i class="fa fa-arrow-right fa-fw"></i></button>\n          </div>\n        </form>\n        <hr>\n        <form>\n          <div class="form-group">\n            <h4>Query Helper</h4>\n          </div>\n        </form>\n        <form class="form-inline top-form">\n          <div class="form-group">\n            <label for="startDate">Range: </label>\n            <input type="date" id="start-date" class="form-control" name="startDate" ng-model="customQueryVm.dateRange.startDate" \n              placeholder="yyyy-MM-dd" ng-change="customQueryVm.selectDateRange()"/>\n          </div>\n          <div class="form-group">\n            <label for="endDate">-</label>\n            <input type="date" id="end-date" class="form-control" name="endDate" ng-model="customQueryVm.dateRange.endDate" \n              placeholder="yyyy-MM-dd" ng-change="customQueryVm.selectDateRange()"/>\n          </div>\n        </form>\n        <form class="form-inline">\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="typeSelectBtn" id="type-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Type:</b> {{customQueryVm.selectedTypeFilter}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="type-select-btn">\n                <li ng-repeat="type in customQueryVm.availableTypes">\n                  <a href="" ng-click="customQueryVm.selectDropdownType(type)">{{type}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="roleSelectBtn" id="role-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Role:</b> {{customQueryVm.selectedRoleFilter | titleCase}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="role-select-btn">\n                <li ng-repeat="role in customQueryVm.availableRoles">\n                  <a href="" ng-click="customQueryVm.selectDropdownRole(role)">{{role | titleCase}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="deviceSelectBtn" id="device-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Device:</b> {{customQueryVm.selectedDeviceFilter}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="device-select-btn">\n                <li ng-repeat="device in customQueryVm.availableDevices">\n                  <a href="" ng-click="customQueryVm.selectDropdownDevice(device)"><i class="fa {{customQueryVm.iconAliases[device]}} fa-fw"></i> {{device}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n\n          <!--<div class="form-group">-->\n            <!--<div class="dropdown">-->\n              <!--<button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="methodSelectBtn" id="method-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">-->\n                <!--<b>Method:</b> {{customQueryVm.selectedMethodFilter}}-->\n                <!--<span class="caret"></span>-->\n              <!--</button>-->\n              <!--<ul class="dropdown-menu" aria-labelledby="method-select-btn">-->\n                <!--<li ng-repeat="method in customQueryVm.availableMethods">-->\n                  <!--<a href="" ng-click="customQueryVm.selectDropdownMethod(method)">{{method}}</a>-->\n                <!--</li>-->\n              <!--</ul>-->\n            <!--</div>-->\n          <!--</div>-->\n\n          <!--<div class="form-group">-->\n            <!--<div class="dropdown">-->\n              <!--<button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="apiSelectBtn" id="api-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">-->\n                <!--<b>API:</b> {{customQueryVm.selectedAPIFilter | titleCase}}-->\n                <!--<span class="caret"></span>-->\n              <!--</button>-->\n              <!--<ul class="dropdown-menu" aria-labelledby="api-select-btn">-->\n                <!--<li ng-repeat="api in customQueryVm.availableAPIs">-->\n                  <!--<a href="" ng-click="customQueryVm.selectDropdownAPI(api)">{{api | titleCase}}</a>-->\n                <!--</li>-->\n              <!--</ul>-->\n            <!--</div>-->\n          <!--</div>-->\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="groupBySelectBtn" id="group-by-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Group By:</b> {{customQueryVm.selectedGroupByFilter | titleCase}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="group-by-select-btn">\n                <li ng-repeat="groupBy in customQueryVm.availableGroupBys">\n                  <a href="" ng-click="customQueryVm.selectDropdownGroupBy(groupBy)">{{groupBy | titleCase}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="chartSelectBtn" id="chart-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Chart Type:</b> {{customQueryVm.selectedChartType | titleCase}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="chart-select-btn">\n                <li ng-repeat="type in customQueryVm.availableChartTypes">\n                  <a href="" ng-click="customQueryVm.selectDropdownChartType(type)">{{type | titleCase}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </form>\n      </div>\n      <div class="panel-body">\n        <highchart id="custom-query-graph" config="customQueryVm.lineChartConfig"></highchart>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <table class="table table-striped table-bordered table-hover" id="linechart-table">\n        <thead>\n          <tr>\n            <th>Subject</th>\n            <th class="text-right">Min. Count</th>\n            <th class="text-right">Max. Count</th>\n            <th class="text-right">Average</th>\n            <th class="text-right">Total Count</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="item in customQueryVm.lineChartData">\n            <td>{{item.name | titleCase}}</td>\n            <td class="text-right">{{customQueryVm.getMinimum(item.data) | number}}</td>\n            <td class="text-right">{{customQueryVm.getMaximum(item.data) | number}}</td>\n            <td class="text-right">{{customQueryVm.getAverage(item.data) | number:0}}</td>\n            <td class="text-right">{{customQueryVm.getSum(item.data) | number}}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n'),
a.put("app/daily-stats/classes-schools/classes-schools.html",'<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h3 class="panel-title">Classes Up/Down</h3>\n      </div>\n      <div class="panel-body">\n        <highchart id="classes-schools" config="classesSchoolsStatsVm.lineChartConfig"></highchart>\n      </div>\n      <div class="panel-footer">\n        <form class="form-inline">\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="deviceSelectBtn" id="class-device-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Device:</b> {{classesSchoolsStatsVm.selectedDeviceFilter}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="class-device-select-btn">\n                <li ng-repeat="device in classesSchoolsStatsVm.availableDevices">\n                  <a href="" ng-click="classesSchoolsStatsVm.selectDropdownDevice(device)"><i class="fa {{classesSchoolsStatsVm.iconAliases[device]}} fa-fw"></i> {{device}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="countrySelectBtn" id="class-country-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Country:</b> {{classesSchoolsStatsVm.selectedCountryFilter}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="class-country-select-btn">\n                <li ng-repeat="country in classesSchoolsStatsVm.availableCountries">\n                  <a href="" ng-click="classesSchoolsStatsVm.selectDropdownCountry(country)"><span class="flag-icon {{classesSchoolsStatsVm.iconAliases[country]}}"></span> {{country}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class="form-group">\n            <button type="button" class="btn btn-primary" name="update" ng-click="classesSchoolsStatsVm.updateData()" id="class-stats-update-btn"><i class="fa fa-refresh fa-fw"></i> update</button>\n          </div>\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-success" type="button" name="downloadCSV" id="class-stats-download-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                export CSV\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="class-stats-download-btn">\n                <li ng-repeat="option in classesSchoolsStatsVm.availableDownloadOptions">\n                  <a href="" ng-click="classesSchoolsStatsVm.fetchAndDownloadCSV(option)">{{option}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <table class="table table-striped table-bordered table-hover" id="linechart-table">\n        <thead>\n          <tr>\n            <th>Subject</th>\n            <th class="text-right">Min. Count</th>\n            <th class="text-right">Max. Count</th>\n            <th class="text-right">Average</th>\n            <th class="text-right">Total Count</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="item in classesSchoolsStatsVm.lineChartData">\n            <td>{{item.name | titleCase}}</td>\n            <td class="text-right">{{classesSchoolsStatsVm.getMinimum(item.data) | number}}</td>\n            <td class="text-right">{{classesSchoolsStatsVm.getMaximum(item.data) | number}}</td>\n            <td class="text-right">{{classesSchoolsStatsVm.getAverage(item.data) | number:0}}</td>\n            <td class="text-right">{{classesSchoolsStatsVm.getSum(item.data) | number}}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>'),a.put("app/daily-stats/daily-stats.html",'<div class="row">\n  <div class="col-lg-12">\n    <h1 class="page-header">Daily Stats</h1>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <div class="alert alert-danger hide" id="date-alert-msg" role="alert">{{dailyStatsVm.alertMsgContent}}</div>\n        <form class="form-inline">\n          <div class="form-group">\n            <label for="startDate">Range: </label>\n            <input type="date" id="start-date" class="form-control" name="startDate" ng-model="dailyStatsVm.dateRange.startDate" \n              placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <label for="endDate">-</label>\n            <input type="date" id="end-date" class="form-control" name="endDate" ng-model="dailyStatsVm.dateRange.endDate" \n              placeholder="yyyy-MM-dd"/>\n          </div>\n          <button type="button" class="btn btn-primary" name="date-update" ng-click="dailyStatsVm.triggerUpdateWithDate()" id="date-update">Go! <i class="fa fa-arrow-right fa-fw"></i></button>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n<!-- Line Graph Views -->\n<div class="row">\n  <div class="col-lg-6">\n    <div ui-view="user-stats"></div>\n  </div>\n  <div class="col-lg-6">\n    <div ui-view="post-stats"></div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-lg-6">\n    <div ui-view="classes-schools"></div>\n  </div>\n  <div class="col-lg-6">\n    <div ui-view="visits"></div>\n  </div>\n</div>\n<!-- Pie Graph -->\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <div class="col-sm-5">\n          <highchart id="piechart" config="dailyStatsVm.pieChartConfig"></highchart>\n        </div>\n        <div class="col-sm-7">\n          <div class="dropdown">\n            <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n              {{dailyStatsVm.selectedPieSubject}}\n              <span class="caret"></span>\n            </button>\n            <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">\n              <li ng-repeat="subject in dailyStatsVm.dataSubjects">\n                <a href="" ng-click="dailyStatsVm.selectPieDropdownSubject(subject)">{{subject}}</a>\n              </li>\n            </ul>\n          </div>\n          <h3>{{dailyStatsVm.selectedPieSubject | titleCase}}</h3>\n          <h5>{{dailyStatsVm.dateRange.startDate | date: \'mediumDate\'}} - {{dailyStatsVm.dateRange.endDate | date: \'mediumDate\'}}</h5>\n          <br>\n          <table class="table table-striped table-bordered table-hover" id="piechart-table">\n            <thead>\n              <tr>\n                <th>Role</th>\n                <th class="text-right">Count</th>\n                <th class="text-right">Proportion</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr ng-repeat="item in dailyStatsVm.pieChartData">\n                <td>{{item.name}}</td>\n                <td class="text-right">{{item.y | number}}</td>\n                <td class="text-right">{{dailyStatsVm.getPieChartProportion(item.y) | percentage:1}}</td>\n              </tr>\n            </tbody>\n            <tfoot>\n              <tr>\n                <td><strong>total</strong></td>\n                <td class="text-right"><strong>{{dailyStatsVm.getPieChartTotal() | number}}</strong></td>\n                <td class="text-right"><strong>{{1 | percentage:1}}</strong></td>\n              </tr>\n            </tfoot>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<!-- Map Graph -->\n<!-- <div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <div class="row">\n          <div class="col-sm-5">\n            <highchart id="mapchart" config="dailyStatsVm.mapChartConfig"></highchart>\n          </div>\n          <div class="col-sm-7">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu2" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                {{dailyStatsVm.selectedMapSubject}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">\n                <li ng-repeat="subject in dailyStatsVm.dataSubjects">\n                  <a href="" ng-click="dailyStatsVm.selectMapDropdownSubject(subject)">{{subject}}</a>\n                </li>\n              </ul>\n            </div>\n            <h3>{{dailyStatsVm.selectedMapSubject | titleCase}}</h3>\n            <h5>{{dailyStatsVm.startDate | date: \'mediumDate\'}} - {{dailyStatsVm.endDate | date: \'mediumDate\'}}</h5>\n            <br>\n            <table class="table table-striped table-bordered table-hover" id="mapchart-table">\n              <thead>\n                <tr>\n                  <th>Country</th>\n                  <th class="text-right">Count</th>\n                  <th class="text-right">Proportion</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr ng-repeat="item in dailyStatsVm.mapChartData">\n                  <td>{{item.name}}</td>\n                  <td class="text-right">{{item.value | number}}</td>\n                  <td class="text-right">{{dailyStatsVm.getMapChartProportion(item.value) | percentage:1}}</td>\n                </tr>\n              </tbody>\n              <tfoot>\n                <tr>\n                  <td><strong>total</strong></td>\n                  <td class="text-right"><strong>{{dailyStatsVm.getMapChartTotal() | number}}</strong></td>\n                  <td class="text-right"><strong>{{1 | percentage:1}}</strong></td>\n                </tr>\n              </tfoot>\n            </table>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div> -->'),a.put("app/daily-stats/post-stats/post-stats.html",'<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h3 class="panel-title">Post Up/Down</h3>\n      </div>\n      <div class="panel-body">\n        <highchart id="post-stats" config="postStatsVm.lineChartConfig"></highchart>\n      </div>\n      <div class="panel-footer">\n        <form class="form-inline">\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="roleSelectBtn" id="post-role-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Role:</b> {{postStatsVm.selectedRoleFilter | titleCase}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="post-role-select-btn">\n                <li ng-repeat="role in postStatsVm.availableRoles">\n                  <a href="" ng-click="postStatsVm.selectDropdownRole(role)">{{role | titleCase}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="deviceSelectBtn" id="post-device-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Device:</b> {{postStatsVm.selectedDeviceFilter}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="post-device-select-btn">\n                <li ng-repeat="device in postStatsVm.availableDevices">\n                  <a href="" ng-click="postStatsVm.selectDropdownDevice(device)"><i class="fa {{postStatsVm.iconAliases[device]}} fa-fw"></i> {{device}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="countrySelectBtn" id="post-country-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Country:</b> {{postStatsVm.selectedCountryFilter}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="post-country-select-btn">\n                <li ng-repeat="country in postStatsVm.availableCountries">\n                  <a href="" ng-click="postStatsVm.selectDropdownCountry(country)"><span class="flag-icon {{postStatsVm.iconAliases[country]}}"></span> {{country}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class="form-group">\n            <button type="button" class="btn btn-primary" name="update" ng-click="postStatsVm.updateData()" id="post-stats-update-btn"><i class="fa fa-refresh fa-fw"></i> update</button>\n          </div>\n          <div class="form-group">\n            <button type="button" class="btn btn-success" name="download" ng-click="postStatsVm.fetchAndDownloadCSV()" id="post-stats-download-btn"><i class="fa fa-share-square-o fa-fw"></i> export CSV</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <table class="table table-striped table-bordered table-hover" id="linechart-table">\n        <thead>\n          <tr>\n            <th>Subject</th>\n            <th class="text-right">Min. Count</th>\n            <th class="text-right">Max. Count</th>\n            <th class="text-right">Average</th>\n            <th class="text-right">Total Count</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="item in postStatsVm.lineChartData">\n            <td>{{item.name | titleCase}}</td>\n            <td class="text-right">{{postStatsVm.getMinimum(item.data) | number}}</td>\n            <td class="text-right">{{postStatsVm.getMaximum(item.data) | number}}</td>\n            <td class="text-right">{{postStatsVm.getAverage(item.data) | number:0}}</td>\n            <td class="text-right">{{postStatsVm.getSum(item.data) | number}}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>'),a.put("app/daily-stats/user-stats/user-stats.html",'<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h3 class="panel-title">User Up/Down</h3>\n      </div>\n      <div class="panel-body">\n        <highchart id="user-stats" config="userStatsVm.lineChartConfig"></highchart>\n      </div>\n      <div class="panel-footer">\n        <form class="form-inline">\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="roleSelectBtn" id="user-role-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Role:</b> {{userStatsVm.selectedRoleFilter | titleCase}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="user-role-select-btn">\n                <li ng-repeat="role in userStatsVm.availableRoles">\n                  <a href="" ng-click="userStatsVm.selectDropdownRole(role)">{{role | titleCase}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="deviceSelectBtn" id="user-device-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Device:</b> {{userStatsVm.selectedDeviceFilter}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="user-device-select-btn">\n                <li ng-repeat="device in userStatsVm.availableDevices">\n                  <a href="" ng-click="userStatsVm.selectDropdownDevice(device)"><i class="fa {{userStatsVm.iconAliases[device]}} fa-fw"></i> {{device}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="countrySelectBtn" id="user-country-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Country:</b> {{userStatsVm.selectedCountryFilter}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="user-country-select-btn">\n                <li ng-repeat="country in userStatsVm.availableCountries">\n                  <a href="" ng-click="userStatsVm.selectDropdownCountry(country)"><span class="flag-icon {{userStatsVm.iconAliases[country]}}"></span> {{country}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class="form-group">\n            <button type="button" class="btn btn-primary" name="update" ng-click="userStatsVm.updateData()" id="user-stats-update-btn"><i class="fa fa-refresh fa-fw"></i> update</button>\n          </div>\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-success" type="button" name="downloadCSV" id="user-stats-download-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                export CSV\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="user-stats-download-btn">\n                <li ng-repeat="option in userStatsVm.availableDownloadOptions">\n                  <a href="" ng-click="userStatsVm.fetchAndDownloadCSV(option)">{{option}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <table class="table table-striped table-bordered table-hover" id="linechart-table">\n        <thead>\n          <tr>\n            <th>Subject</th>\n            <th class="text-right">Min. Count</th>\n            <th class="text-right">Max. Count</th>\n            <th class="text-right">Average</th>\n            <th class="text-right">Total Count</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="item in userStatsVm.lineChartData">\n            <td>{{item.name | titleCase}}</td>\n            <td class="text-right">{{userStatsVm.getMinimum(item.data) | number}}</td>\n            <td class="text-right">{{userStatsVm.getMaximum(item.data) | number}}</td>\n            <td class="text-right">{{userStatsVm.getAverage(item.data) | number:0}}</td>\n            <td class="text-right">{{userStatsVm.getSum(item.data) | number}}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>'),a.put("app/daily-stats/visits/visits.html",'<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h3 class="panel-title">DAU<!--(Daily Activity User)--></h3>\n      </div>\n      <div class="panel-body">\n        <highchart id="visits" config="visitsStatsVm.lineChartConfig"></highchart>\n      </div>\n      <div class="panel-footer">\n        <form class="form-inline">\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="roleSelectBtn" id="visits-role-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Role:</b> {{visitsStatsVm.selectedRoleFilter | titleCase}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="visits-role-select-btn">\n                <li ng-repeat="role in visitsStatsVm.availableRoles">\n                  <a href="" ng-click="visitsStatsVm.selectDropdownRole(role)">{{role | titleCase}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="deviceSelectBtn" id="visits-device-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Device:</b> {{visitsStatsVm.selectedDeviceFilter | device}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="visits-device-select-btn">\n                <li ng-repeat="device in visitsStatsVm.availableDevices">\n                  <a href="" ng-click="visitsStatsVm.selectDropdownDevice(device)"><i class="fa {{visitsStatsVm.iconAliases[device]}} fa-fw"></i> {{device | device}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="countrySelectBtn" id="visits-country-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Country:</b> {{visitsStatsVm.selectedCountryFilter | country}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="visits-country-select-btn">\n                <li ng-repeat="country in visitsStatsVm.availableCountries">\n                  <a href="" ng-click="visitsStatsVm.selectDropdownCountry(country)"><span class="flag-icon {{visitsStatsVm.iconAliases[country]}}"></span> {{country | country}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class="form-group">\n            <button type="button" class="btn btn-primary" name="update" ng-click="visitsStatsVm.updateData()" id="visits-stats-update-btn"><i class="fa fa-refresh fa-fw"></i> update</button>\n          </div>\n          <div class="form-group">\n            <button type="button" class="btn btn-success" name="download" ng-click="visitsStatsVm.fetchAndDownloadCSV()" id="visits-stats-download-btn"><i class="fa fa-share-square-o fa-fw"></i> export CSV</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <table class="table table-striped table-bordered table-hover" id="linechart-table">\n        <thead>\n          <tr>\n            <th>Subject</th>\n            <th class="text-right">Min. Count</th>\n            <th class="text-right">Max. Count</th>\n            <th class="text-right">Average</th>\n            <th class="text-right">Total Count</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="item in visitsStatsVm.lineChartData">\n            <td>{{item.name | titleCase}}</td>\n            <td class="text-right">{{visitsStatsVm.getMinimum(item.data) | number}}</td>\n            <td class="text-right">{{visitsStatsVm.getMaximum(item.data) | number}}</td>\n            <td class="text-right">{{visitsStatsVm.getAverage(item.data) | number:0}}</td>\n            <td class="text-right">{{visitsStatsVm.getSum(item.data) | number}}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>'),a.put("app/downloaded-card/downloaded-card.html",'<div class="row">\n  <div class="col-lg-12">\n    <h1 class="page-header"> Downloaded Cards</h1>\n    <!--<div ng-click="downloadedCardVm.exportPDF()">pdf test</div>-->\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <form class="form-inline">\n          <div class="form-group">\n            <label for="startDate">Range: </label>\n            <input type="date" id="start-date" class="form-control" name="startDate" ng-model="downloadedCardVm.dateRange.startDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <label for="endDate">-</label>\n            <input type="date" id="end-date" class="form-control" name="endDate" ng-model="downloadedCardVm.dateRange.endDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          &nbsp;&nbsp;&nbsp;\n          <div class="form-group">\n            <label for="publisherSelectBtn">Publisher: </label>\n            <select class="form-control" ng-model="downloadedCardVm.selectedPublisherFilter" name="publisherSelectBtn" id="publisher-select-btn" ng-change="downloadedCardVm.lineChartFilter()">\n              <option ng-repeat="publisher in downloadedCardVm.availablePublishers" value="{{publisher}}">{{publisher | publisher}}</option>\n            </select>\n          </div>\n\n          <div class="form-group">\n            <button type="button" class="btn btn-primary" name="date-update" ng-click="downloadedCardVm.lineChartFilter()">Go! <i class="fa fa-arrow-right fa-fw"></i></button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h3 class="panel-title"> {{downloadedCardVm.selectedPublisherFilter | publisher}}\n        </h3>\n      </div>\n      <div class="panel-body">\n        <highchart id="linechart" config="downloadedCardVm.lineChartConfig"></highchart>\n      </div>\n\n      <div class="panel-footer">\n        <div class="row">\n        <form>\n          <div class="col-sm-12 form-group">\n            <label for="rangeSelectBtn">Range: </label>\n            <select class="form-control" ng-model="downloadedCardVm.selectedRange" name="rangeSelectBtn" id="range-select-btn" ng-change="downloadedCardVm.lineChartFilter()">\n              <option ng-repeat="range in downloadedCardVm.availableRanges" value="{{range}}">{{range | titleCase}}</option>\n            </select>\n          </div>\n        </form>\n        </div>\n      </div>\n\n    </div>\n  </div>\n</div>\n\n<!-- Table -->\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <div class="dropdown">\n          <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n            {{downloadedCardVm.selectedRange | titleCase}}\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">\n            <li ng-repeat="range in downloadedCardVm.availableRanges">\n              <a href="" ng-click="downloadedCardVm.selectDropdownRange(range)">{{range | titleCase}}</a>\n            </li>\n          </ul>\n          <button class="btn btn-success pull-right" type="button" name="downloadCSV" id="user-stats-download-btn" ng-click="downloadedCardVm.fetchAndDownloadCSV(downloadedCardVm.reversedDataContainer)">\n              export CSV\n          </button>\n        </div>\n      </div>\n      <table class="myTable table table-striped table-bordered table-hover" id="linechart-table">\n        <thead>\n          <tr>\n            <th class="col-sm-4">Date</th>\n            <th class="col-sm-4 text-right">Downloaded Cards</th>\n            <th class="col-sm-4 text-right">Change Net / %</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="item in downloadedCardVm.reversedDataContainer">\n            <td class="col-sm-4" ng-style="downloadedCardVm.getDateColor({{item[0]}})">{{item[0] | date:\'yyyy. MM. dd (EEE)\'}}</td>\n            <td class="col-sm-4 text-right">{{item[1] | number}}</td>\n            <td class="col-sm-4 text-right increased" ng-if="item[2] > 0">\n              {{(item[2]) | number}}\n              <i class="fa fa-sort-asc fa-fw"></i>\n              {{(item[3]) | percentage:2}}\n            </td>\n            <td class="col-sm-4 text-right decreased" ng-if="item[2] < 0">\n              {{(item[2]) | number}}\n              <i class="fa fa-sort-desc fa-fw"></i>\n              {{(item[3]) | percentage:2}}\n            </td>\n            <td class="col-sm-4 text-right" ng-if="item[2] === 0">\n              0 <i class="fa fa-fw">-</i> 0.00%\n            </td>\n            <td class="col-sm-4 text-right" ng-if="item[2] === \'-\'">\n               -\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class="text-center">\n      <uib-pagination boundary-links="true" total-items="downloadedCardVm.totalItem + 1" ng-model="downloadedCardVm.currentPage"\n                      ng-change="downloadedCardVm.pageChanged(downloadedCardVm.currentPage)" items-per-page="20" max-size="10" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination>\n    </div>\n  </div>\n</div>\n'),a.put("app/main/404.html",'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8">\n    <title>Page Not Found :(</title>\n    <style>\n      ::-moz-selection {\n        background: #b3d4fc;\n        text-shadow: none;\n      }\n\n      ::selection {\n        background: #b3d4fc;\n        text-shadow: none;\n      }\n\n      html {\n        padding: 30px 10px;\n        font-size: 20px;\n        line-height: 1.4;\n        color: #737373;\n        background: #f0f0f0;\n        -webkit-text-size-adjust: 100%;\n        -ms-text-size-adjust: 100%;\n      }\n\n      html,\n      input {\n        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n      }\n\n      body {\n        max-width: 500px;\n        _width: 500px;\n        padding: 30px 20px 50px;\n        border: 1px solid #b3b3b3;\n        border-radius: 4px;\n        margin: 0 auto;\n        box-shadow: 0 1px 10px #a7a7a7, inset 0 1px 0 #fff;\n        background: #fcfcfc;\n      }\n\n      h1 {\n        margin: 0 10px;\n        font-size: 50px;\n        text-align: center;\n      }\n\n      h1 span {\n        color: #bbb;\n      }\n\n      h3 {\n        margin: 1.5em 0 0.5em;\n      }\n\n      p {\n        margin: 1em 0;\n      }\n\n      ul {\n        padding: 0 0 0 40px;\n        margin: 1em 0;\n      }\n\n      .container {\n        max-width: 380px;\n        _width: 380px;\n        margin: 0 auto;\n      }\n\n      /* google search */\n\n      #goog-fixurl ul {\n        list-style: none;\n        padding: 0;\n        margin: 0;\n      }\n\n      #goog-fixurl form {\n        margin: 0;\n      }\n\n      #goog-wm-qt,\n      #goog-wm-sb {\n        border: 1px solid #bbb;\n        font-size: 16px;\n        line-height: normal;\n        vertical-align: top;\n        color: #444;\n        border-radius: 2px;\n      }\n\n      #goog-wm-qt {\n        width: 220px;\n        height: 20px;\n        padding: 5px;\n        margin: 5px 10px 0 0;\n        box-shadow: inset 0 1px 1px #ccc;\n      }\n\n      #goog-wm-sb {\n        display: inline-block;\n        height: 32px;\n        padding: 0 10px;\n        margin: 5px 0 0;\n        white-space: nowrap;\n        cursor: pointer;\n        background-color: #f5f5f5;\n        background-image: -webkit-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n        background-image: -moz-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n        background-image: -ms-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n        background-image: -o-linear-gradient(rgba(255,255,255,0), #f1f1f1);\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        appearance: none;\n        *overflow: visible;\n        *display: inline;\n        *zoom: 1;\n      }\n\n      #goog-wm-sb:hover,\n      #goog-wm-sb:focus {\n        border-color: #aaa;\n        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1);\n        background-color: #f8f8f8;\n      }\n\n      #goog-wm-qt:hover,\n      #goog-wm-qt:focus {\n        border-color: #105cb6;\n        outline: 0;\n        color: #222;\n      }\n\n      input::-moz-focus-inner {\n        padding: 0;\n        border: 0;\n      }\n    </style>\n  </head>\n  <body>\n    <div class="container">\n      <h1>Not found <span>:(</span></h1>\n      <p>Sorry, but the page you were trying to view does not exist.</p>\n      <p>It looks like this was the result of either:</p>\n      <ul>\n        <li>a mistyped address</li>\n        <li>an out-of-date link</li>\n      </ul>\n      <script>\n        var GOOG_FIXURL_LANG = (navigator.language || \'\').slice(0,2),GOOG_FIXURL_SITE = location.host;\n      </script>\n      <script src="//linkhelp.clients.google.com/tbproxy/lh/wm/fixurl.js"></script>\n    </div>\n  </body>\n</html>\n'),
a.put("app/main/black.html",'<div class="container-fluid">\n  <div class="row">\n    <div class="col-lg-12">\n      <h1 class="page-header">Blank</h1>\n    </div>\n    <!-- /.col-lg-12 -->\n  </div>\n  <!-- /.row -->\n</div>'),a.put("app/main/home.html",'<div class="row">\n  <div class="col-sm-12">\n    <h1 class="page-header">Dashboard</h1>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-4">\n    <div class="panel panel-primary">\n      <div class="panel-heading text-center dashboard-main-panel">\n        <h1 class="huge">100</h1>\n        <h4>New Members (Not Applied Yet)</h4>\n        <h6>in last 24 hours</h6>\n      </div>\n    </div>\n  </div>\n  <div class="col-sm-4">\n    <div class="panel panel-yellow">\n      <div class="panel-heading text-center dashboard-main-panel">\n        <h1 class="huge">100</h1>\n        <h4>New Downloads (Not Applied Yet)</h4>\n        <h6>in last 24 hours</h6>\n      </div>\n    </div>\n  </div>\n  <div class="col-sm-4">\n    <div class="panel panel-red">\n      <div class="panel-heading text-center dashboard-main-panel">\n        <h1 class="huge">100</h1>\n        <h4>Visits (Not Applied Yet)</h4>\n        <h6>in last 24 hours</h6>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-4">\n    <div class="panel panel-green">\n      <div class="panel-heading text-center dashboard-main-panel">\n        <h1 class="huge">100</h1>\n        <h4>New Classes (Not Applied Yet)</h4>\n        <h6>in last 24 hours</h6>\n      </div>\n    </div>\n  </div>\n  <div class="col-sm-4">\n    <div class="panel panel-light-blue">\n      <div class="panel-heading text-center dashboard-main-panel">\n        <h1 class="huge">100</h1>\n        <h4>New Posts (Not Applied Yet)</h4>\n        <h6>in last 24 hours</h6>\n      </div>\n    </div>\n  </div>\n  <div class="col-sm-4">\n    <div class="panel panel-purple">\n      <div class="panel-heading text-center dashboard-main-panel">\n        <h1 class="huge">100</h1>\n        <h4>Active Users (Not Applied Yet)</h4>\n        <h6>in last 24 hours</h6>\n      </div>\n    </div>\n  </div>\n</div>'),a.put("app/main/main.html",'<div id="wrapper">\n  <!-- Navigation -->\n  <header></header>\n  <!-- /.navbar-top-links -->\n  <!-- /.navbar-static-side -->\n  <div id="page-wrapper" style="min-height: 561px;">\n    <div ui-view></div>\n  </div>\n  <!-- /#page-wrapper -->\n</div>'),a.put("app/mobile-store-stats/android-country-stats/android-country-stats.html",'<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h3 class="panel-title">Daily Device Installs/Uninstalls in {{androidCountryStatsVm.selectedCountry | country}}</h3>\n        <button ng-click="androidCountryStatsVm.updateData()" id="android-country-stats-update-btn" class="hidden"></button>\n      </div>\n      <div class="panel-body">\n        <highchart id="android-country-stats" config="androidCountryStatsVm.lineChartConfig"></highchart>\n      </div>\n      <div class="panel-footer">\n        <div class="dropup">\n          <button class="btn btn-default dropdown-toggle" type="button" id="android-country-stats-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n            {{androidCountryStatsVm.selectedCountry | country}}\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu scrollable-menu" aria-labelledby="android-country-stats-dropdown">\n            <li ng-repeat="country in androidCountryStatsVm.availableCountries | orderBy:country">\n              <a href="" ng-click="androidCountryStatsVm.selectDropdownCountry(country)">{{country | country}}</a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <table class="table table-striped table-bordered table-hover" id="android-country-stats-table">\n        <thead>\n          <tr>\n            <th>Country</th>\n            <th class="text-right">Total Daily Device Installs</th>\n            <th class="text-right">Total Daily Device Uninstalls</th>\n            <th class="text-right">Total Daily Device Upgrades</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="item in androidCountryStatsVm.convertObjectToArray(androidCountryStatsVm.tableData) | orderBy:\'\\u0022Daily Device Installs\\u0022\':true | limitTo:15">\n            <td>{{item.name | country}}</td>\n            <td class="text-right">{{item[\'Daily Device Installs\'] | number}}</td>\n            <td class="text-right">{{item[\'Daily Device Uninstalls\'] | number}}</td>\n            <td class="text-right">{{item[\'Daily Device Upgrades\'] | number}}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>'),a.put("app/mobile-store-stats/android-cumulative-stats/android-cumulative-stats.html",'<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h3 class="panel-title">Current/Total Installs</h3>\n        <button ng-click="androidCumulativeStatsVm.updateData()" id="android-cumulative-stats-update-btn" class="hidden"></button>\n      </div>\n      <div class="panel-body">\n        <highchart id="android-cumulative-stats" config="androidCumulativeStatsVm.lineChartConfig"></highchart>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <div class="dropdown">\n          <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n            {{androidCumulativeStatsVm.selectedSubject}}\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">\n            <li ng-repeat="subject in androidCumulativeStatsVm.dataSubjects">\n              <a href="" ng-click="androidCumulativeStatsVm.selectDropdownSubject(subject)">{{subject}}</a>\n            </li>\n          </ul>\n        </div>\n      </div>\n      <table class="table table-striped table-bordered table-hover" id="linechart-table">\n        <thead>\n          <tr>\n            <th>Date</th>\n            <th class="text-right">Total</th>\n            <th class="text-right">Change Net / %</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="item in androidCumulativeStatsVm.reverseLineChartData[androidCumulativeStatsVm.getSubjectIndex()].data">\n            <td>{{item[0] | date:\'longDate\'}}</td>\n            <td class="text-right">{{item[1] | number}}</td>\n            <td class="text-right increased" ng-if="$index !== androidCumulativeStatsVm.reverseLineChartData[androidCumulativeStatsVm.getSubjectIndex()].data.length-1 && (item[1] - androidCumulativeStatsVm.reverseLineChartData[androidCumulativeStatsVm.getSubjectIndex()].data[$index+1][1]) > 0">\n              {{(item[1] - androidCumulativeStatsVm.reverseLineChartData[androidCumulativeStatsVm.getSubjectIndex()].data[$index+1][1]) | number}} <i class="fa fa-sort-asc fa-fw"></i>\n              {{((item[1] - androidCumulativeStatsVm.reverseLineChartData[androidCumulativeStatsVm.getSubjectIndex()].data[$index+1][1]) / androidCumulativeStatsVm.reverseLineChartData[androidCumulativeStatsVm.getSubjectIndex()].data[$index+1][1]) | percentage:2}}\n            </td>\n            <td class="text-right decreased" ng-if="$index !== androidCumulativeStatsVm.reverseLineChartData[androidCumulativeStatsVm.getSubjectIndex()].data.length-1 && (item[1] - androidCumulativeStatsVm.reverseLineChartData[androidCumulativeStatsVm.getSubjectIndex()].data[$index+1][1]) < 0">\n              {{(item[1] - androidCumulativeStatsVm.reverseLineChartData[androidCumulativeStatsVm.getSubjectIndex()].data[$index+1][1]) | number}} <i class="fa fa-sort-desc fa-fw"></i>\n              {{((item[1] - androidCumulativeStatsVm.reverseLineChartData[androidCumulativeStatsVm.getSubjectIndex()].data[$index+1][1]) / androidCumulativeStatsVm.reverseLineChartData[androidCumulativeStatsVm.getSubjectIndex()].data[$index+1][1]) | percentage:2}}\n            </td>\n            <td class="text-right" ng-if="$index !== androidCumulativeStatsVm.reverseLineChartData[androidCumulativeStatsVm.getSubjectIndex()].data.length-1 && (item[1] - androidCumulativeStatsVm.reverseLineChartData[androidCumulativeStatsVm.getSubjectIndex()].data[$index+1][1]) === 0">\n              0 <i class="fa fa-fw">-</i> 0.00%\n            </td>\n            <td class="text-right" ng-if="$index === androidCumulativeStatsVm.reverseLineChartData[androidCumulativeStatsVm.getSubjectIndex()].data.length-1">-</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>'),a.put("app/mobile-store-stats/android-daily-device-stats/android-daily-device-stats.html",'<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h3 class="panel-title">Daily Device Installs/Uninstalls</h3>\n        <button ng-click="androidDailyDeviceStatsVm.updateData()" id="android-daily-device-stats-update-btn" class="hidden"></button>\n      </div>\n      <div class="panel-body">\n        <highchart id="android-daily-device-stats" config="androidDailyDeviceStatsVm.lineChartConfig"></highchart>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <table class="table table-striped table-bordered table-hover" id="android-daily-device-stats-table">\n        <thead>\n          <tr>\n            <th>Subject</th>\n            <th class="text-right">Min. Count</th>\n            <th class="text-right">Max. Count</th>\n            <th class="text-right">Average</th>\n            <th class="text-right">Total Count</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="item in androidDailyDeviceStatsVm.lineChartData">\n            <td>{{item.name | titleCase}}</td>\n            <td class="text-right">{{androidDailyDeviceStatsVm.getMinimum(item.data) | number}}</td>\n            <td class="text-right">{{androidDailyDeviceStatsVm.getMaximum(item.data) | number}}</td>\n            <td class="text-right">{{androidDailyDeviceStatsVm.getAverage(item.data) | number:0}}</td>\n            <td class="text-right">{{androidDailyDeviceStatsVm.getSum(item.data) | number}}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>'),a.put("app/mobile-store-stats/android-daily-user-stats/android-daily-user-stats.html",'<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h3 class="panel-title">Daily User Installs/Uninstalls</h3>\n        <button ng-click="androidDailyUserStatsVm.updateData()" id="android-daily-user-stats-update-btn" class="hidden"></button>\n      </div>\n      <div class="panel-body">\n        <highchart id="android-daily-user-stats" config="androidDailyUserStatsVm.lineChartConfig"></highchart>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <table class="table table-striped table-bordered table-hover" id="android-daily-user-stats-table">\n        <thead>\n          <tr>\n            <th>Subject</th>\n            <th class="text-right">Min. Count</th>\n            <th class="text-right">Max. Count</th>\n            <th class="text-right">Average</th>\n            <th class="text-right">Total Count</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="item in androidDailyUserStatsVm.lineChartData">\n            <td>{{item.name | titleCase}}</td>\n            <td class="text-right">{{androidDailyUserStatsVm.getMinimum(item.data) | number}}</td>\n            <td class="text-right">{{androidDailyUserStatsVm.getMaximum(item.data) | number}}</td>\n            <td class="text-right">{{androidDailyUserStatsVm.getAverage(item.data) | number:0}}</td>\n            <td class="text-right">{{androidDailyUserStatsVm.getSum(item.data) | number}}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>'),a.put("app/mobile-store-stats/android-language-stats/android-language-stats.html",'<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h3 class="panel-title">Daily Device Installs/Uninstalls for {{androidLanguageStatsVm.selectedLanguage | language}} Language</h3>\n        <button ng-click="androidLanguageStatsVm.updateData()" id="android-language-stats-update-btn" class="hidden"></button>\n      </div>\n      <div class="panel-body">\n        <highchart id="android-language-stats" config="androidLanguageStatsVm.lineChartConfig"></highchart>\n      </div>\n      <div class="panel-footer">\n        <div class="dropup">\n          <button class="btn btn-default dropdown-toggle" type="button" id="android-language-stats-dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n            {{androidLanguageStatsVm.selectedLanguage | language}}\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu scrollable-menu" aria-labelledby="dropdownMenu1">\n            <li ng-repeat="language in androidLanguageStatsVm.availableLanguages | orderBy:language">\n              <a href="" ng-click="androidLanguageStatsVm.selectDropdownLanguage(language)">{{language | language}}</a>\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <table class="table table-striped table-bordered table-hover" id="android-language-stats-table">\n        <thead>\n          <tr>\n            <th>Language</th>\n            <th class="text-right">Total Daily Device Installs</th>\n            <th class="text-right">Total Daily Device Uninstalls</th>\n            <th class="text-right">Total Daily Device Upgrades</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="item in androidLanguageStatsVm.convertObjectToArray(androidLanguageStatsVm.tableData) | orderBy:\'\\u0022Daily Device Installs\\u0022\':true | limitTo:15">\n            <td>{{item.name | language}}</td>\n            <td class="text-right">{{item[\'Daily Device Installs\'] | number}}</td>\n            <td class="text-right">{{item[\'Daily Device Uninstalls\'] | number}}</td>\n            <td class="text-right">{{item[\'Daily Device Upgrades\'] | number}}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>'),a.put("app/mobile-store-stats/mobile-store-stats.html",'<div class="row">\n  <div class="col-lg-12">\n    <h1 class="page-header">Mobile Store Stats</h1>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <form class="form-inline">\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="monthSelectBtn" id="month-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Month:</b> {{mobileStoreStatsVm.selectedMonth}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="month-select-btn">\n                <li ng-repeat="month in mobileStoreStatsVm.availableMonths">\n                  <a href="" ng-click="mobileStoreStatsVm.selectDropdownMonth(month)">{{month}}: {{mobileStoreStatsVm.monthNames[month]}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-default dropdown-toggle dropdown-btn" type="button" name="yearSelectBtn" id="year-select-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                <b>Year:</b> {{mobileStoreStatsVm.selectedYear}}\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="year-select-btn">\n                <li ng-repeat="year in mobileStoreStatsVm.availableYears" class="text-center">\n                  <a href="" ng-click="mobileStoreStatsVm.selectDropdownYear(year)">{{year}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n          <div class="form-group">\n            <button type="button" class="btn btn-primary" name="date-update" ng-click="mobileStoreStatsVm.updateDataWithNewYearMonth()" id="date-update">Go! <i class="fa fa-arrow-right fa-fw"></i></button>\n          </div>\n          <div class="form-group">\n            <div class="dropdown">\n              <button class="btn btn-success" type="button" name="downloadCSV" id="download-csv-btn" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n                export CSV\n                <span class="caret"></span>\n              </button>\n              <ul class="dropdown-menu" aria-labelledby="download-csv-btn">\n                <li ng-repeat="option in mobileStoreStatsVm.availableDownloadOptions">\n                  <a href="" ng-click="mobileStoreStatsVm.fetchAndDownloadCSV(option)">{{option}}</a>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n<!-- Line Graph Views -->\n<div class="row">\n  <div class="col-lg-6">\n    <div ui-view="android-daily-device-stats"></div>\n  </div>\n  <div class="col-lg-6">\n    <div ui-view="android-daily-user-stats"></div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-lg-6">\n    <div ui-view="android-country-stats"></div>\n  </div>\n  <div class="col-lg-6">\n    <div ui-view="android-language-stats"></div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-lg-6">\n    <div ui-view="android-cumulative-stats"></div>\n  </div>\n</div>'),a.put("app/monthly-recurring-revenue/monthly-recurring-revenue.html",'<div class="row">\n  <div class="col-lg-12">\n    <h1 class="page-header"> Monthly Recurring Revenue</h1>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <form class="form-inline">\n          <div class="form-group">\n            <label for="startDate">Range: </label>\n            <input type="date" id="start-date" class="form-control" name="startDate" ng-model="monthlyRecurringRevenueVm.dateRange.startDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <label for="endDate">-</label>\n            <input type="date" id="end-date" class="form-control" name="endDate" ng-model="monthlyRecurringRevenueVm.dateRange.endDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <button type="button" class="btn btn-primary" name="date-update" ng-click="monthlyRecurringRevenueVm.lineChartFilter()">Go! <i class="fa fa-arrow-right fa-fw"></i></button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <highchart config="monthlyRecurringRevenueVm.lineChartConfig"></highchart>\n      </div>\n\n      <div class="panel-footer">\n        <div class="row">\n        <form>\n          <div class="col-sm-6 form-group">\n            <label for="rangeSelectBtn">Range: </label>\n            <select class="form-control" ng-model="monthlyRecurringRevenueVm.selectedRange" name="rangeSelectBtn" id="range-select-btn" ng-change="monthlyRecurringRevenueVm.lineChartFilter()">\n              <option ng-repeat="range in monthlyRecurringRevenueVm.availableRanges" value="{{range}}">{{range | titleCase}}</option>\n            </select>\n          </div>\n          <div class="col-sm-6 form-group">\n            <label for="deviceSelectBtn">Device: </label>\n            <select class="form-control" ng-model="monthlyRecurringRevenueVm.selectedDeviceFilter" name="deviceSelectBtn" id="device-select-btn" ng-change="monthlyRecurringRevenueVm.lineChartFilter()">\n              <option value="all">All</option>\n              <option ng-repeat="device in monthlyRecurringRevenueVm.availableDevices" value="{{device}}">{{device | device}}</option>\n            </select>\n          </div>\n        </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<!-- Table -->\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <div class="dropdown">\n          <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">\n            {{monthlyRecurringRevenueVm.selectedRange | titleCase}}\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">\n            <li ng-repeat="range in monthlyRecurringRevenueVm.availableRanges">\n              <a href="" ng-click="monthlyRecurringRevenueVm.selectDropdownRange(range)">{{range | titleCase}}</a>\n            </li>\n          </ul>\n          <button class="btn btn-success pull-right" type="button" name="downloadCSV" id="user-stats-download-btn" ng-click="monthlyRecurringRevenueVm.fetchAndDownloadCSV(monthlyRecurringRevenueVm.reversedDataContainer,\'LineChart\')">\n              export CSV\n          </button>\n        </div>\n      </div>\n      <table class="table table-striped table-bordered table-hover" id="linechart-table">\n        <thead>\n          <tr>\n            <th class="col-sm-4">Date</th>\n            <th class="col-sm-4 text-right">MRR</th>\n            <th class="col-sm-4 text-right">Change Net / %</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="item in monthlyRecurringRevenueVm.reversedDataContainer">\n            <td class="col-sm-4" ng-style="monthlyRecurringRevenueVm.getDateColor({{item[0]}})">{{item[0] | date:\'yyyy. MM. dd (EEE)\'}}</td>\n            <td class="col-sm-4 text-right">{{item[1] | number :0}}</td>\n            <td class="col-sm-4 text-right increased" ng-if="item[2] > 0">\n              {{(item[2]) | number:0}}\n              <i class="fa fa-sort-asc fa-fw"></i>\n              {{(item[3]) | percentage:2}}\n            </td>\n            <td class="col-sm-4 text-right decreased" ng-if="item[2] < 0">\n              {{(item[2]) | number:0}}\n              <i class="fa fa-sort-desc fa-fw"></i>\n              {{(item[3]) | percentage:2}}\n            </td>\n            <td class="col-sm-4 text-right" ng-if="item[2] === 0">\n              0 <i class="fa fa-fw">-</i> 0.00%\n            </td>\n            <td class="col-sm-4 text-right" ng-if="item[2] === \'-\'">\n              -\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class="text-center">\n      <uib-pagination boundary-links="true" total-items="monthlyRecurringRevenueVm.totalItem" ng-model="monthlyRecurringRevenueVm.currentPage"\n                      ng-change="monthlyRecurringRevenueVm.pageChanged(monthlyRecurringRevenueVm.currentPage)" items-per-page="20" max-size="10" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></uib-pagination>\n    </div>\n  </div>\n</div>\n'),a.put("app/preferred-subjects/preferred-subjects.html",'<div class="row">\n  <div class="col-lg-12">\n    <h1>Preferred Subjects</h1>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <div>\n      <table class="table table-striped table-bordered table-hover">\n        <thead>\n        <tr>\n          <th class="col-sm-2 clickable-thead" ng-click="preferredSubjectsVm.sortType(\'grade_id\')">\n            Grade\n            <i class="fa fa-caret-down fa-fw"\n               ng-if="preferredSubjectsVm.selectedOrderBy == \'DESC\' && preferredSubjectsVm.selectedSortType ==\'grade_id\'"></i>\n            <i class="fa fa-caret-up fa-fw"\n               ng-if="preferredSubjectsVm.selectedOrderBy == \'ASC\' && preferredSubjectsVm.selectedSortType ==\'grade_id\'"></i>\n          </th>\n          <th class="col-sm-2 clickable-thead" ng-click="preferredSubjectsVm.sortType(\'subject_id\')">\n            Subject\n            <i class="fa fa-caret-down fa-fw"\n               ng-if="preferredSubjectsVm.selectedOrderBy == \'DESC\' && preferredSubjectsVm.selectedSortType ==\'subject_id\'"></i>\n            <i class=subject_id\n               ng-if="preferredSubjectsVm.selectedOrderBy == \'ASC\' && preferredSubjectsVm.selectedSortType ==\'publisher_id\'"></i>\n          </th>\n          <th class="col-sm-2 clickable-thead" ng-click="preferredSubjectsVm.sortType(\'count\')">\n            Count\n            <i class="fa fa-caret-down fa-fw"\n               ng-if="preferredSubjectsVm.selectedOrderBy == \'DESC\' && preferredSubjectsVm.selectedSortType ==\'count\'"></i>\n            <i class="fa fa-caret-up fa-fw"\n               ng-if="preferredSubjectsVm.selectedOrderBy == \'ASC\' && preferredSubjectsVm.selectedSortType ==\'count\'"></i>\n          </th>\n\n        </tr>\n        </thead>\n        <tbody>\n        <tr ng-repeat="item in preferredSubjectsVm.dataContainer">\n          <td class="col-sm-2">{{item.grade_id | grade}}</td>\n          <td class="col-sm-2">{{item.subject_id | subject}}</td>\n          <td class="col-sm-2">{{item.count| number}}</td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n'),a.put("app/publisher-rate/publisher-rate.html",'<div class="row">\n  <div class="col-lg-12">\n    <h1>Publisher / Series Avg Rate</h1>\n  </div>\n</div>\n<div class="panel panel-default">\n  <div class="panel-footer">\n    <form name="cardRateForm" novalidate>\n      <div class="row">\n        <div class="col-sm-4 form-group">\n          <label>Publisher</label>\n          <select class="form-control" ng-model="publisherRateVm.selectedPublisherFilter" name="publisherSelectBtn"\n                  id="publisher-select-btn" ng-change="publisherRateVm.getSeriesRate()">\n            <option ng-repeat="publisher in publisherRateVm.availablePublishers" value="{{publisher}}">{{publisher |\n              publisher}}\n            </option>\n          </select>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n\n<h4 class="col-sm-4" ng-if="publisherRateVm.selectedPublisherFilter != -1">\n  {{publisherRateVm.selectedPublisherFilter | publisher}} : {{publisherRateVm.publisherRates[publisherRateVm.selectedPublisherFilter][0] / publisherRateVm.publisherRates[publisherRateVm.selectedPublisherFilter][1] | number:2}} / {{publisherRateVm.publisherRates[publisherRateVm.selectedPublisherFilter][1]}}\n</h4>\n<h4 class="col-sm-4" ng-if="publisherRateVm.selectedPublisherFilter == -1">\n  Total Publisher Avg Rate\n</h4>\n<div class="row" ng-if="publisherRateVm.selectedPublisherFilter == -1">\n  <div class="col-sm-12">\n    <div>\n      <table class="table table-striped table-bordered table-hover">\n        <thead>\n        <tr>\n          <th class="col-sm-4 clickable-thead">\n            Rank\n          </th>\n          <th class="col-sm-4 clickable-thead text-right">\n            Publisher\n          </th>\n          <th class="col-sm-4 clickable-thead text-right">\n            Average Rate / Rate Count\n          </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr ng-repeat="item in publisherRateVm.sortablePublishers">\n          <td class="col-sm-4">{{$index + 1}}</td>\n          <td class="col-sm-4 text-right">{{item[0] | publisher}}({{item[0]}})</td>\n          <td class="col-sm-4 text-right">{{item[1] | number:2}} / {{item[2]}}</td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n\n<div class="row" ng-if="publisherRateVm.selectedPublisherFilter != -1">\n  <div class="col-sm-12">\n    <div>\n      <table class="table table-striped table-bordered table-hover">\n        <thead>\n        <tr>\n          <th class="col-sm-4 clickable-thead">\n            Rank\n          </th>\n          <th class="col-sm-4 clickable-thead text-right">\n            Series\n          </th>\n          <th class="col-sm-4 clickable-thead text-right">\n            Average Rate / Rate Count\n          </th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr ng-repeat="item in publisherRateVm.sortableSeries">\n          <td class="col-sm-4">{{$index + 1}}</td>\n          <td class="col-sm-4 text-right">{{item[0] | series}}({{item[0]}})</td>\n          <td class="col-sm-4 text-right">{{item[1] | number:2}} / {{item[2]}}</td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>'),a.put("app/signin/signin.html",'<div class="container">\n  <div class="row">\n    <div class="col-md-4 col-md-offset-4">\n      <div class="login-panel panel panel-default">\n        <div class="panel-heading">\n          <h3 class="panel-title">Please Sign In</h3>\n        </div>\n        <div class="panel-body">\n          <form role="form" name="signinForm" ng-submit="signinVm.signin()">\n            <fieldset>\n              <div class="form-group">\n                <input class="form-control" placeholder="E-mail" name="email" type="email" ng-model="signinVm.email" autofocus required="required">\n              </div>\n              <div class="form-group">\n                <input class="form-control" placeholder="Password" name="password" type="password" ng-model="signinVm.password" value="" required="required">\n              </div>\n              <!-- Change this to a button or input when using this as a form -->\n              <button type="submit" class="btn btn-lg btn-success btn-block">Login</button>\n            </fieldset>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'),a.put("app/subscribe-userdata/subscribe-userdata.html",'<div class="row">\n  <div class="col-lg-12">\n    <h1 class="page-header"> Subscribers</h1>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <form class="form-inline">\n          <div class="form-group">\n            <label for="startDate">Range: </label>\n            <input type="date" id="start-date" class="form-control" name="startDate"\n                   ng-model="subscribeUserDataVm.dateRange.startDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <label for="endDate">-</label>\n            <input type="date" id="end-date" class="form-control" name="endDate"\n                   ng-model="subscribeUserDataVm.dateRange.endDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <button type="button" class="btn btn-primary" name="date-update"\n                    ng-click="subscribeUserDataVm.lineChartFilter()">Go! <i class="fa fa-arrow-right fa-fw"></i></button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <div class="col-sm-6">\n          <highchart config="subscribeUserDataVm.lineChartPaidDataConfig"></highchart>\n        </div>\n\n        <div class="col-sm-6">\n          <highchart config="subscribeUserDataVm.lineChartUpgradeDataConfig"></highchart>\n        </div>\n      </div>\n\n      <div class="panel-footer">\n        <div class="row">\n          <form>\n            <div class="col-sm-6 form-group">\n              <label for="rangeSelectBtn">Range: </label>\n              <select class="form-control" ng-model="subscribeUserDataVm.selectedRange" name="rangeSelectBtn"\n                      id="range-select-btn" ng-change="subscribeUserDataVm.lineChartFilter()">\n                <option ng-repeat="range in subscribeUserDataVm.availableRanges" value="{{range}}">{{range | titleCase}}\n                </option>\n              </select>\n            </div>\n            <!--<div class="col-sm-4 form-group">-->\n              <!--<label for="roleSelectBtn">Role: </label>-->\n              <!--<select class="form-control" ng-model="subscribeUserDataVm.selectedRoleFilter" name="roleSelectBtn"-->\n                      <!--id="role-select-btn" ng-change="subscribeUserDataVm.lineChartFilter()">-->\n                <!--<option value="all">All</option>-->\n                <!--<option ng-repeat="role in subscribeUserDataVm.availableRoles" value="{{role}}">{{role | titleCase}}-->\n                <!--</option>-->\n              <!--</select>-->\n            <!--</div>-->\n            <div class="col-sm-6 form-group">\n              <label for="deviceSelectBtn">Device: </label>\n              <select class="form-control" ng-model="subscribeUserDataVm.selectedDeviceFilter" name="deviceSelectBtn"\n                      id="device-select-btn" ng-change="subscribeUserDataVm.lineChartFilter()">\n                <option value="all">All</option>\n                <option ng-repeat="device in subscribeUserDataVm.availableDevices" value="{{device}}">{{device |\n                  device}}\n                </option>\n              </select>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<!-- Table -->\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <div class="dropdown">\n          <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown"\n                  aria-haspopup="true" aria-expanded="true">\n            {{subscribeUserDataVm.selectedRange | titleCase}}\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">\n            <li ng-repeat="range in subscribeUserDataVm.availableRanges">\n              <a href="" ng-click="subscribeUserDataVm.selectDropdownRange(range)">{{range | titleCase}}</a>\n            </li>\n          </ul>\n          <button class="btn btn-success pull-right" type="button" name="downloadCSV" id="user-stats-download-btn"\n                  ng-click="subscribeUserDataVm.fetchAndDownloadCSV(subscribeUserDataVm.reversedData,\'LineChart\')">\n            export CSV\n          </button>\n        </div>\n      </div>\n      <table class="table table-striped table-bordered table-hover" id="linechart-table">\n        <thead>\n        <tr>\n          <th class="col-sm-2">Date</th>\n          <th class="col-sm-1">Trial to Basic</th>\n          <th class="col-sm-1">Trial to Standard</th>\n          <th class="col-sm-1">Trial to Premium</th>\n          <th class="col-sm-1">Basic subscribers</th>\n          <th class="col-sm-1">Standard subscribers</th>\n          <th class="col-sm-1">Premium subscribers</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr ng-repeat="item in subscribeUserDataVm.reversedDataContainer">\n          <td class="col-sm-2" ng-style="subscribeUserDataVm.getDateColor({{item[0]}})">{{item[0]| date:\'yyyy. MM. dd (EEE)\'}}</td>\n          <td class="col-sm-1 text-left">{{item[1] | number}} (\n          <span class="text-right increased" ng-if="item[2] > 0">\n            {{(item[2]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[3]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[2] < 0">\n            {{(item[2]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[3]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[2] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[2] === \'-\'">\n            - )\n          </span>\n          </td>\n\n          <td class="col-sm-1 text-left">{{item[4] | number}} (\n          <span class="text-right increased" ng-if="item[5] > 0">\n            {{(item[5]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[6]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[5] < 0">\n            {{(item[5]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[6]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[5] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[5] === \'-\'">\n            - )\n          </span>\n          </td>\n\n          <td class="col-sm-1 text-left">{{item[7] | number}} (\n          <span class="text-right increased" ng-if="item[8] > 0">\n            {{(item[8]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[9]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[8] < 0">\n            {{(item[8]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[9]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[8] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[8] === \'-\'">\n            - )\n          </span>\n          </td>\n\n          <td class="col-sm-1 text-left">{{item[10] | number}} (\n          <span class="text-right increased" ng-if="item[11] > 0">\n            {{(item[12]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[12]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[11] < 0">\n            {{(item[11]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[12]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[11] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[11] === \'-\'">\n            - )\n          </span>\n          </td>\n\n          <td class="col-sm-1 text-left">{{item[13] | number}} (\n          <span class="text-right increased" ng-if="item[14] > 0">\n            {{(item[14]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[15]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[14] < 0">\n            {{(item[14]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[15]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[14] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[14] === \'-\'">\n            - )\n          </span>\n          </td>\n\n          <td class="col-sm-1 text-left">{{item[16] | number}} (\n          <span class="text-right increased" ng-if="item[17] > 0">\n            {{(item[17]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[18]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[17] < 0">\n            {{(item[17]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[18]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[17] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[17] === \'-\'">\n            - )\n          </span>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class="text-center">\n      <uib-pagination boundary-links="true" total-items="subscribeUserDataVm.totalItem"\n                      ng-model="subscribeUserDataVm.currentPage"\n                      ng-change="subscribeUserDataVm.pageChanged(subscribeUserDataVm.currentPage)" items-per-page="20"\n                      max-size="10" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;"\n                      last-text="&raquo;"></uib-pagination>\n    </div>\n  </div>\n</div>\n\n<!-- Pie Graph -->\n<!--<div class="row">-->\n  <!--<div class="col-sm-12">-->\n    <!--<div class="panel panel-default">-->\n      <!--<div class="panel-body">-->\n        <!--<div class="row">-->\n          <!--<div class="col-sm-12">-->\n            <!--<div class="panel panel-default">-->\n              <!--<div class="panel-body">-->\n                <!--<form class="form-inline">-->\n                  <!--<div class="form-group">-->\n                    <!--<label for="startDate">Range: </label>-->\n                    <!--<input type="date" class="form-control" name="startDate"-->\n                           <!--ng-model="subscribeUserDataVm.dateRangePieChart.startDate"-->\n                           <!--placeholder="yyyy-MM-dd"/>-->\n                  <!--</div>-->\n                  <!--<div class="form-group">-->\n                    <!--<label for="endDate">-</label>-->\n                    <!--<input type="date" class="form-control" name="endDate"-->\n                           <!--ng-model="subscribeUserDataVm.dateRangePieChart.endDate"-->\n                           <!--placeholder="yyyy-MM-dd"/>-->\n                  <!--</div>-->\n                  <!--<div class="form-group">-->\n                    <!--<button type="button" class="btn btn-primary" name="date-update"-->\n                            <!--ng-click="subscribeUserDataVm.getPieChart()">Go! <i class="fa fa-arrow-right fa-fw"></i>-->\n                    <!--</button>-->\n                  <!--</div>-->\n                <!--</form>-->\n              <!--</div>-->\n            <!--</div>-->\n          <!--</div>-->\n        <!--</div>-->\n        <!--<div class="col-sm-5">-->\n          <!--<highchart id="piechart" config="subscribeUserDataVm.pieChartConfig"></highchart>-->\n        <!--</div>-->\n        <!--<div class="col-sm-7">-->\n          <!--<div class="dropdown">-->\n            <!--<button class="btn btn-default dropdown-toggle" type="button" id="pie-filter-select-btn"-->\n                    <!--data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">-->\n              <!--{{subscribeUserDataVm.selectedPieChartFilter | titleCase}}-->\n              <!--<span class="caret"></span>-->\n            <!--</button>-->\n            <!--<ul class="dropdown-menu" aria-labelledby="pie-filter-select-btn">-->\n              <!--<li ng-repeat="filter in subscribeUserDataVm.availablePieChartFilters">-->\n                <!--<a href="" ng-click="subscribeUserDataVm.pieChartFilter(filter)">{{filter | titleCase}}</a>-->\n              <!--</li>-->\n            <!--</ul>-->\n            <!--<button class="btn btn-success" type="button" name="downloadCSV"-->\n                    <!--ng-click="subscribeUserDataVm.fetchAndDownloadCSV(subscribeUserDataVm.pieChartSumData,\'PieChart\')">-->\n              <!--export CSV-->\n            <!--</button>-->\n          <!--</div>-->\n          <!--<h3>Total Users by {{subscribeUserDataVm.selectedPieChartFilter | titleCase}}</h3>-->\n          <!--<h5>Total Users: {{subscribeUserDataVm.currentPieChartTotalUsers.value - -->\n            <!--subscribeUserDataVm.currentPieChartDeleteUsers.value | number}}</h5>-->\n          <!--<br>-->\n          <!--<table class="table table-striped table-bordered table-hover" id="piechart-table">-->\n            <!--<thead>-->\n            <!--<tr>-->\n              <!--<th>{{subscribeUserDataVm.selectedPieChartFilter | titleCase}}</th>-->\n              <!--<th class="text-right">Count</th>-->\n              <!--<th class="text-right">Proportion</th>-->\n            <!--</tr>-->\n            <!--</thead>-->\n            <!--<tbody>-->\n            <!--<tr ng-repeat="item in subscribeUserDataVm.pieChartSumData | orderBy:\'y\':true | limitTo:5">-->\n              <!--<td>{{item.name | titleCase | device}}</td>-->\n              <!--<td class="text-right">{{item.y | number}}</td>-->\n              <!--<td class="text-right">{{subscribeUserDataVm.getPieChartProportion(item.y) | percentage:1}}</td>-->\n            <!--</tr>-->\n            <!--</tbody>-->\n          <!--</table>-->\n        <!--</div>-->\n      <!--</div>-->\n    <!--</div>-->\n  <!--</div>-->\n<!--</div>-->\n\n'),
a.put("app/upgrade-downgrade/upgrade-downgrade.html",'<div class="row">\n  <div class="col-lg-12">\n    <h1 class="page-header"> Upgrade & Downgrade Users</h1>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <form class="form-inline">\n          <div class="form-group">\n            <label for="startDate">Range: </label>\n            <input type="date" id="start-date" class="form-control" name="startDate"\n                   ng-model="upgradeDowngradeVm.dateRange.startDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <label for="endDate">-</label>\n            <input type="date" id="end-date" class="form-control" name="endDate"\n                   ng-model="upgradeDowngradeVm.dateRange.endDate"\n                   placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <button type="button" class="btn btn-primary" name="date-update"\n                    ng-click="upgradeDowngradeVm.lineChartFilter()">Go! <i class="fa fa-arrow-right fa-fw"></i></button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <div class="col-sm-6">\n          <highchart config="upgradeDowngradeVm.lineChartUpgradeDataConfig"></highchart>\n        </div>\n\n        <div class="col-sm-6">\n          <highchart config="upgradeDowngradeVm.lineChartDowngradeDataConfig"></highchart>\n        </div>\n      </div>\n\n      <div class="panel-footer">\n        <div class="row">\n          <form>\n            <div class="col-sm-6 form-group">\n              <label for="rangeSelectBtn">Range: </label>\n              <select class="form-control" ng-model="upgradeDowngradeVm.selectedRange" name="rangeSelectBtn"\n                      id="range-select-btn" ng-change="upgradeDowngradeVm.lineChartFilter()">\n                <option ng-repeat="range in upgradeDowngradeVm.availableRanges" value="{{range}}">{{range | titleCase}}\n                </option>\n              </select>\n            </div>\n            <!--<div class="col-sm-4 form-group">-->\n              <!--<label for="roleSelectBtn">Role: </label>-->\n              <!--<select class="form-control" ng-model="upgradeDowngradeVm.selectedRoleFilter" name="roleSelectBtn"-->\n                      <!--id="role-select-btn" ng-change="upgradeDowngradeVm.lineChartFilter()">-->\n                <!--<option value="all">All</option>-->\n                <!--<option ng-repeat="role in upgradeDowngradeVm.availableRoles" value="{{role}}">{{role | titleCase}}-->\n                <!--</option>-->\n              <!--</select>-->\n            <!--</div>-->\n            <div class="col-sm-6 form-group">\n              <label for="deviceSelectBtn">Device: </label>\n              <select class="form-control" ng-model="upgradeDowngradeVm.selectedDeviceFilter" name="deviceSelectBtn"\n                      id="device-select-btn" ng-change="upgradeDowngradeVm.lineChartFilter()">\n                <option value="all">All</option>\n                <option ng-repeat="device in upgradeDowngradeVm.availableDevices" value="{{device}}">{{device |\n                  device}}\n                </option>\n              </select>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<!-- Table -->\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <div class="dropdown">\n          <button class="btn btn-default dropdown-toggle" type="button" id="dropdownMenu1" data-toggle="dropdown"\n                  aria-haspopup="true" aria-expanded="true">\n            {{upgradeDowngradeVm.selectedRange | titleCase}}\n            <span class="caret"></span>\n          </button>\n          <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">\n            <li ng-repeat="range in upgradeDowngradeVm.availableRanges">\n              <a href="" ng-click="upgradeDowngradeVm.selectDropdownRange(range)">{{range | titleCase}}</a>\n            </li>\n          </ul>\n          <button class="btn btn-success pull-right" type="button" name="downloadCSV" id="user-stats-download-btn"\n                  ng-click="upgradeDowngradeVm.fetchAndDownloadCSV(upgradeDowngradeVm.reversedData,\'LineChart\')">\n            export CSV\n          </button>\n        </div>\n      </div>\n      <table class="table table-striped table-bordered table-hover" id="linechart-table">\n        <thead>\n        <tr>\n          <th class="col-sm-2">Date</th>\n          <th class="col-sm-1">Trial to Basic</th>\n          <th class="col-sm-1">Trial to Standard</th>\n          <th class="col-sm-1">Trial to Premium</th>\n          <th class="col-sm-1">Basic subscribers</th>\n          <th class="col-sm-1">Standard subscribers</th>\n          <th class="col-sm-1">Premium subscribers</th>\n        </tr>\n        </thead>\n        <tbody>\n        <tr ng-repeat="item in upgradeDowngradeVm.reversedDataContainer">\n          <td class="col-sm-2" ng-style="upgradeDowngradeVm.getDateColor({{item[0]}})">{{item[0]| date:\'yyyy. MM. dd (EEE)\'}}</td>\n          <td class="col-sm-1 text-left">{{item[1] | number}} (\n          <span class="text-right increased" ng-if="item[2] > 0">\n            {{(item[2]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[3]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[2] < 0">\n            {{(item[2]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[3]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[2] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[2] === \'-\'">\n            - )\n          </span>\n          </td>\n\n          <td class="col-sm-1 text-left">{{item[4] | number}} (\n          <span class="text-right increased" ng-if="item[5] > 0">\n            {{(item[5]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[6]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[5] < 0">\n            {{(item[5]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[6]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[5] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[5] === \'-\'">\n            - )\n          </span>\n          </td>\n\n          <td class="col-sm-1 text-left">{{item[7] | number}} (\n          <span class="text-right increased" ng-if="item[8] > 0">\n            {{(item[8]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[9]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[8] < 0">\n            {{(item[8]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[9]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[8] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[8] === \'-\'">\n            - )\n          </span>\n          </td>\n\n          <td class="col-sm-1 text-left">{{item[10] | number}} (\n          <span class="text-right increased" ng-if="item[11] > 0">\n            {{(item[12]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[12]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[11] < 0">\n            {{(item[11]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[12]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[11] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[11] === \'-\'">\n            - )\n          </span>\n          </td>\n\n          <td class="col-sm-1 text-left">{{item[13] | number}} (\n          <span class="text-right increased" ng-if="item[14] > 0">\n            {{(item[14]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[15]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[14] < 0">\n            {{(item[14]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[15]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[14] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[14] === \'-\'">\n            - )\n          </span>\n          </td>\n\n          <td class="col-sm-1 text-left">{{item[16] | number}} (\n          <span class="text-right increased" ng-if="item[17] > 0">\n            {{(item[17]) | number}}\n            <i class="fa fa-sort-asc fa-fw"></i>\n            {{(item[18]) | percentage:2}} )\n          </span>\n          <span class="text-right decreased" ng-if="item[17] < 0">\n            {{(item[17]) | number}}\n            <i class="fa fa-sort-desc fa-fw"></i>\n            {{(item[18]) | percentage:2}} )\n          </span>\n          <span class="text-right" ng-if="item[17] === 0">\n            0 <i class="fa fa-fw">-</i> 0.00% )\n          </span>\n          <span class="text-right" ng-if="item[17] === \'-\'">\n            - )\n          </span>\n          </td>\n        </tr>\n        </tbody>\n      </table>\n    </div>\n    <div class="text-center">\n      <uib-pagination boundary-links="true" total-items="upgradeDowngradeVm.totalItem"\n                      ng-model="upgradeDowngradeVm.currentPage"\n                      ng-change="upgradeDowngradeVm.pageChanged(upgradeDowngradeVm.currentPage)" items-per-page="20"\n                      max-size="10" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;"\n                      last-text="&raquo;"></uib-pagination>\n    </div>\n  </div>\n</div>\n'),a.put("app/user-contacts/user-contacts.html",'<div class="row">\n  <div class="col-lg-12">\n    <h1 class="page-header">Downloadables</h1>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <h5>Contacts of Daily Active Users (Teachers)</h5>\n      </div>\n      <div class="panel-body">\n        <form name="userContactsForm" novalidate>\n          <div class="form-group">\n            <label for="roleSelectBtn">Year: </label>\n            <select class="form-control" ng-model="userContactsVm.selectedYearFilter" name="yearSelectBtn" id="year-select-btn" ng-change="userContactsVm.selectYearFilter()">\n              <option ng-repeat="year in userContactsVm.availableYears" value="{{year}}">{{year}}</option>\n            </select>\n          </div>\n          <div class="form-group">\n            <label for="deviceSelectBtn">Month: </label>\n            <select class="form-control" ng-model="userContactsVm.selectedMonthFilter" name="monthSelectBtn" id="month-select-btn">\n              <option ng-repeat="month in userContactsVm.availableMonths" value="{{month}}">{{month | month}}</option>\n            </select>\n          </div>\n          <div class="form-group">\n            <label for="countrySelectBtn">Country: </label>\n            <select class="form-control" ng-model="userContactsVm.selectedCountryFilter" name="countrySelectBtn" id="country-select-btn">\n              <option value="all">All</option>\n              <option ng-repeat="country in userContactsVm.availableCountries" value="{{country}}">{{country | country}}</option>\n              <option value="etc">Others</option>\n            </select>\n          </div>\n          <button type="button" class="btn btn-success" name="download" ng-click="userContactsVm.fetchAndDownloadCSV(\'user-contacts\')" id="user-contacts-download-btn"><i class="fa fa-share-square-o fa-fw"></i> export CSV</button>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-6">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <div class="row">\n          <div class="col-lg-8">\n            <h5>Contacts of Japanese Users (Teachers)</h5>\n          </div>\n          <div class="col-lg-4 text-right-media">\n            <button type="button" class="btn btn-success" name="download" ng-click="userContactsVm.fetchAndDownloadCSV(\'jp-teachers\')" id="jp-user-contacts-download-btn"><i class="fa fa-share-square-o fa-fw"></i> export CSV</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="col-sm-6">\n    <div class="panel panel-default">\n      <div class="panel-heading">\n        <div class="row">\n          <div class="col-lg-8">\n            <h5>List of classes in Japan</h5>\n          </div>\n          <div class="col-lg-4 text-right-media">\n            <button type="button" class="btn btn-success" name="download" ng-click="userContactsVm.fetchAndDownloadCSV(\'jp-classes\')" id="jp-classes-download-btn"><i class="fa fa-share-square-o fa-fw"></i> export CSV</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n'),a.put("app/user-page-flow/user-page-flow.html",'<div class="row">\n  <div class="col-lg-12">\n    <h1 class="page-header">User Page Flow</h1>\n  </div>\n</div>\n<div class="row">\n  <div class="col-sm-12">\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <div class="alert alert-danger hide" id="date-alert-msg" role="alert">{{userPageFlowVm.alertMsgContent}}</div>\n        <form class="form-inline">\n          <div class="form-group">\n            <label for="startDate">Range: </label>\n            <input type="date" id="start-date" class="form-control" name="startDate" ng-model="userPageFlowVm.dateRange.startDate"\n              placeholder="yyyy-MM-dd"/>\n          </div>\n          <div class="form-group">\n            <label for="endDate">-</label>\n            <input type="date" id="end-date" class="form-control" name="endDate" ng-model="userPageFlowVm.dateRange.endDate"\n              placeholder="yyyy-MM-dd"/>\n          </div>\n        </form>\n        <hr>\n        <form class="form-inline">\n          <div class="form-group">\n            <label for="userId">User ID: </label>\n            <input type="text" id="user-id-input" class="form-control" name="userId" ng-model="userPageFlowVm.userId"\n              placeholder="User ID to search"/>\n          </div>\n          <div class="form-group">\n            <button type="button" class="btn btn-primary" name="date-update" ng-click="userPageFlowVm.triggerUpdateWithDate()" id="date-update">Go! <i class="fa fa-arrow-right fa-fw"></i></button>\n          </div>\n        </form>\n        <div class="panel panel-default">\n          <table class="table table-striped table-bordered table-hover">\n            <thead>\n            <tr>\n              <th>이름</th>\n              <th>가입날짜</th>\n              <th>최근 접속날짜</th>\n              <th>결제날짜</th>\n              <th>다운로드 카드 수</th>\n              <th>완료 카드 수</th>\n              <th>역할</th>\n            </tr>\n            </thead>\n            <tbody>\n            <tr tooltip-placement="left">\n              <th class="col-sm-1">{{userPageFlowVm.userInfo.name}}</th>\n              <th class="col-sm-2">{{userPageFlowVm.userInfo.created_at | date:\'yyyy. MM. dd (EEE)\'}}</th>\n              <th class="col-sm-2">{{userPageFlowVm.userInfo.last_sign_at | date:\'yyyy. MM. dd (EEE)\'}}</th>\n              <th class="col-sm-2">{{userPageFlowVm.userInfo.paid | date:\'yyyy. MM. dd (EEE)\'}}</th>\n              <th class="col-sm-2">{{userPageFlowVm.userInfo.downloadedCount}}</th>\n              <th class="col-sm-2">{{userPageFlowVm.userInfo.completeCount}}</th>\n              <th class="col-sm-1">{{userPageFlowVm.userInfo.role}}</th>\n            </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="col-lg-12">\n    <div class="panel panel-default">\n      <table class="table table-striped table-bordered table-hover" id="user-page-flow-table">\n        <thead>\n          <tr>\n            <th>Time</th>\n            <th>Type</th>\n            <th>Previous Page</th>\n            <th>Current Page</th>\n            <th>Payment Plan</th>\n            <th>App Version</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr ng-repeat="item in userPageFlowVm.userPageFlowData" tooltip-placement="left">\n            <th ng-if="item.cur_page === null && item.prev_page === null" colspan="6" class="success">{{item.time | date:\'fullDate\'}}</th>\n            <td ng-if="item.cur_page !== null && item.prev_page !== null" class="col-sm-2">{{item.time | date:\'mediumTime\'}}</td>\n            <td class="col-sm-2">{{item._type}}</td>\n            <td ng-if="item.cur_page !== null && item.prev_page !== null" class="table-cell col-sm-2">{{item.prev_page | pageName}}</td>\n            <td ng-if="item.cur_page !== null && item.prev_page !== null" class="table-cell col-sm-2">{{item.cur_page | pageName}}</td>\n            <td ng-if="item.cur_page !== null && item.prev_page !== null" class="table-cell col-sm-2">{{item.now_payment_plan}}</td>\n            <td ng-if="item.cur_page !== null && item.prev_page !== null" class="table-cell col-sm-2">{{item.app_version}}</td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</div>\n')}]);